<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins Infrastructure : 20150903 Wiki Outage</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins Infrastructure</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="wiki.jenkins-ci.org.html">wiki.jenkins-ci.org</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins Infrastructure : 20150903 Wiki Outage
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (kohsuke)</span>, last modified on Sep 23, 2015
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Confluence went unresponsive after running well for 8 weeks. Socket connections do not get picked up by wiki.jenkins-ci.org.</p>

<p>The apache mod-status output <a href="attachments/82673667/82837506.html" data-linked-resource-id="82837506" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="status.html" data-nice-type="HTML Document" data-linked-resource-content-type="text/html" data-linked-resource-container-id="82673667" data-linked-resource-container-version="3">status.html</a> suggests that request handling is stuck with Confluence. Note that none of the pending requests are for rendering Wiki pages, which seems to rule out that the cache layer is the problem.</p>

<p>The tail of the stdout <a href="attachments/82673667/82837505.txt" data-linked-resource-id="82837505" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="stacktrace.txt" data-nice-type="Text File" data-linked-resource-content-type="text/plain" data-linked-resource-container-id="82673667" data-linked-resource-container-version="3">stacktrace.txt</a> suggests that there's a memory fill up. See the heap summary at the end and the &quot;GC limit exceed message&quot; close to the top.</p>

<p>The Memory RSS view from the past month shows a slow creep of the memory size over time.<br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/82673667/82837508.png" data-image-src="attachments/82673667/82837508.png" data-unresolved-comment-count="0" data-linked-resource-id="82837508" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="outage-1mo.png" data-base-url="http://wiki.jenkins-ci.org:8085" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82673667" data-linked-resource-container-version="3"></span></p>

<p>This is the same metrics view during the outage:<br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/82673667/82837507.png" data-image-src="attachments/82673667/82837507.png" data-unresolved-comment-count="0" data-linked-resource-id="82837507" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="outpage.png" data-base-url="http://wiki.jenkins-ci.org:8085" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82673667" data-linked-resource-container-version="3"></span></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82673667/82837505.txt">stacktrace.txt</a> (text/plain)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82673667/82837506.html">status.html</a> (text/html)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82673667/82837507.png">outpage.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82673667/82837508.png">outage-1mo.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 29, 2021 15:45</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
