<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Openid Connect Authentication Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Openid Connect Authentication Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (mbischoff)</span>, last modified on Jan 27, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View OpenId Connect Authentication <a href="https://plugins.jenkins.io/oic-auth" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2019-01-28/#SECURITY-886" class="external-link" rel="nofollow">Client secret displayed in plain text</a></li>
</ul>

</div></div>
<p><a href="https://ci.jenkins.io/job/Plugins/job/oic-auth-plugin/job/master/" class="external-link" rel="nofollow"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" width="120" src="https://ci.jenkins.io/buildStatus/icon?job=Plugins/oic-auth-plugin/master" data-image-src="https://ci.jenkins.io/buildStatus/icon?job=Plugins/oic-auth-plugin/master"></span><br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" width="120" src="http://sebastian-badge.info/plugins/oic-auth.svg" data-image-src="http://sebastian-badge.info/plugins/oic-auth.svg"></span><br/></a></p><h1 id="OpenidConnectAuthenticationPlugin-"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="185" src="attachments/99451177/165583182.jpg" data-image-src="attachments/99451177/165583182.jpg" data-unresolved-comment-count="0" data-linked-resource-id="165583182" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="OPENID_CONNECT_NEW-Logo.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="99451177" data-linked-resource-container-version="24"></span></h1><h1 id="OpenidConnectAuthenticationPlugin-Summary">Summary</h1>Allows users to authenticate using self hosted or public openid connect providers.<h1 id="OpenidConnectAuthenticationPlugin-OpenTickets(bugsandfeaturerequests)">Open Tickets (bugs and feature requests)</h1><p><a href="https://github.com/jenkinsci/oic-auth-plugin/issues?q=is%3Aopen+is%3Aissue" class="external-link" rel="nofollow">https://github.com/jenkinsci/oic-auth-plugin/issues</a></p><h1 id="OpenidConnectAuthenticationPlugin-Changelog">Changelog</h1><p><a href="https://github.com/jenkinsci/oic-auth-plugin/releases/" class="external-link" rel="nofollow">https://github.com/jenkinsci/oic-auth-plugin/releases/</a></p><h3 id="OpenidConnectAuthenticationPlugin-1.6">1.6 </h3><p style="margin-left: 30.0px;">Special release for <a href="https://github.com/jenkinsci/oic-auth-plugin/issues/46" class="external-link" rel="nofollow">#46</a> which shouldn't, but might break things - <em>please report any issues you have with this version here: <a href="https://github.com/jenkinsci/oic-auth-plugin/issues/62" class="external-link" rel="nofollow">https://github.com/jenkinsci/oic-auth-plugin/issues/62</a></em></p><p style="margin-left: 30.0px;"><strong>In case of any troubles revert to 1.5 and report your issues</strong></p><h3 id="OpenidConnectAuthenticationPlugin-1.5">1.5</h3><ul><li>Support for configuring by well known url (/.well-known/openid-configuration) see also <a href="https://openid.net/specs/openid-connect-discovery-1.html#ProviderConfig" class="external-link" rel="nofollow">https://openid.net/specs/openid-connect-discovery-1.html#ProviderConfig</a></li><li>fixed issue indroduced with jenkins 2.150.2 with logout occurring immediately after login see: <a href="https://github.com/jenkinsci/oic-auth-plugin/issues/54" class="external-link" rel="nofollow">https://github.com/jenkinsci/oic-auth-plugin/issues/54</a></li><li>Masking client secret to avoid over the shoulder leaking of secret.</li><li>Nested field mapping - permitting the use of values of non top-level keys, see <a href="https://github.com/jenkinsci/oic-auth-plugin/pull/36" class="external-link" rel="nofollow">https://github.com/jenkinsci/oic-auth-plugin/pull/36</a> and <a href="https://github.com/jenkinsci/oic-auth-plugin/blob/6e643be0883b3843876f3522eabb87867677cc83/src/main/java/org/jenkinsci/plugins/oic/OicSecurityRealm.java#L630" class="external-link" rel="nofollow">https://github.com/jenkinsci/oic-auth-plugin/blob/6e643be0883b3843876f3522eabb87867677cc83/src/main/java/org/jenkinsci/plugins/oic/OicSecurityRealm.java#L630</a></li><li>Returning a 401 instead of throwing an NullPointerException when there's no session at the end of the authentication interaction</li></ul><h3 id="OpenidConnectAuthenticationPlugin-1.4">1.4</h3><ul><li>We can now also look for groups in the UserInfo endpoint when it's configured</li><li>Added documentation about how scripted clients should authenticate given this plugin is active</li><li>Now honoring jenkins proxy settings see <a href="JenkinsBehindProxy.html">JenkinsBehindProxy</a></li></ul><h3 id="OpenidConnectAuthenticationPlugin-1.3">1.3</h3><ul><li>Bugfix for regression, breaks on absent expires_in</li></ul><h3 id="OpenidConnectAuthenticationPlugin-1.2">1.2</h3><ul><li>Local Login / escape hatch</li><li>Fix JEP-200 compatibility</li><li>Added test harness</li><li>Using role-based permissions</li><li>Fix for 1.1 breaking on existing configuration and configuration saving issues</li><li>Add groups at login if provided in the idToken as an array of strings</li><li>Exception with Azure authority needs testing</li><li>Patched TokenResponse of the google oauth-client for better compatibility with openid provider implementations</li><li>On Logout have the option to log out of OpenId Provider</li><li>Friendlier error when the user declines authorization</li></ul><h3 id="OpenidConnectAuthenticationPlugin-1.1">1.1</h3><ul><li>fix save not resetting userNameField and scopes to default values bug / User name field value not being updated</li><li>Add new setting to disable sslVerification - for testing purposes enhancement</li><li>Support OIDC UserInfo Endpoint enhancement</li></ul><h3 id="OpenidConnectAuthenticationPlugin-1.0">1.0</h3><p>initial release</p><h2 id="OpenidConnectAuthenticationPlugin-Configuration">Configuration</h2><p>Configuration of this plugin takes a bit of effort as it requires some knowledge of the openid connect standard as well as the non-standard configuration of the various identity providers out there. Should you configure this plugin against a identity provider then please share your experiences and found caveats through a blog post or by adding it to the wiki.</p><p>Also note that the spec describes a well known configuration location which will also help discovering your settings (<a href="https://openid.net/specs/openid-connect-discovery-1.html#ProviderConfig" class="external-link" rel="nofollow">https://openid.net/specs/openid-connect-discovery-1.html#ProviderConfig</a>)</p><p><br/></p><p>From 1.5 and onward the well known configuration location may be used to populate the configuration simplifying the configuration greatly. See also the following screenshot utilizing the google well known endpoint for a minimal configuration example: </p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/99451177/165583064.png" data-image-src="attachments/99451177/165583064.png" data-unresolved-comment-count="0" data-linked-resource-id="165583064" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-1-21_1-26-36.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="99451177" data-linked-resource-container-version="24"></span></p><h3 id="OpenidConnectAuthenticationPlugin-Usingg-suite/google">Using g-suite / google</h3><pre>Obtain the client id and secret from the developer console: <a href="https://console.cloud.google.com/apis/credentials" class="external-link" rel="nofollow">https://console.cloud.google.com/apis/credentials</a> by creating Oauth client id.</pre><p>Use those to fill the respective fields in the configuration of Jenkins.</p><pre>Choose automatic configuration:</pre><pre>Well-known configuration: https://accounts.google.com/.well-known/openid-configuration</pre><p><br/></p><p>see also: <a href="https://developers.google.com/identity/protocols/OpenIDConnect" class="external-link" rel="nofollow">https://developers.google.com/identity/protocols/OpenIDConnect</a></p><h3 id="OpenidConnectAuthenticationPlugin-UsingthepluginwithAzureAD">Using the plugin with Azure AD</h3><p>See this blog post <a href="http://www.epiclabs.io/configure-jenkins-use-azure-ad-authentication-openid-connect/" class="external-link" rel="nofollow">http://www.epiclabs.io/configure-jenkins-use-azure-ad-authentication-openid-connect/</a></p><h2 id="OpenidConnectAuthenticationPlugin-InteractingwithJenkinsasanonfront-enduser">Interacting with Jenkins as a non front-end user</h2><p>TLDR: use an API token instead as described here: <a href="Authenticating-scripted-clients.html">Authenticating scripted clients</a></p><p>Using basic auth for authentication won't work. This is because jenkins has no knowledge of the password due to the way openid connect works: Indentifing a user is a three way interaction between the user, Jenkins and the openid provider.</p><p><br/></p><p>The plugin asks the configured openid provider to confirm the identity of the user is and does this in a way that both jenkins and the provider are 'talking' about the same user. The openid connect provider will likely challenge the user to prove it's identity and might do this by requesting a username and password but this is entirely up to the provider. This part is between the user and the openid connect provider, jenkins (using this plugin) delegates proving ones identity to the provider and will go with whatever conclusion the provider draws. This has the benefit that with openid connect the service your trying to access (in our case Jenkins) never sees a user password, so even if Jenkins is compromised an attacker can't intercept passwords or other secrets. Using basic auth would require one to send their password to Jenkins which would defeat this.</p><p><br/></p><p>Scripted clients can still interact with Jenkins even when the openid connect plugin is active: they will have to use an API token. <a href="Authenticating-scripted-clients.html">Authenticating scripted clients</a> describes how to obtain one. </p><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/99451177/165583064.png">image2019-1-21_1-26-36.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/99451177/165583182.jpg">OPENID_CONNECT_NEW-Logo.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:36</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
