<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Pipeline Supporting APIs Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Pipeline Supporting APIs Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (jglick)</span>, last modified by <span class='editor'> Unknown User (dnusbaum)</span> on Apr 25, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Pipeline: Supporting APIs <a href="https://plugins.jenkins.io/workflow-support" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2018-02-05/" class="external-link" rel="nofollow">Arbitrary code execution due to incomplete sandbox protection</a></li>
</ul>

</div></div>
Common utility implementations to build Pipeline PluginA component of <a href="Pipeline-Plugin.html">Pipeline Plugin</a>.</p><h2 id="PipelineSupportingAPIsPlugin-Changelog">Changelog</h2><h3 id="PipelineSupportingAPIsPlugin-3.3(2019Apr25)">3.3 (2019 Apr 25)</h3><ul><li>Developer: Add support for <code>FlowNode</code> to <code>DefaultStepContext.get(Class)</code> (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/94" class="external-link" rel="nofollow">PR 94</a>)</li><li>Internal: <span style="color: rgb(23,43,77);">Update parent POM and Javadoc so that the plugin can build with all tests passing on Java 11 (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/92" class="external-link" rel="nofollow">PR 92</a>)</span></li></ul><h3 id="PipelineSupportingAPIsPlugin-3.2(2019Feb01)">3.2 (2019 Feb 01)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-51170" class="external-link" rel="nofollow">JENKINS-51170</a>: Enable the <code>StepEnvironmentContributor</code> extension point added in version 2.19 of Pipeline Step API Plugin</li><li>Fix: Add custom JEP-200 class filter entry so that <code><span style="color: rgb(36,41,46);">org.jboss.marshalling.</span><span style="color: rgb(36,41,46);">TraceInformation$IndexInfo</span></code><span style="color: rgb(36,41,46);">, which may occur in some error messages related to saving and loading Pipeline builds, can</span><span style="color: rgb(36,41,46);"> be serialized and deserialized without any warnings being printed to build logs (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/90" class="external-link" rel="nofollow">PR 90</a>)</span></li><li><span style="color: rgb(36,41,46);">Internal: Use APIs from newer versions of Jenkins core to clean up some code paths (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/91" class="external-link" rel="nofollow">PR 91</a>)</span></li></ul><h3 id="PipelineSupportingAPIsPlugin-3.1(2019Jan16)">3.1 (2019 Jan 16)</h3><ul><li>Internal: Remove test scope dependency on obsolete <code>workflow-scm-step</code> tests artifact (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/88" class="external-link" rel="nofollow">PR 88</a>)</li><li>Internal: Simplify configuration for the compatibility warning shown when upgrading to the 3.x line of the plugin (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/89" class="external-link" rel="nofollow">PR 89</a>)</li></ul><h3 id="PipelineSupportingAPIsPlugin-3.0(2019Jan03)">3.0 (2019 Jan 03)</h3><div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This update involves incompatible changes to the serialized format of Pipeline builds. Any Pipelines that are running when Jenkins is restarted to apply this upgrade will fail after the restart. Pipelines will be able to resume normally after subsequent restarts.</p><p>To avoid this one-time issue, please stop all running Pipelines or allow them to complete before restarting Jenkins when applying this update.</p></div></div><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-52187" class="external-link" rel="nofollow">JENKINS-52187</a>: Update JBoss Marshalling dependency, which is used to serialize and deserialize Pipeline data across Jenkins restarts, in order to support newer versions of Java.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.24(2018Dec12)">2.24 (2018 Dec 12)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-26138" class="external-link" rel="nofollow">JENKINS-26138</a>: Add a sidebar link to Pipeline builds in the classic UI to show all workspaces used by the build.</li><li><a href="https://github.com/jenkinsci/workflow-support-plugin/pull/85" class="external-link" rel="nofollow">PR #85</a>: Fix the implementation of <code>c</code><span><code>urrentBuild.getBuildCauses(String fullyQualifiedClassName)</code> so that it works correctly when the class name refers to a class defined in a different plugin.</span></li></ul><h3 id="PipelineSupportingAPIsPlugin-2.23(2018Nov30)">2.23 (2018 Nov 30)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-54531" class="external-link" rel="nofollow">JENKINS-54531</a>: Update documentation for <code>currentBuild.getBuildVariables</code></li><li>Avoid use of deprecated APIs (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/76" class="external-link" rel="nofollow">PR 76</a>)</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.22(2018Nov02)">2.22 (2018 Nov 02)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-41272" class="external-link" rel="nofollow">JENKINS-41272</a>/<a href="https://issues.jenkins-ci.org/browse/JENKINS-54227" class="external-link" rel="nofollow">JENKINS-54227</a>: Safely expose build causes in Pipeline as JSON. Build causes can be accessed as follows:<ul><li><code>currentBuild.getBuildCauses()</code></li><li><code>currentBuild.getBuildCauses(String fullyQualifiedClassName)</code></li></ul></li></ul><h3 id="PipelineSupportingAPIsPlugin-2.21(2018Oct12)">2.21 (2018 Oct 12)</h3><ul><li><a href="https://jenkins.io/jep/210" class="external-link" rel="nofollow">JEP-210</a>: redesigned log storage system for Pipeline builds. Should have no effect unless <a href="https://wiki.jenkins.io/display/JENKINS/Pipeline+Job+Plugin" rel="nofollow">Pipeline Job Plugin</a> is also updated.</li><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-45693" class="external-link" rel="nofollow">JENKINS-45693</a>: support for <code>TaskListenerDecorator</code> API.</p></li><li><code>currentBuild</code> documentation updates.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.21-beta-1(2018Oct04)">2.21-beta-1 (2018 Oct 04)</h3><ul><li><a class="external-link" rel="nofollow" href="https://jenkins.io/jep/210">JEP-210</a>: redesigned log storage system for Pipeline builds. Should have no effect unless <a href="https://wiki.jenkins.io/display/JENKINS/Pipeline+Job+Plugin" rel="nofollow">Pipeline Job Plugin</a> is also updated.</li><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-45693" class="external-link" rel="nofollow">JENKINS-45693</a>: support for <code>TaskListenerDecorator</code> API.</p></li><li><code>currentBuild</code> documentation updates.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.20(Aug7,2018)-UsersareencouragedtocombinethiswithanupdatestotheandPipelineNodesandProcessesPlugin">2.20 (Aug 7, 2018) - Users are encouraged to combine this with an updates to the <a href="Pipeline-Job-Plugin.html">Pipeline Job Plugin</a> and <a href="https://wiki.jenkins.io/display/JENKINS/Pipeline+Nodes+and+Processes+Plugin" rel="nofollow">Pipeline Nodes and Processes Plugin</a></h3><ul><li><a href="https://github.com/jenkinsci/jep/blob/master/jep/206/README.adoc" class="external-link" rel="nofollow">JEP-206</a> Use UTF-8 for all Pipeline build logs</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.19(Jun25,2018)">2.19 (Jun 25, 2018)</h3><ul><li><a rel="nofollow" href="https://issues.jenkins-ci.org/browse/JENKINS-49014" class="external-link">JENKINS-49014</a> Exposes currentBuild.keepLog</li><li><a rel="nofollow" href="https://issues.jenkins-ci.org/browse/JENKINS-51390" class="external-link">JENKINS-51390</a> Use ProxyException when necessary for program.dat</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.18(Feb5,2018)">2.18 (Feb 5, 2018)</h3><ul><li><a href="https://jenkins.io/security/advisory/2018-02-05/" class="external-link" rel="nofollow">Fix security issue</a></li></ul><h3 id="PipelineSupportingAPIsPlugin-2.17(Jan22,2018)">2.17 (Jan 22, 2018)</h3><ul><li><strong>Major Feature</strong>: Add APIs for FlowNodeStorage to provide more granular control of when/how they write to disk  (<a href="https://issues.jenkins-ci.org/browse/JENKINS-47172">JENKINS-47172</a>)<br/><ul><li>Allows for deferred writes, where a FlowNode has all its actions attached before being written (cuts writes ~1/2 or more)</li><li>Provides facilities a bit like DB transactions</li></ul></li><li><strong>Major Feature</strong>: New and MUCH more efficient pipeline FlowNode storage  (<a href="https://issues.jenkins-ci.org/browse/JENKINS-47173">JENKINS-47173</a>)<ul><li>Stores all FlowNodes in a single file, allowing for much faster bulk streaming read/writes, and faster access.</li><li>Available with the performance-optimized durability setting - see Jenkins documentation for Pipeline Scalability for what you need to enable this.</li></ul></li><li><strong>Enhancement</strong>:  More compact representation of FlowNodes by using XStream Aliases (<a href="https://issues.jenkins-ci.org/browse/JENKINS-49084">JENKINS-49084</a>)<ul><li>Applies to all of the FlowNode storage engines, and reduces size-on-disk (and data written) by about 30%</li><li><strong>Compatibility note: after this change, builds with this plugin version CANNOT be read by older versions of this plugin</strong></li></ul></li><li>Feature: utility API to switch between atomic and non-atomic XStream serialization</li><li>Robustness enhancement: Timeout utility tries to repeatedly interrupt threads and notes that this is happening (<a href="https://github.com/jenkinsci/workflow-support-plugin/pull/48" class="external-link" rel="nofollow">PR#48</a>)</li><li>Feature: Sandboxed access to upstream build information (<a href="https://issues.jenkins-ci.org/browse/JENKINS-31576">JENKINS-31576</a>)</li><li>ClassFilter entries to ensure the XStream/Remoting whitelist doesn't break Pipeline</li><li>Bugfix: Fix a Groovy memory leak introduced previously with the Timeout utility: ensure that the timeout threadpool cannot be lazy-initialized with a GroovyClassloader as its contextClassloader</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.16(Oct13,2017)">2.16 (Oct 13, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-26148">JENKINS-26148</a> Create a default implementation of StepExecution.stop</li><li>Add a WithThreadName utility to give threads more meaningful names for debugging</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.15(Sep26,2017)">2.15 (Sep 26, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-26137">JENKINS-26137</a> Integrate patched version of JBoss Marshalling with better diagnostics </li><li><span style="color: rgb(5,38,76);"><a href="https://issues.jenkins-ci.org/browse/JENKINS-38223">JENKINS-38223</a> / <a href="https://issues.jenkins-ci.org/browse/JENKINS-45553">JENKINS-45553 </a>Massively improve performance of pipeline with numerous parallel branches by using the new isActive API from workflow-api 2.22.</span></li><li><span style="color: rgb(5,38,76);"><span style="color: rgb(5,38,76);"><a href="https://issues.jenkins-ci.org/browse/JENKINS-37324">JENKINS-37324</a> followup: Add an arguments column to the FlowGraphTable display</span></span></li><li><span style="color: rgb(5,38,76);"><span style="color: rgb(5,38,76);"><span style="color: rgb(5,38,76);"><a href="https://issues.jenkins-ci.org/browse/JENKINS-36528">JENKINS-36528</a> Fix Environment Variables Handling: Include AbstractBuild Env vars in build variables</span></span></span></li><li><span style="color: rgb(5,38,76);"><span style="color: rgb(5,38,76);"><span style="color: rgb(5,38,76);">Optimization: eliminate need for reflection when calling getChangeSets - <a href="https://github.com/jenkinsci/workflow-support-plugin/pull/41" class="external-link" rel="nofollow">https://github.com/jenkinsci/workflow-support-plugin/pull/41</a></span></span></span></li></ul><h3 id="PipelineSupportingAPIsPlugin-2.14(Mar31,2017)">2.14 (Mar 31, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-42952">JENKINS-42952</a> Make <code>currentBuild.duration</code> work.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-42521">JENKINS-42521</a> Added a <code>currentResult</code> property and <code>resultIsBetterOrEqualTo</code> / <code>resultIsWorseOrEqualTo</code> methods to <code>currentBuild</code> and the return value of <code>build</code>.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40934">JENKINS-40934</a> Speedup of log-related code run when adding a new step when using a massive number of <code>parallel</code> branches.</li><li>Robustness fix noted in <a href="https://issues.jenkins-ci.org/browse/JENKINS-26137">JENKINS-26137</a>.</li><li>Robustness fix associated with <a href="https://issues.jenkins-ci.org/browse/JENKINS-42556">JENKINS-42556</a>: tolerate errors encountered when printing progress of build resumption tasks.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.13(Feb13,2017)">2.13 (Feb 13, 2017)</h3><p>No user-visible changes.</p><ul><li><code>Timeout</code> utility to implement <a href="https://issues.jenkins-ci.org/browse/JENKINS-32986">JENKINS-32986</a>.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.12(Jan10,2017)">2.12 (Jan 10, 2017)</h3><p>Should be no user-visible changes.</p><ul><li>Test utility used to verify <a href="https://issues.jenkins-ci.org/browse/JENKINS-40909">JENKINS-40909</a>.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.11(Nov11,2016)">2.11 (Nov 11, 2016)</h3><ul><li>Optimization: don't throw away the Actions attached to a FlowNode when loaded from disk (avoids double-loading)</li><li>Small things:<ul><li>Remove SemaphoreListener (dead code from testing)</li></ul></li></ul><h3 id="PipelineSupportingAPIsPlugin-2.10(Oct20,2016)">2.10 (Oct 20, 2016)</h3><ul><li>Regression in log handling with certain steps inside <code>parallel</code> in 2.9.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.9(Oct19,2016)">2.9 (Oct 19, 2016)</h3><ul><li>Allow block-scoped steps to provide log output in addition to their what their bodies contribute (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34637">JENKINS-34637</a> related)</li><li>Make PauseAction implement PersistentAction so it consumes the API optimizations from <a href="https://issues.jenkins-ci.org/browse/JENKINS-38867">JENKINS-38867</a></li><li>Small things:<ul><li>Generics fix for JDK 9 support</li><li>Add a getStatus method to Semaphore step (used in testing)</li></ul></li></ul><div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Do not use, there is a known regression which will be fixed shortly in 2.10.</p></div></div><h3 id="PipelineSupportingAPIsPlugin-2.8(Sep26,2016)">2.8 (Sep 26, 2016)</h3><ul><li>Restore use of the DepthFirstScanner API that was reverted in <a href="https://issues.jenkins-ci.org/browse/JENKINS-38457">JENKINS-38457</a> now that its handling of parallels matches FlowGraphWalker</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.6(Sep23,2016)">2.6 (Sep 23, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38457">JENKINS-38457</a> Show parallel branches in correct order (broken since 2.3).</li><li>Infrastructure for <a href="https://issues.jenkins-ci.org/browse/JENKINS-38114">JENKINS-38114</a>.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.5(Sep16,2016)">2.5 (Sep 16, 2016)</h3><ul><li>Clean up display of timing information in pipeline steps for a few edge cases (no start time on node, times under 1 ms)</li><li>Remove some obsolete approveSignature calls</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.4(Sep09,2016)">2.4 (Sep 09, 2016)</h3><ul><li>Added timing information to pipeline steps step display (show how long a step or block ran for)</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.3(Sep09,2016)">2.3 (Sep 09, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37366">JENKINS-37366</a> Added properties <code>fullDisplayName</code>, <code>projectName</code>, and <code>fullProjectName</code> to <code>currentBuild</code> or return value of <code>build</code> step.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.2(Jul11,2016)">2.2 (Jul 11, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-30412">JENKINS-30412</a> Sandbox-friendly <code>changeSets</code> property for <code>currentBuild</code> or return value of <code>build</code> step.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-36306">JENKINS-36306</a> <code>duration</code> property for return value of <code>build</code> step.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.1(Jun16,2016)">2.1 (Jun 16, 2016)</h3><ul><li>Infrastructure for <a href="https://issues.jenkins-ci.org/browse/JENKINS-26130">JENKINS-26130</a>.</li><li>Fixed title of log pages from <em>Pipeline Steps</em>.</li></ul><h3 id="PipelineSupportingAPIsPlugin-2.0(Apr05,2016)">2.0 (Apr 05, 2016)</h3><ul><li>First release under per-plugin versioning scheme. See <a href="https://github.com/jenkinsci/workflow-plugin/blob/82e7defa37c05c5f004f1ba01c93df61ea7868a5/CHANGES.md" class="external-link" rel="nofollow">1.x changelog</a> for earlier releases.</li><li>Various code moved out of this plugin into <a href="Pipeline-Nodes-and-Processes-Plugin.html">Pipeline Nodes and Processes Plugin</a>, <a href="Pipeline-Basic-Steps-Plugin.html">Pipeline Basic Steps Plugin</a>, <a href="Pipeline-Input-Step-Plugin.html">Pipeline Input Step Plugin</a>, <a href="Pipeline-Build-Step-Plugin.html">Pipeline Build Step Plugin</a>, and <a href="Pipeline-Stage-Step-Plugin.html">Pipeline Stage Step Plugin</a>. You <strong>must update</strong> those plugins to 2.x if updating this plugin to 2.x.</li></ul>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:38</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
