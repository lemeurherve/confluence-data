<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : JNA is already loaded</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Use-Jenkins.html">Use Jenkins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : JNA is already loaded
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (kohsuke)</span>, last modified by <span class='editor'> Unknown User (mindless)</span> on Feb 03, 2011
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>If you see an error during the start up that says &quot;another instance of JNA is already loaded in another classloader&quot;, this is what's going on.</p>

<h1 id="JNAisalreadyloaded-Cause">Cause</h1>
<p>Hudson depends on <a href="https://jna.dev.java.net/" class="external-link" rel="nofollow">JNA</a> for interfacing with native code. A part of JNA is written in <a href="http://en.wikipedia.org/wiki/Java_Native_Interface" class="external-link" rel="nofollow">JNI</a>. While multiple Java classes of the same name can be loaded into the same JVM by using different classloaders (in fact that's what most servlet containers do to isolate each webapp), this doesn't hold for JNI â€” you can only load one copy to one JVM.</p>

<p>Because of this, if your servlet container has other applications that use JNA, Hudson will not be able to load it, and fail to start with this error.</p>

<h1 id="JNAisalreadyloaded-Solution">Solution</h1>
<ul>
	<li>It's possible for this to happen when you redeploy Hudson without terminating a servlet container, if the JNA loaded by the old classloader doesn't get garbage-collected in time for the new one to start. If you suspect this to be the case, simply restart your servlet container and see if that eliminates the problem.</li>
</ul>


<ul>
	<li>If you are trying to have Hudson co-exist with other apps that use JNA in a single container (this includes deploying multiple copies of Hudson on different paths), you can put jna.jar into the container's shared library directory, so that all the webapps will see the same copy.</li>
</ul>


<ul>
	<li>Another approach is to run each webapp in its own JVM, then use Apache to aggregate them all under a single HTTP server. See <a href="Running-Jenkins-behind-Apache.html">Running Jenkins behind Apache</a> for more details.</li>
</ul>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:08</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
