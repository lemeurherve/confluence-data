<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Compuware ISPW Operations Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Compuware ISPW Operations Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (zhouqr2000)</span>, last modified on Apr 08, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Compuware ISPW Operations <a href="https://plugins.jenkins.io/compuware-ispw-operations" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
</p><h3 id="CompuwareISPWOperationsPlugin-Overview"><span style="color: rgb(51,102,255);">Overview</span></h3><p>The Compuware ISPW Operations plugin allows Jenkins users to execute ISPW operations, such as Generate, Promote, Deploy or Regress on the mainframe. Users can seamlessly integrate ISPW build process with Jenkins. </p><h3 id="CompuwareISPWOperationsPlugin-Prerequisites"><span style="color: rgb(51,102,255);">Prerequisites</span></h3><p>The following are required to use this plugin:</p><ul><li>Jenkins</li><li>Jenkins Credentials plugin</li><li>Jenkins Plain Credentials plugin</li><li>Compuware Common Configuration plugin - latest</li><li>Compuware mainframe ISPW</li><li>Compuware CES</li></ul><h3 id="CompuwareISPWOperationsPlugin-InstallinginaJenkinsInstance"><span style="color: rgb(51,102,255);">Installing in a Jenkins Instance</span></h3><ul><li>Install the Compuware ISPW Operations plugin according to the Jenkins instructions for installing plugins.  Dependent plugins will automatically be installed.</li></ul><p><br/></p><h3 id="CompuwareISPWOperationsPlugin-ConfiguringHostConnectionsandCESTokens"><span style="color: rgb(51,102,255);">Configuring Host Connections and CES Tokens</span></h3><ul><li class="p-step"><p class="step">If no host connection appears in the <strong>Host Connections</strong> section, click <strong>Add Host Connection </strong>and add a host connection by entering the following information:</p><ul><li class="p-indent-bullet-cond"><p class="indent-bullet-cond">In the <strong>Description </strong>field, enter a description of the connection.</p></li><li class="p-indent-bullet-cond"><p class="indent-bullet-cond">In the <strong>Host:port </strong>field, enter the z/OS host to connect to.</p></li><li class="p-indent-bullet-cond"><p class="indent-bullet-cond">From the <strong>Code page</strong> list, select the desired code page to be used for this connection. The code page is used to translate data sent to and from the host. The default is 1047.</p></li><li class="p-indent-bullet-cond"><p class="indent-bullet-cond">In the <strong>Read/write timeout (minutes)</strong> field, enter the number of minutes for the plugin to wait for a response from the host before timing out.</p></li><li>In the <strong>CES URL</strong> field, enter the CES server URL. The default is empty. It is not required for other Compuware plugins but is required to use this plugin. Please do NOT attach any context path, it should be in the format: <a href="http://hostport" class="external-link" rel="nofollow">http://host:port</a>.</li></ul><p><strong>Note:</strong> Click <strong>Delete Host Connection</strong> to delete an existing connection.</p></li><li>If you intend to use web hook callback<ul><li>Jenkins URL in section Jenkins Location must be defined with the Jenkins server IP address (not localhost or 127.0.0.1)</li><li>If you do NOT want the CES callback to provide Jenkins crumb, you need to go to Manage Jenkins | Configure Global Security page, then turn off 'Prevent Cross Request Forgery exploits' in CSRF Protection section. Otherwise, you have to acquire the Jenkins crumb from CES server host and provide the Jenkins crumb as property <strong>events.httpHeaders=Jenkins-Crumb:{Jenkins crumb}</strong> in the <strong>Request</strong> body in the job. To acquire a Jenkins crumb, please reference - <a class="external-link" href="https://wiki.jenkins.io/display/JENKINS/Remote+access+API" rel="nofollow">https://wiki.jenkins.io/display/JENKINS/Remote+access+API</a></li></ul></li><li>If no CES token appears in the CES secret token section, <ul><li>Click Credentials | System | Global credentials | Add Credentials, select Kind to 'Secret text'</li><li>Provide the CES token as Secret</li><li>Leave ID as blank (it will generated by Jenkins)</li><li>Give a a meaningful description, then Add</li></ul></li></ul><p><br/></p><h3 id="CompuwareISPWOperationsPlugin-ExecutingISPWOperations"><span style="color: rgb(51,102,255);">Executing ISPW Operations</span></h3><ul><li class="p-step"><p class="step">On the <strong>Configuration</strong> page of the job or project, select <strong>Execute a Compuware ISPW Operation</strong> from the <strong>Build</strong> section.</p></li><li class="p-step"><p class="step">From the <strong>Host connection</strong> list, select the host connection to be used to connect to CES host. Alternatively, to add a connection, click <strong>Manage connections</strong>. The <strong>Host connections</strong> section of the Jenkins configuration page appears so a connection can be added.</p></li><li>In the <strong>CES secret token</strong> list, select the CES token configured in the CES host for the ISPW. Alternatively, click <strong>Add</strong> to add secret text as token using the Plain Credentials plugin. Refer to the Jenkins documentation for the Plain Credentials plugin.</li><li>In the <strong>Action</strong> section to define what ISPW operation to perform</li></ul><ul><li style="list-style-type: none;background-image: none;"><ul><li>AddTask</li><li>CancelAssignment</li><li>CancelDeployment</li><li>CancelRelease</li><li>CloseAssignment</li><li>CloseRelease</li><li>CreateAssignment</li><li>CreateRelease</li><li>DeployAssignment</li><li>DeployRelease</li><li>FallbackAssignment</li><li>FallbackRelease</li><li>GenerateTasksInAssignment</li><li>GenerateTasksInRelease</li><li>GetAssignmentInfo</li><li>GetAssignmentTaskList</li><li>GetContainerList</li><li>GetReleaseInfo</li><li>GetReleaseTaskGenerateListing</li><li>GetReleaseTaskInfo</li><li>GetReleaseTaskList</li><li>GetSetInfo</li><li>GetSetTaskList</li><li>GetWorkList</li><li>PromoteAssignment</li><li>PromoteRelease</li><li>RegressAssignment</li><li>RegressRelease</li><li>RemoveFromRelease</li><li>SetOperation</li><li>TransferTask</li></ul></li></ul><ul><li>In the <strong>Request</strong> section, please specify additional request parameters, click the question mark for more details. Each of the action may have different set of properties, if the job support web hook callback, additional event related properties must be provided. The web hook callback only works for pipeline build.</li></ul><h3 class="step" id="CompuwareISPWOperationsPlugin-UsingPipelineSyntaxtoGeneratePipelineScript"><span style="color: rgb(51,102,255);">Using Pipeline Syntax to Generate Pipeline Script</span></h3><ol><li class="p-step"><p class="step">Do one of the following:</p><ul><li class="p-indent-bullet-cond"><p class="indent-bullet-cond">When working with an existing Pipeline job, click the <strong>Pipeline Syntax</strong> link in the left panel. The <strong>Snippet Generator</strong> appears.</p></li><li class="p-indent-bullet-cond"><p class="indent-bullet-cond">When configuring a Pipeline job, click the <strong>Pipeline Syntax</strong> link at the bottom of the <strong>Pipeline</strong> configuration section. The <strong>Snippet Generator</strong> appears.</p></li></ul></li><li class="p-step"><p class="step">From the <strong>Sample Step</strong> list, select <strong>ispwOperation: Perform a Compuware ISPW Rest API request and return a JSON object</strong>.</p></li><li class="p-step"><p class="step">From the <strong>Host connection</strong> list, select the host connection that contains a valid CES URL.</p></li><li class="p-step"><p class="step">From the <strong>CES secret token</strong>, select the corresponding CES token for the CES server.</p></li><li>From the <strong>Action</strong>, select the ISPW operation to be performed.</li><li>From the <strong>Request</strong> body, enter the corresponding properties for the specific action, click question mark help for more detail for each action</li><li class="p-step"><p class="step">Click <strong>Generate Pipeline Script</strong>. The Groovy script to invoke the Compuware ISPW Operations plugin appears. The script can be added to the Pipeline section when configuring a Pipeline job. A sample script is shown below:</p><div><div class="syntaxhighlighter sh-confluence nogutter  groovy"><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><p>ispwOperation connectionId: 'e0fbb6eb-b01d-4d55-b18b-2f321c174474', credentialsId: 'f1d2762b-9a40-46ad-a9df-b982147acc85', ispwAction: 'GenerateTasksInAssignment', ispwRequestBody: '''assignmentId=PLAY000313<br/>level=DEV2<br/>runtimeConfiguration=TPZP'''</p></div></div></td></tr></tbody></table></div><p>For web hook callback, a sample script is shown below</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><p>hook = ispwRegisterWebhook()<br/>echo &quot;...creating ISPW Jenkins web hook - ${hook.getURL()}&quot;</p><p>ispwOperation connectionId: 'e0fbb6eb-b01d-4d55-b18b-2f321c174474', credentialsId: 'f1d2762b-9a40-46ad-a9df-b982147acc85', ispwAction: 'GenerateTasksInAssignment', ispwRequestBody: '''assignmentId=PLAY000313<br/>level=DEV2<br/>runtimeConfiguration=TPZP<br/><a href="http://events.name/" rel="nofollow" class="external-link">events.name</a>=Completed<br/>events.body=Generated<br/>events.httpHeaders=Jenkins-Crumb:no-crumb<br/>events.credentials=admin:library'''</p><p>echo &quot;...waiting ISPW Jenkins web hook callback - ${hook.getURL()}&quot;</p><p>data = ispwWaitForWebhook hook<br/>echo &quot;...CES called back with message: ${data}&quot;</p></div></div></td></tr></tbody></table></div><p><br/></p></div></div><p><strong><span style="color: rgb(0,0,0);">Note:</span></strong><span style="color: rgb(0,0,0);"> If the </span><strong><span style="color: rgb(0,0,0);">Response body in</span></strong><span style="color: rgb(0,0,0);"> <strong>console </strong>checked, debug message will be printed on Jenkins log</span><span style="color: rgb(0,0,0);">.</span><span style="color: rgb(0,73,135);"> </span></p></li></ol><h3 class="step" id="CompuwareISPWOperationsPlugin-PipelineBuildRequirement"><span style="color: rgb(51,102,255);">Pipeline Build Requirement</span></h3><p><span style="color: rgb(0,0,0);">In order to use pipeline build, your ISPW, CMSC and CES have to be configured properly in order to receive web hook notification. See explanation in the following figure.</span></p><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/138446036/138446104.png" data-image-src="attachments/138446036/138446104.png" data-unresolved-comment-count="0" data-linked-resource-id="138446104" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ispwPipelineOpRequirement.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="138446036" data-linked-resource-container-version="11"></span><br/></span></p><h1 id="CompuwareISPWOperationsPlugin-ProductAssistance"><span style="color: rgb(51,102,255);">Product Assistance</span></h1><p><span style="color: rgb(0,0,0);">Compuware provides assistance for customers with its documentation, the FrontLine support web site, and telephone customer support.</span></p><h2 id="CompuwareISPWOperationsPlugin-FrontLineSupportWebSite"><span style="color: rgb(0,0,0);">FrontLine Support Web Site</span></h2><p>You can access online information for Compuware products via our FrontLine support site at <a rel="nofollow" class="external-link" href="https://go.compuware.com/">https://go.compuware.com</a>. FrontLine provides access to critical information about your Compuware products. You can review frequently asked questions, read or download documentation, access product fixes, or e-mail your questions or comments. The first time you access FrontLine, you must register and obtain a password. Registration is free.</p><p>Compuware also offers User Communities, online forums to collaborate, network, and exchange best practices with other Compuware solution users worldwide. Go to <a class="external-link" href="http://groups.compuware.com/" rel="nofollow">http://groups.compuware.com/</a> to join.</p><h2 id="CompuwareISPWOperationsPlugin-ContactingCustomerSupport"><span style="color: rgb(0,0,0);">Contacting Customer Support</span></h2><p><span style="color: rgb(0,0,0);">At Compuware, we strive to make our products and documentation the best in the industry. Feedback from our customers helps us maintain our quality standards. If you need support services, please obtain the following information before calling Compuware's 24-hour telephone support:</span></p><ul><li><p class="bullet">The name, release number, and build number of your product. This information is displayed in the About dialog box.</p></li><li><p class="bullet">Installation information including installed options, whether the product uses local or network databases, whether it is installed in the default directories, whether it is a standalone or network installation, and whether it is a client or server installation.</p></li><li><p class="bullet">Environment information, such as the operating system and release on which the product is installed, memory, hardware and network specification, and the names and releases of other applications that were running when the problem occurred.</p></li><li><p class="bullet">The location of the problem within the running application and the user actions taken before the problem occurred.</p></li><li><p class="bullet">The exact application, licensing, or operating system error messages, if any.</p></li></ul><p>You can contact Compuware in one of the following ways:</p><h3 id="CompuwareISPWOperationsPlugin-Phone"><span style="color: rgb(51,102,255);">Phone</span></h3><ul><li>USA and Canada: 1-800-538-7822 or 1-313-227-5444.</li><li>All other countries: Contact your local Compuware office. Contact information is available at <a class="external-link" rel="nofollow" href="https://go.compuware.com/">https://go.compuware.com</a>.</li></ul><h3 id="CompuwareISPWOperationsPlugin-Web"><span style="color: rgb(51,102,255);">Web</span></h3><p>You can report issues via FrontLine.</p><p><strong>Note:</strong> Please report all high-priority issues by phone.</p><h2 id="CompuwareISPWOperationsPlugin-CorporateWebSite"><span style="color: rgb(0,0,0);">Corporate Web Site</span></h2><p>To access Compuware's site on the Web, go to <a href="https://www.compuware.com/" class="external-link" rel="nofollow">https://www.compuware.com</a>. The Compuware site provides a variety of product and support information.</p><h1 id="CompuwareISPWOperationsPlugin-ChangeLog"><span style="color: rgb(51,102,255);">Change Log</span></h1><h3 id="CompuwareISPWOperationsPlugin-Version1.0.4"><span style="color: rgb(0,0,0);">Version 1.0.4</span></h3><ul><li><span style="color: rgb(0,0,0);">Add support for extra 10+ actions. See action list above.</span></li><li><span style="color: rgb(0,0,0);">Skip polling for the set completion if no web hook defined</span></li></ul><h3 id="CompuwareISPWOperationsPlugin-Version1.0.3"><span style="color: rgb(0,0,0);">Version 1.0.3</span></h3><ul><li><span style="color: rgb(0,0,0);">Add support for retrieving the list of tasks for a given ISPW Set.</span></li><li><span style="color: rgb(0,0,0);">Changes to the logging to be more consistent with other plugins logging.</span></li><li><span style="color: rgb(0,0,0);">Fix bad error message when selected host connection doesn't have a valid CES URL.</span></li><li><span style="color: rgb(0,0,0);">Fix a bug in GetReleaseTaskList.</span></li><li><span style="color: rgb(0,0,0);">Pre-populate help text in request field.</span></li></ul><h3 id="CompuwareISPWOperationsPlugin-Version1.0.2"><span style="color: rgb(0,0,0);">Version 1.0.2</span></h3><ul><li><span style="color: rgb(0,0,0);">The plugin now integrates with the <a rel="nofollow" href="https://plugins.jenkins.io/compuware-common-configuration" class="external-link">Compuware Common Configuration</a> plugin which allows the Host Connection configurations to be defined centrally for other Compuware Jenkins plugins instead of needing to be specified in each Jenkins project's configuration.  Host Connection configuration is now defined in the Jenkins/Manage Jenkins/Configure System screen. </span></li><li><span style="color: rgb(0,0,0);">Jenkins console logs produced by the plugin have been streamlined to improve readability.</span></li><li><span style="color: rgb(0,0,0);">Support for the Jenkins Pipeline Syntax.</span></li><li><span style="color: rgb(0,0,0);">Support Credentials secret text to store CES token.</span></li><li><span style="color: rgb(0,0,0);">Support most ISPW build operations.</span></li><li><span style="color: rgb(0,0,0);">Provide Docker script to build Docker image for CES server and Docker image for Jenkins with Compuware plugins pre-installed.</span></li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/138446036/138446104.png">ispwPipelineOpRequirement.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:18</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
