<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Pipeline Stage View Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Pipeline Stage View Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (danielbeck)</span>, last modified by <span class='editor'> Unknown User (olamy)</span> on Aug 06, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Pipeline: Stage View <a href="https://plugins.jenkins.io/pipeline-stage-view" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>



<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>This plugin is up for adoption.</strong> Want to help improve this plugin? <a href="/display/JENKINS/Adopt+a+Plugin" title="Adopt a Plugin">Click here to learn more</a>!</p></div></div><h1 id="PipelineStageViewPlugin-StageView:">Stage View: </h1><h2 id="PipelineStageViewPlugin-"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="500" src="attachments/102662163/102793222.png" data-image-src="attachments/102662163/102793222.png" data-unresolved-comment-count="0" data-linked-resource-id="102793222" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="who-broke-it.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="102662163" data-linked-resource-container-version="18"></span></h2><h2 id="PipelineStageViewPlugin-.1"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="500" src="attachments/102662163/102793221.png" data-image-src="attachments/102662163/102793221.png" data-unresolved-comment-count="0" data-linked-resource-id="102793221" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="green-and-mean.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="102662163" data-linked-resource-container-version="18"></span></h2><p>When you have complex builds Pipelines, it is useful to be able to see the progress of each stage.  The Pipeline Stage View plugin includes an extended visualization of Pipeline build history on the index page of a flow project, under <em>Stage View</em>. (You can also click on <em>Full Stage View</em> to get a full-screen view.)</p><p>To take advantage of this view, you need to define stages in your flow. You can have as many stages as you like, in a linear sequence. (They may be inside other steps such as 'node' if that is convenient.) Give each a short name that will appear in the GUI.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">node {
  stage (&#39;Checkout&#39;) {
  	svn &#39;https://svn.mycorp/trunk/&#39;
  	stage &#39;Build&#39;
	sh &#39;make all&#39;
	stage &#39;Test&#39;
  	sh &#39;make test&#39;
  }
}
</pre>
</div></div><p>When you run some builds, the stage view will appear with <em>Checkout</em>, <em>Build</em>, and <em>Test</em> columns, and one row per build. When hovering over a stage cell you can click the <em>Logs</em> button to see log messages printed in that stage: after the preceding stage step and before the next one.</p><p>Other important events are also indicated with special buttons, either in a stage cell or for the build as a whole. If a build is waiting in an input step, you will be able to tell it to proceed (or not). <em>Download</em> can be used to obtain any artifacts archived by a build. </p><p>Each row also records the build number, date it was started, and any changelog entries from a version control system. Progress bars also indicate how long each stage is taking and how long it might still be expected to take, based on historical averages.</p><h1 id="PipelineStageViewPlugin-UsageNotes/Limits:">Usage Notes/Limits:</h1><ul><li><p>Block-scoped stages (stages that take a closure, see below) may occur in parallels but are not displayed in parallel.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">stage(&#39;name&#39;){ echo &#39;steps here&#39; }</pre>
</div></div></li></ul><ul><li><strong>Dynamic stages</strong>: in general, if you want to visualize dynamically changing stages, make it conditional to execute the stage contents, not conditional to <strong>include</strong> the stage** Stage view can handle a limited subset of cases where you're appending additional stages, but the cell-based view is not matched to changing stage structures </li><li>Configurable limits are provided for the REST API that drives stage view -- these may be overridden though (see below).</li><li>The pipeline stage view uses caching internally for performance: even if the first viewing is slow, following ones should be quite fast</li></ul><h1 id="PipelineStageViewPlugin-ConfigurableProperties:">Configurable Properties:</h1><ul><li>At runtime or startup, you may turn off Jenkins user lookup for changesets with property  com.cloudbees.workflow.rest.external.ChangeSetExt.resolveCommitAuthors</li></ul><ul><li style="list-style-type: none;"><ul><li>This is a workaround for rare cases where you are relying on an external security realm for user information and have performance issues with many calls:</li><li>In the script console this setting may be changed at runtime (with immediate impact):</li></ul></li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">System.setProperty(&quot;com.cloudbees.workflow.rest.external.ChangeSetExt.resolveCommitAuthors&quot;,&quot;false&quot;);
</pre>
</div></div><ul><li style="list-style-type: none;"><ul><li>To turn user lookup back on: </li></ul></li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">System.setProperty(&quot;com.cloudbees.workflow.rest.external.ChangeSetExt.resolveCommitAuthors&quot;,&quot;true&quot;);
</pre>
</div></div><ul><li>Hardcoded API limits that may be overridden by setting the properties at startup (requires restarting Jenkins to see the change):<ul><li>Characters in each step's log entry (default: 10240 or 10kB) - com.cloudbees.workflow.rest.external.FlowNodeLogExt.maxReturnChars</li><li>Runs displayed per job (default: 10) - com.cloudbees.workflow.rest.external.JobExt.maxRunsPerJob</li><li>Artifacts shown per run (default: 100) - com.cloudbees.workflow.rest.external.RunExt.maxArtifactsCount</li><li>Steps displayed per stage (default: 100) - com.cloudbees.workflow.rest.external.StageNodeExt.maxChildNodes - note: this may have a very large performance impact with complex builds.</li></ul></li></ul><h1 id="PipelineStageViewPlugin-Changelog:">Changelog:</h1><h4 id="PipelineStageViewPlugin-2.12(August6,2019)">2.12 (August 6, 2019)</h4><ul style="list-style-type: square;"><li>Fix Internet Explorer 11 compatibly <a href="https://issues.jenkins-ci.org/browse/JENKINS-58808" class="external-link" rel="nofollow">JENKINS-58808</a></li></ul><h4 id="PipelineStageViewPlugin-2.11(April19,2019)">2.11 (April 19, 2019)</h4><ul><li>Avoid generating <span style="color: rgb(5,38,76);">NaNy NaNd (in case of Nan)</span></li><li><span style="color: rgb(5,38,76);">Add chinese translation</span></li><li><span style="color: rgb(5,38,76);">Fix overlap when used with Test Result Trend<br/></span></li><li><span style="color: rgb(5,38,76);">Link to full node log from the window</span><span style="color: rgb(5,38,76);"><span style="color: rgb(5,38,76);"><br/></span></span></li><li><span style="color: rgb(5,38,76);">Improve usability of the download artefacts popup</span></li></ul><h4 id="PipelineStageViewPlugin-2.10(Mar30,2018)">2.10 (Mar 30, 2018)</h4><ul><li>Fix a small bug with URL generation that could result in invalid URL generation in rare cases with customized Jenkins hostnames</li></ul><h4 id="PipelineStageViewPlugin-2.9(Aug29,2017)">2.9 (Aug 29, 2017)</h4><ul><li>Fix a timing bug for run durations - <a href="https://issues.jenkins-ci.org/browse/JENKINS-40162">JENKINS-40162</a></li><li>Fix Jackson 2 dependencies by switching to use the Jenkins plugin rather than the library <a href="https://issues.jenkins-ci.org/browse/JENKINS-46526">JENKINS-46526</a></li><li>Fix an issue with Stage View caching where job renames generated bad links - <a href="https://issues.jenkins-ci.org/browse/JENKINS-38159">JENKINS-38159</a></li></ul><h4 id="PipelineStageViewPlugin-2.8(May25,2017)">2.8 (May 25, 2017)</h4><ul><li><strong>Major feature</strong>: Display arguments used in running steps in the logs view - <a href="https://issues.jenkins-ci.org/browse/JENKINS-37324">JENKINS-37324</a></li><li>Fix handling of BooleanParameter default to false - <a href="https://issues.jenkins-ci.org/browse/JENKINS-36543">JENKINS-36543</a></li></ul><h4 id="PipelineStageViewPlugin-2.6(Mar6,2017)">2.6 (Mar 6, 2017)</h4><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38536">JENKINS-38536</a> Fix timing of incomplete parallels</li></ul><h4 id="PipelineStageViewPlugin-2.5(Feb13,2017)">2.5 (Feb 13, 2017)</h4><ul><li>Fix a minor CSS layout issue with stage view interfering with test results trends graphs</li></ul><h4 id="PipelineStageViewPlugin-2.4(Nov29,2016)">2.4 (Nov 29, 2016)</h4><ul><li>Fix: Regression introduced in 2.3 which resulting in requesting all runs for a job, even if most were cached <a href="https://issues.jenkins-ci.org/browse/JENKINS-40087">JENKINS-40087</a></li></ul><h4 id="PipelineStageViewPlugin-2.3(Nov22,2016)">2.3 (Nov 22, 2016)</h4><ul><li>Fix: Stage View showed multiple rows if displayName changed for a run (community PR, thank you!) - <a href="https://issues.jenkins-ci.org/browse/JENKINS-34538">JENKINS-34538</a></li></ul><h4 id="PipelineStageViewPlugin-2.2(Nov2,2016)">2.2 (Nov 2, 2016)</h4><ul><li>CSS Fix: excess whitespace on sides of stages table with very high resolution monitors</li></ul><h4 id="PipelineStageViewPlugin-2.1(Sept30,2016)">2.1 (Sept 30, 2016)</h4><ul><li>Fix: Prevent errors in deeply nested blocks from overflowing the stage status window (<a href="https://issues.jenkins-ci.org/browse/JENKINS-37945" class="external-link" rel="nofollow">JENKINS-37945</a>)<ul><li>Also filters out block start/end steps from that and log display (reverts to 1.7 behavior)</li></ul></li><li>Fix: hide NotExecuted steps from log display (user is resuming from checkpoint, these steps never ran on this run)</li><li>CSS Fix: prevent excessively long error messages from overflowing stage status popup</li><li>Feature: display timing information for steps in log view</li><li>Don't show log-expand icons if there is no log message for a step (<a href="https://issues.jenkins-ci.org/browse/JENKINS-31833" class="external-link" rel="nofollow">JENKINS-31833</a>)</li></ul><h4 id="PipelineStageViewPlugin-2.0(Aug30,2016)">2.0 (Aug 30, 2016)</h4><ul><li>Feature: support visualization of block-scoped stages (labelled blocks) (<a href="https://issues.jenkins-ci.org/browse/JENKINS-26107" class="external-link" rel="nofollow">JENKINS-26107</a>)</li><li><strong>Major feature</strong>: complete rewrite of the flow analysis algorithms (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34038" class="external-link" rel="nofollow">JENKINS-34038</a>)<ul><li>Needed to support block-scoped stage, and originally intended to allow for visualizing parallels</li><li>Scalability: simpler and more efficient APIs allow for analyzing flows in a logical one-pass fashion.</li><li>Performance: allows for far greater performance.  Currently roughly at parity with 1.7, but once <a href="https://issues.jenkins-ci.org/browse/JENKINS-37569" class="external-link" rel="nofollow">JENKINS-37569</a> is done, should be *much* faster.</li><li>Optimization: includes one final round of caching improvements.  We can now serve requests about individual stages/nodes from the cache, and caches use less memory.</li></ul></li></ul><h4 id="PipelineStageViewPlugin-1.7(Aug6,2016)">1.7 (Aug 6, 2016)</h4><ul><li>Performance/bugfix: massively improve serverside run/stage caching, by greatly limiting excess cache invalidation<ul><li>Cache no longer fully invalidates on renaming a pipeline job: instead the old cache entries are removed and new ones created with the new job name</li><li>Bugfix: Need to invalidate run cache results when their job is deleted (<a href="https://issues.jenkins-ci.org/browse/JENKINS-36865" class="external-link" rel="nofollow">JENKINS-36865</a>)</li><li>Known issue: run cache can no longer serve requests for data about individual stages/nodes. <ul><li>Mitigation: UI switches to use API below, so it just gets this data with the run request</li></ul></li></ul></li></ul><ul><li>Performance:  Fetch full stage data when requesting runs, and doesn't issue separate requests for individual stages (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34036" class="external-link" rel="nofollow">JENKINS-34036</a>)<ul><li>API extension to allow getting full stage data for requested runs (or just the stage minimal data without child nodes)</li><li>Front-end (browser) uses this API now</li><li>It will still issue requests for in-progress builds though (room for some additional work)</li><li>Clientside stage cache is redone to cache all completed stages when request issued.</li></ul></li><li>Minor fix to CSS for unstable build (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34036" class="external-link" rel="nofollow">JENKINS-37001</a>)</li></ul><h4 id="PipelineStageViewPlugin-1.6(July18,2016)">1.6 (July 18, 2016)</h4><p>Theme: Status handling and UX</p><ul><li>Stage view correctly handles try/catch blocks (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34212" class="external-link" rel="nofollow">JENKINS-34212</a>)<ul><li>Workaround: stages with errors are marked successful if overall build is.</li></ul></li><li>Better support use of currentBuild.result to modify run status (<a href="https://issues.jenkins-ci.org/browse/JENKINS-36523" class="external-link" rel="nofollow">JENKINS-36523</a> offers one example)</li><li>Support use of the UNSTABLE status for runs (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33700" class="external-link" rel="nofollow">JENKINS-33700</a>)<ul><li>Catch: you can only set this status for the whole build (result is that successful stages will instead show as unstable). </li><li>Needs JENKINS-26522 to provide custom status tracking for a stage. </li></ul></li><li>Fix bizarre timing numbers from stage view (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34644" class="external-link" rel="nofollow">JENKINS-34644</a>)</li><li>Fix Stage View jumping to the left when displaying many stages and scrolled to the right (<a href="https://issues.jenkins-ci.org/browse/JENKINS-36384" class="external-link" rel="nofollow">JENKINS-36384</a>)</li><li>Allow multi-line input prompts (<a href="https://issues.jenkins-ci.org/browse/JENKINS-36661" class="external-link" rel="nofollow">JENKINS-36661</a>)</li></ul><h4 id="PipelineStageViewPlugin-1.5(June21,2016)">1.5 (June 21, 2016)</h4><p>Theme: configurability of hardcoded values</p><ul><li>REMOVE node labels in stage view (per <a href="https://issues.jenkins-ci.org/browse/JENKINS-34038" class="external-link" rel="nofollow">JENKINS-34038</a>) until we can correctly handle more of the cases with a block-based pipeline graph analysis</li><li>Add properties to override hardcoded limits in the REST API (i.e. to show more or less builds, artifacts, etc) (<a href="https://issues.jenkins-ci.org/browse/JENKINS-34791" class="external-link" rel="nofollow">JENKINS-34791</a>)</li><li>Add a property (modifiable at runtime) to disable lookup of Jenkins users for commit changelogs (<a href="https://issues.jenkins-ci.org/browse/JENKINS-35484" class="external-link" rel="nofollow">JENKINS-35484</a>) <ul><li>Useful for cases where user lookup ties to a security realm and caching problems or network calls render it expensive.</li></ul></li></ul><h4 id="PipelineStageViewPlugin-1.4(May12,2016)">1.4 (May 12, 2016)</h4><ul><li>Ensure the log view popup is always placed in the visible area of the page  (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33109" class="external-link" rel="nofollow">JENKINS-33109</a>)</li><li>Make full screen mode with use the full with by removing offsets for sidebar ( <a href="https://issues.jenkins-ci.org/browse/JENKINS-33498" class="external-link" rel="nofollow">JENKINS-33498</a>)</li><li>Fix display of artifact names when there are large numbers (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33351" class="external-link" rel="nofollow">JENKINS-33351</a>)</li><li>Fix an NPE when generating links object with no active Stapler request</li><li>Correctly calculate all data sizes to use 1024 bytes per increment (consistency with other parts of Jenkins) (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33714" class="external-link" rel="nofollow">JENKINS-33714</a>)</li></ul><h4 id="PipelineStageViewPlugin-1.3(Apr6,2016)">1.3 (Apr 6, 2016)</h4><ul><li>Scalability enhancements dramatically improving UI performance with very large flow graphs (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33624" class="external-link" rel="nofollow">JENKINS-33624</a>)<ul><li>Should greatly reduce CPU load on masters when viewing these graphs</li></ul></li></ul><h4 id="PipelineStageViewPlugin-1.2(Apr6,2016)">1.2 (Apr 6, 2016)</h4><ul><li>Fix issues introduced with Pipeline 2.0 that could produce linkage errors</li><li>Bump to parent POM v2.5</li></ul><h4 id="PipelineStageViewPlugin-1.1(Apr5,2016)">1.1 (Apr 5, 2016)</h4><ul><li>Fix log details not expanding/collapsing for pipeline steps (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33110" class="external-link" rel="nofollow">JENKINS-33110</a>)</li><li>Clean up POMs and use new parent POM (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33188" class="external-link" rel="nofollow">JENKINS-33188</a>)</li><li>Fix a StackOverflow Exception when navigating long pipeline flow graphs (<a href="https://issues.jenkins-ci.org/browse/JENKINS-33486" class="external-link" rel="nofollow">JENKINS-33486</a>)</li></ul><h4 id="PipelineStageViewPlugin-1.0(Feb25,2016)">1.0 (Feb 25, 2016)</h4><ul><li>Initial open source code release</li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/102662163/102793221.png">green-and-mean.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/102662163/102793222.png">who-broke-it.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/102662163/143495707.png">image2018-8-27 8:57:11.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:38</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
