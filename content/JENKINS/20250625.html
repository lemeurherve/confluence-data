<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : &quot;Red Bear Alert!&quot; - The Hudson Bear Lamps</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Use-Jenkins.html">Use Jenkins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : &quot;Red Bear Alert!&quot; - The Hudson Bear Lamps
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (swiest)</span>, last modified by <span class='editor'> Unknown User (kohsuke)</span> on Dec 18, 2008
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Xtreme feedback devices can really help to introduce the concept of continous integration to a team of programmers.</p>

<p>At a customer's site, I installed three colored lamps in the form of cute gummibears (about 40cm in height) hooked up to Ethernet-controlled power sockets. The lamps are placed on a widely visible shelf.</p>

<h1 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Hudsonsignaturecolorscheme">Hudson signature color scheme</h1>

<p>Â  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/20250625/20348930.jpg" data-image-src="attachments/20250625/20348930.jpg" data-unresolved-comment-count="0" data-linked-resource-id="20348930" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="hudson_scheme.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="20250625" data-linked-resource-container-version="17"></span></p>

<p><strong>See the movie!</strong> <strong><a href="http://www.youtube.com/watch?v=IH76gP4X0gk" class="external-link" rel="nofollow"><strong>Hudson Bear Lamps on YouTube!</strong></a></strong></p>

<p>First we followed the official blue-yellow-red &quot;Hudson signature color scheme&quot; with the following meaning of the colors:</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p> Blue bear </p></td>
<td class="confluenceTd"><p> All projects built successfully. </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> Yellow bear </p></td>
<td class="confluenceTd"><p> At least one project is unstable, but not project failed. </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> Red bear </p></td>
<td class="confluenceTd"><p> At least one project failed. </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> Any blinking </p></td>
<td class="confluenceTd"><p> At least one build in progress. </p></td>
</tr>
</tbody></table></div>

<p>While in theory this corresponds nicely with the on-screen display of Hudson, in practice it drives programmers nuts, having blinking bears in their field of view for minutes (depening on the build duration).</p>

<h1 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Trafficlightcolorscheme">Traffic light color scheme</h1>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/20250625/20348929.jpg" data-image-src="attachments/20250625/20348929.jpg" data-unresolved-comment-count="0" data-linked-resource-id="20348929" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="trafficlight_scheme.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="20250625" data-linked-resource-container-version="17"></span></p>

<p>So we came up with a more conservative &quot;traffic light&quot; scheme without blinking bears:</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"><p> Green bear </p></td>
<td class="confluenceTd"><p> All projects built successfully. </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> Yellow bear </p></td>
<td class="confluenceTd"><p> At least one build in progress. </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> Red bear </p></td>
<td class="confluenceTd"><p> At least one project failed or is unstable. </p></td>
</tr>
</tbody></table></div>

<p>Yes, this slightly differs from the official blue-yellow-red &quot;Hudson signature colors&quot; - but the &quot;traffic light&quot; scheme is understood almost intuitively.</p>

<h1 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Thesciencebehindthebears">The science behind the bears</h1>

<p>No matter who sees the bears for the first time: The reaction identifies him or her either as gal, guy, or geek.</p>

<h2 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Gals">Gals</h2>

<ul>
	<li><em>Cuuuuuute!</em></li>
	<li><em>I want one of these at my desk, too! Can I adopt one?</em> (Geek in the background: <em>No!</em>)</li>
	<li><em>Hey, can you make the red bear light up too?</em> (Same geek in the background: <em>Nooooooo!</em>)</li>
</ul>


<h2 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Guys">Guys</h2>

<ul>
	<li><em>You geeks - what are these girly bears good for?</em><br/>
Customers / Managers / Colleagues sometimes ask about the meaning of the fancy bears - especially when witnessing a color switch. This is an ideal opportunity to explain how much your company cares about software quality... ;O)</li>
</ul>


<h2 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Geeks">Geeks</h2>

<ul>
	<li><em>How do you switch the power?</em></li>
	<li><em>How do you get status information from Hudson?</em></li>
	<li><em>How much did it cost?</em></li>
</ul>


<p>O.k. You've read so far. So you qualified as geek and deserve answers.</p>

<h3 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Howdoyouswitchthepower?">How do you switch the power?</h3>

<p><strong>Ethernet-controlled power sockets</strong> are power sockets with typically 2-8 outlets and an embedded web server running on an own IP address. Usually the sockets offer some sort of CGI-based control options. For example, the following URLs switch on/off a specific power outlet (the actual parameters vary from manufacturer to manufacturer):</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
http://your.socket?F1=0        // Switch socket outlet 1 on.
http://your.socket?F2=1        // Switch socket outlet 2 off.
etc.
</pre>
</div></div>
<p>If you are more software inclined than a hardware geek, the nice thing about these ready-made power sockets is that you can buy them safety-certified. Then you don't have to worry about burning down your house when running your unit tests and switching high voltage currents...</p>
<div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>There are also <strong>USB-controlled power sockets</strong>. Currently, they are a way cheaper alternative to Ethernet-controlled sockets.</p>

<p>On the other hand, they will require a PC with an USB port running all the time if you can't connect the USB-controlled socket directly to the Hudson server. Even if you have an outdated PC or laptop that you can recycle for this purpose, the energy cost savings for Ethernet-controlled sockets (they typically need just 3-5 Watts) will charge off within the first year.</p></div></div>

<h3 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-HowdoyougetstatusinformationfromHudson?">How do you get status information from Hudson?</h3>

<p>Is there a specific &quot;bears plugin&quot; needed for Hudson? Not at all! Hooking up Hudson is actually the simplest part. While Hudson exposes the outcome of terminated builds (successful or not) as RSS feed, it also offers an <strong>XML-based API for status information</strong> out of the box. Basically you just append <code>/api/xml</code> to the URL of the page you are viewing in your browser. Then you get the same information in an XML-based, machine-processable format.</p>

<p>For example, the following URL will return you the dashboard as XML file:</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
http://your.hudson.server/api/xml
</pre>
</div></div>
<p>All you have to do, is to get this URL periodically, scan for status colors and send the corresponding command URLs to your Ethernet-controlled socket. We use an extended version of the short PHP script below that runs continously on the Hudson server (we added logging and error handling in the real thing - but to get the idea, a shorter example serves better).</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
&lt;?
// URL to Hudson server dashboard (redered as XML)
define(&quot;HUDSON_XML_URL&quot;, &quot;http://your.hudson.server/api/xml&quot;);
// URL to Ethernet-based power socket
define(&quot;NETCONTROL_URL&quot;, &quot;http://your.socket&quot;);

// Power socket configuration
define(&quot;GREEN_BEAR&quot;, 1);
define(&quot;YELLOW_BEAR&quot;, 2);
define(&quot;RED_BEAR&quot;, 3);
define(&quot;SWITCH_ON&quot;, 0);
define(&quot;SWITCH_OFF&quot;, 1);

// Enter infinite loop.
while (true) {
  // Retrieve XML data from Hudson.
  $myxml = file(HUDSON_XML_URL);

  // Scan for status colors. Note: No real XML parsing necessary here ;O).
  $isBuilding = strpos(implode($myxml), &quot;_anime&lt;/color&gt;&quot;) &gt; 0  ? true : false ;
  $isBroken = strpos(implode($myxml), &quot;&lt;color&gt;red&quot;) &gt; 0  ? true : false ;

  // Set yellow &quot;Is Building&quot; status light.
  if($isBuilding) {
    switchSocket(YELLOW_BEAR, SWITCH_ON);
  } else {
    switchSocket(YELLOW_BEAR, SWITCH_OFF);
  }

  // Set green/red &quot;Build Outcome&quot; status lights.
  if($isBroken) {
    switchSocket(GREEN_BEAR, SWITCH_OFF);
    switchSocket(RED_BEAR, SWITCH_ON);
  } else {
    switchSocket(RED_BEAR, SWITCH_OFF);
    switchSocket(GREEN_BEAR, SWITCH_ON);
  }

  // Sleep some time...
  sleep(30);
}

function switchSocket($socket, $command) {
  // Use syntax of your specific socket manufacturer here.
  file(NETCONTROL_URL . &quot;?F$socket=$command&quot;);
}

?&gt;
</pre>
</div></div>

<h3 id="id-&quot;RedBearAlert!&quot;-TheHudsonBearLamps-Howmuchdiditcost?">How much did it cost?</h3>

<ul>
	<li>The bear lamps are some 10 EUR each,</li>
	<li>an Ethernet-controlled socket (3 outlets) some 120 EUR,</li>
	<li>Hudson is free,</li>
	<li>and the fun... priceless!</li>
</ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20250625/20348929.jpg">trafficlight_scheme.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/20250625/20348930.jpg">hudson_scheme.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:08</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
