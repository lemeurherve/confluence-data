<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : SQLPlus Script Runner Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : SQLPlus Script Runner Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (boaglio)</span>, last modified on Oct 03, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View SQLPlus Script Runner <a href="https://plugins.jenkins.io/sqlplus-script-runner" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://www.jenkins.io/security/advisory/2020-11-04/#SECURITY-2129" class="external-link" rel="nofollow">Password written to the build log</a></li>
</ul>

</div></div>
This plugin enables you run <a href="http://www.orafaq.com/wiki/SQL*Plus_FAQ" class="external-link" rel="nofollow">Oracle SQL*Plus</a> scripts on your Jenkins jobs (user defined scripts or a script inside a workspace).</p><h1 id="SQLPlusScriptRunnerPlugin-Releases">Releases</h1><ul><li><strong> 1.x</strong> - For Jenkins 1.x</li></ul><ul><li><strong>2.x</strong> - For mainly Jenkins 2.x, credentials plugins implemented and pipeline support</li></ul><p><br/></p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Migration Guide</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>To migrate your workspace from version 2 is very simple, all you need to do is:</p><ol><li>Create a credential for your user and password;</li><li>Edit you job configuration and select one credential;</li><li>Save your changes and you are good to go!</li></ol><p><br/></p></div></div><p><br/></p><h1 id="SQLPlusScriptRunnerPlugin-Summary">Summary</h1><p>This plugin enables you run Oracle SQL*Plus scripts on your Jenkins jobs ( <em>Oracle SQL*Plus installation required!</em> ).</p><h1 id="SQLPlusScriptRunnerPlugin-Configuration">Configuration</h1><h2 id="SQLPlusScriptRunnerPlugin-Global">Global</h2><p>All you have to do is check the auto detect ORACLE_HOME option ( or a valid <em>ORACLE_HOME</em> ) and you are in business:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/82018551/82280458.png" data-image-src="attachments/82018551/82280458.png" data-unresolved-comment-count="0" data-linked-resource-id="82280458" data-linked-resource-version="4" data-linked-resource-type="attachment" data-linked-resource-default-alias="main-setup.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><p><br/></p><p><br/></p><p>If you are having problems try to enable <em>Debug info</em> to see what is going on.</p><h2 id="SQLPlusScriptRunnerPlugin-ByJob">By Job</h2><p>You can run a script inside your workspace or a user defined for every job:</p><p><br/></p><p>Version 1.x:</p><p><br/></p><p>  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/82018551/86900741.png" data-image-src="attachments/82018551/86900741.png" data-unresolved-comment-count="0" data-linked-resource-id="86900741" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="custom-setup.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><p><br/></p><p>Version 2.x :</p><p><br/></p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/82018551/158629925.png" data-image-src="attachments/82018551/158629925.png" data-unresolved-comment-count="0" data-linked-resource-id="158629925" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2018-9-13_0-33-6.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><h1 id="SQLPlusScriptRunnerPlugin-Environmentvariables">Environment variables</h1><p><br/></p><p>Pay attention to what version you are using in order to work with variables:</p><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">variable</th><th class="confluenceTh">Version 1.x</th><th class="confluenceTh">Version 2.x</th></tr><tr><td class="confluenceTd">user</td><td style="text-align: center;" class="confluenceTd">  ok</td><td style="text-align: center;" class="confluenceTd"><em>replaced by credentials</em></td></tr><tr><td class="confluenceTd">password</td><td style="text-align: center;" class="confluenceTd"> ok</td><td style="text-align: center;" class="confluenceTd"><em>replaced by credentials</em></td></tr><tr><td class="confluenceTd">instance</td><td style="text-align: center;" class="confluenceTd">ok</td><td style="text-align: center;" class="confluenceTd">ok</td></tr></tbody></table></div><p><br/></p><p><br/></p><p>You can use global variables for <strong>user</strong> and <strong>instance</strong>, first creating it in <em>Jenkins</em>→ <em>configuration</em> :</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/82018551/135463089.png" data-image-src="attachments/82018551/135463089.png" data-unresolved-comment-count="0" data-linked-resource-id="135463089" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="global-var2.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><p><br/></p><p>You <em>user</em> global variable can hold <strong>username and password</strong> as well like this (<em>username/password</em>):</p><p><br/></p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/82018551/135463354.png" data-image-src="attachments/82018551/135463354.png" data-unresolved-comment-count="0" data-linked-resource-id="135463354" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="userpwd.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><p><br/></p><p>And then using it:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/82018551/135463088.png" data-image-src="attachments/82018551/135463088.png" data-unresolved-comment-count="0" data-linked-resource-id="135463088" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="global-var.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><h1 id="SQLPlusScriptRunnerPlugin-Running">Running</h1><p>You can check later all SQL*Plus output inside your build output:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/82018551/82280460.png" data-image-src="attachments/82018551/82280460.png" data-unresolved-comment-count="0" data-linked-resource-id="82280460" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="script-running.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="82018551" data-linked-resource-container-version="16"></span></p><p><br/></p><h1 id="SQLPlusScriptRunnerPlugin-Pipeline">Pipeline</h1><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-Userdefinedscript">User defined script</h2><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Emacs" data-theme="Emacs">node {
   echo &#39;SQLPlusRunner running user define script for system@xe&#39;
  
 step([$class: &#39;SQLPlusRunnerBuilder&#39;,credentialsId:&#39;system&#39;, 
instance:&#39;xe&#39;,scriptType:&#39;userDefined&#39;, script: &#39;&#39;,scriptContent: 
&#39;select * from v$version&#39;])
}</pre>
</div></div><p><br/></p><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-Filescript">File script</h2><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Emacs" data-theme="Emacs">node {
   echo &#39;SQLPlusRunner running file script for system@xe&#39;
  
 step([$class: &#39;SQLPlusRunnerBuilder&#39;,credentialsId:&#39;system&#39;, 
instance:&#39;xe&#39;,scriptType:&#39;file&#39;, script: &#39;start.sql&#39;,scriptContent: &#39;&#39;])
}</pre>
</div></div><p><br/></p><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-Optionalpipelineparameters">Optional pipeline parameters</h2><p><br/></p><ul><li>customOracleHome</li><li>customSQLPlusHome</li><li>customTNSAdmin</li></ul><p><br/></p><p><br/></p><p>Download the last release and give it a try!</p><h1 id="SQLPlusScriptRunnerPlugin-Reportedproblems">Reported problems</h1><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-myscripttakesforevertoexecute...">my script takes forever to execute...</h2><p><br/></p><p><em>Windows</em> users sometimes get a running script stuck on build, even though they run everything on Oracle.</p><p>In that case you should use <a href="https://wiki.jenkins.io/display/JENKINS/Build-timeout+Plugin" rel="nofollow">Build</a><a href="https://wiki.jenkins.io/display/JENKINS/Build-timeout+Plugin" rel="nofollow"> Time Out plugin</a> together to get everything working fine.</p><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-IhaveanerrorORA-????">I have an error ORA-????</h2><p><br/></p><p>You should try running manually SQL*Plus before use Jenkins.</p><p>Sometimes on <em>Linux</em> Jenkins has his <strong>own</strong> Operation System user with his own variables.</p><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-EverytimeIgetthiserror:cannotfindsqlplus">Every time I get this error: <em>cannot find sqlplus <br/></em></h2><p><br/></p><p>Jenkins plugin can't find SQL*Plus executable file.</p><p>You should do in this order:</p><ol><li>Stop Jenkins;</li><li>Find where are<em> sqlplus executable</em> file (usually at<strong> $ORACLE_HOME</strong>);</li><li>Check if they have proper permissions (<em>chmod 755 *</em>);</li><li><p>Create a global environment variable <strong>ORACLE_HOME</strong> like this: <br/><strong>export ORACLE_HOME=/oracle/app/oracle/product/12.1.0/dbhome_1/   </strong> or   <strong>export ORACLE_HOME=&lt;your-sqlplus-directory&gt;</strong></p></li><li><p>Test your environment with:  <em>sqlplus -v   </em> , should return <strong>SQL*Plus version like SQL*Plus: Release 12.1.0.1.0 Production</strong></p></li><li><p>Start Jenkins;</p></li><li><p>Use the try to detect <strong>ORACLE_HOME</strong> option;</p></li><li><p>Retry your SQL*Plus operation.</p></li></ol><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-EverytimeIgetthiserror:libsqlplus.so:cannotopensharedobjectfile:NosuchfileordirectoryorSP2-0667:Messagefilesp1.msbnotfound">Every time I get this error: <em>libsqlplus.so: cannot open shared object file: No such file or directory</em> or <em>SP2-0667: Message file sp1.msb</em> not found</h2><p><br/></p><p>SQL*Plus need its library and its message file to work properly.</p><p>You should do in this order:</p><ol><li>Stop Jenkins;</li><li>Find where are<em> libsqlplus.so</em> files (usually at<strong> $ORACLE_HOME\lib</strong> );</li><li>Check if they have proper permissions (<em>chmod 755 *</em>);</li><li><p>Create a global environment variable <strong>LD_LIBRARY_PATH</strong> like this: <br/><strong>export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH </strong>   or   <strong>export LD_LIBRARY_PATH=&lt;your-libsqlplus-directory&gt;:$LD_LIBRARY_PATH</strong></p></li><li><p>Test your environment with:  <em>sqlplus -v   </em> , should return <strong>SQL*Plus version like SQL*Plus: Release 12.1.0.1.0 Production</strong></p></li><li><p>Start Jenkins;</p></li><li><p>Use the try to detect <strong>ORACLE_HOME</strong> option;</p></li><li><p>Retry your SQL*Plus operation.</p></li></ol><p><br/></p><h2 id="SQLPlusScriptRunnerPlugin-Iwanttohidemyuser/passwordfromConsoleOutput">I want to hide my user / password from Console Output</h2><p><br/></p><ol><li><p>Install <a href="https://wiki.jenkins.io/display/JENKINS/Mask%2BPasswords%2BPlugin" rel="nofollow">Mask Passwords Plugin</a>;</p></li><li><p>Setup to hide everything you want.</p><p><br/><br/></p><p><br/></p></li></ol><h1 id="SQLPlusScriptRunnerPlugin-Ihaveabugtoreport">I have a bug to report</h1><p>Please <a href="https://github.com/jenkinsci/sqlplus-script-runner-plugin/issues/new" class="external-link" rel="nofollow">open a new issue</a> and inform:</p><ul><li>Jenkins server Operation System;</li><li>Jenkins version ;</li><li>Where SQLPlus Script Runner is running (<em>local</em> machine or <em>slave</em> machine);</li><li>Slave machine Operation System (if applicable);</li><li>Oracle Database version;</li><li>Oracle SQL*Plus version;</li><li>Build log with debug info enabled.</li></ul><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/133955807.png">main-setup.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/133955808.png">setup-by-project.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/82280460.png">script-running.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/86900740.png">global-setup.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/86900741.png">custom-setup.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/99614750.png">COB.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/99614751.png">COB.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/99614749.png">COB.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/127074770.png">image2017-5-31 14:46:54.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/129073590.png">image2017-6-5 13:0:7.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/163479894.png">main-setup.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/82280459.png">setup-by-project.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/135463088.png">global-var.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/135463089.png">global-var2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/135463354.png">userpwd.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/135470180.png">sqlplus.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/158629925.png">image2018-9-13_0-33-6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/163479895.png">main-setup.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/82018551/82280458.png">main-setup.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
