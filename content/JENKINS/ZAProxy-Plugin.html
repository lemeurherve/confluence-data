<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : ZAProxy Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : ZAProxy Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (ludovicroucoux)</span>, last modified by <span class='editor'> Unknown User (jordangs)</span> on Nov 16, 2016
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="confluence-information-macro confluence-information-macro-note"><p class="title">Deprecated: This plugin has been removed from the Jenkins Plugin Center, it is not available for new downloads but will be available for existing users.</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p> <br/>
Archived versions of this plugin remain available for <a href="http://archives.jenkins-ci.org/plugins/zaproxy/" class="external-link" rel="nofollow">download</a>. Source code is available on <a href="https://github.com/jenkinsci/zaproxy-plugin" class="external-link" rel="nofollow">GitHub</a>.<br/>
 <br/>
Due to data incompatibility, the plugin will no longer be distributed. Please migrate to the <a href="zap-plugin.html">Official OWASP Zed Attack Proxy Jenkins Plugin</a>.</p></div></div>

<p>This plugin allows you to launch the security software ZAProxy (<a href="https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project" class="external-link" rel="nofollow">https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project</a>) via Jenkins.<br/>
With this plugin, you can spider and scan a target URL, save alerts security reports in all available formats in ZAProxy (xml, html) and also load and save ZAP sessions.</p>

<p>It is recommended to use the “Custom Tools Plugin” plugin in order to make sure to have the ZAProxy tool available during build. This plugin allows you to install the ZAProxy tool on the node (master or slave) used by Jenkins during build and thus be able to use features of zaproxy-plugin.</p>

<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> No information for the plugin 'zaproxy' is available. It may have been removed from distribution. </p></td>
</tr>
</tbody></table>



<style type='text/css'>/*<![CDATA[*/
div.rbtoc1631023300187 {padding: 0px;}
div.rbtoc1631023300187 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1631023300187 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1631023300187'>
<ul class='toc-indentation'>
<li><a href='#ZAProxyPlugin-“CustomToolsPlugin”configurationinadministratormode'>“Custom Tools Plugin” configuration in administrator mode</a></li>
<li><a href='#ZAProxyPlugin-“zaproxy-plugin”configurationinadministratormode'>“zaproxy-plugin” configuration in administrator mode</a></li>
<li><a href='#ZAProxyPlugin-“zaproxy-plugin”configurationinjobs'>“zaproxy-plugin” configuration in jobs</a>
<ul class='toc-indentation'>
<li><a href='#ZAProxyPlugin-Configuration'>Configuration</a></li>
<li><a href='#ZAProxyPlugin-Startup'>Startup</a>
<ul class='toc-indentation'>
<li><a href='#ZAProxyPlugin-Advanced'>Advanced</a></li>
</ul>
</li>
<li><a href='#ZAProxyPlugin-Setup'>Setup</a></li>
</ul>
</li>
<li><a href='#ZAProxyPlugin-Observation'>Observation</a></li>
<li><a href='#ZAProxyPlugin-Versionhistory'>Version history</a>
<ul class='toc-indentation'>
<li><a href='#ZAProxyPlugin-Version1.2.1(Feb27,2016)'>Version 1.2.1 (Feb 27, 2016)</a></li>
<li><a href='#ZAProxyPlugin-Version1.2.0(Jan26,2016)'>Version 1.2.0 (Jan 26, 2016)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.9(Dec23,2015)'>Version 1.1.9 (Dec 23, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.8(Oct24,2015)'>Version 1.1.8 (Oct 24, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.7(Sep15,2015)'>Version 1.1.7 (Sep 15, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.6(Sep14,2015)'>Version 1.1.6 (Sep 14, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.5(Jul17,2015)'>Version 1.1.5 (Jul 17, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.4(Jul9,2015)'>Version 1.1.4 (Jul 9, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.1(May21,2015)'>Version 1.1.1 (May 21, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.1.0(May20,2015)'>Version 1.1.0 (May 20, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.0.5(Apr29,2015)'>Version 1.0.5 (Apr 29, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.0.4(Apr27,2015)'>Version 1.0.4 (Apr 27, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.0.3(Apr24,2015)'>Version 1.0.3 (Apr 24, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.0.2(Apr23,2015)'>Version 1.0.2 (Apr 23, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.0.1(Apr16,2015)'>Version 1.0.1 (Apr 16, 2015)</a></li>
<li><a href='#ZAProxyPlugin-Version1.0.0(Apr14,2015)'>Version 1.0.0 (Apr 14, 2015)</a></li>
</ul>
</li>
</ul>
</div>

<h2 id="ZAProxyPlugin-“CustomToolsPlugin”configurationinadministratormode">“Custom Tools Plugin” configuration in administrator mode</h2>

<p>Once installed, add a tool in “Custom Tools” section in Jenkins administrator mode. Name the tool “ZAProxy” for example and add an installer. In case of *.zip/*.tar.gz installer, the URL will look like this <a href="http://sourceforge.net/projects/zaproxy/files/2.4.0/ZAP_2.4.0_Core.tar.gz/download" class="external-link" rel="nofollow">http://sourceforge.net/projects/zaproxy/files/2.4.0/ZAP_2.4.0_Core.tar.gz/download</a><span style="text-decoration: line-through;"><a href="http://sourceforge.net/projects/zaproxy/files/2.4.0/ZAP_2.4.0_Core.tar.gz/download" class="external-link" rel="nofollow">http://sourceforge.net/projects/zaproxy/files/2.4.0/ZAP_2.4.0_Core.tar.gz/download</a></span> <a href="https://github.com/zaproxy/zaproxy/releases/download/2.4.1/ZAP_2.4.1_Core.tar.gz" class="external-link" rel="nofollow">https://github.com/zaproxy/zaproxy/releases/download/2.4.1/ZAP_2.4.1_Core.tar.gz</a> for the ZAProxy version 2.4.0. Finally, specify a sub-directory for the archive extraction (e.g ZAP_2.4.0). </p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/78938115.png" data-image-src="attachments/78381094/78938115.png" data-unresolved-comment-count="0" data-linked-resource-id="78938115" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="conf_ZAPv2.4.0_plugin_admin.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></p>

<h2 id="ZAProxyPlugin-“zaproxy-plugin”configurationinadministratormode">“zaproxy-plugin” configuration in administrator mode</h2>

<p>Once “zaproxy-plugin” is installed, two fields are available in Jenkins administration allowing to specify the host and port on which ZAProxy will run. The Jira Base Url and Jira Username and thePassword fields are required ONLY if you are planning to use the create jira issues feature. If you are not using this feature then those 3 fields can be kept blank. </p>

<p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="273" width="1196" src="attachments/78381094/95813650.png" data-image-src="attachments/78381094/95813650.png" data-unresolved-comment-count="0" data-linked-resource-id="95813650" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ZAP_ADMIN_JIRA.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span><br/>
<span style="color: rgb(210,73,57);"><strong>“Custom Tools Plugin” configuration in jobs</strong></span><br/>
In “Build Environments” section, tick the “Install custom tools” box and select the tool corresponding to ZAProxy.</p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/78938117.png" data-image-src="attachments/78381094/78938117.png" data-unresolved-comment-count="0" data-linked-resource-id="78938117" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="conf_Custom_Tools_job.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></p>

<h2 id="ZAProxyPlugin-“zaproxy-plugin”configurationinjobs">“zaproxy-plugin” configuration in jobs</h2>

<p>In order to use the plugin, add “Execute ZAProxy” build step. Several parameters are available and are grouped into three categories below.  </p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/95813651.png" data-image-src="attachments/78381094/95813651.png" data-unresolved-comment-count="0" data-linked-resource-id="95813651" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ZAP_UNAUTHENTICATED_SCAN.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></p>


<h3 id="ZAProxyPlugin-Configuration">Configuration</h3>

<p>This category shows to the user the plugin configuration informations in <em>Manage Jenkins -&gt; Configure System</em>.</p>

<p><strong><span style="text-decoration: underline;">Workspace used</span></strong>: Represents the build workspace. It is in this repository where files will be saved (security reports, ZAProxy sessions).</p>

<p><strong><span style="text-decoration: underline;">Override ZAProxy host</span></strong>: Host when ZAProxy is used as a proxy. The default value is specified in administration mode and can be overridden here.</p>

<p><strong><span style="text-decoration: underline;">Override </span></strong><strong><span style="text-decoration: underline;">ZAProxy port</span></strong>: Port when ZAProxy is used as a proxy. The default value is specified in administration mode and can be overridden here.</p>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Leaving the user the possibility to override ZAProxy host and port, it allows to run 2 or more builds at the same time but with different port and/or host.</p></div></div>

<h3 id="ZAProxyPlugin-Startup">Startup</h3>

<p>This category allows setup ZAProxy launch during build.</p>

<p><strong><span style="text-decoration: underline;">Start ZAProxy in a pre-build step</span></strong>: If this box is checked, ZAProxy is started before all other build step (i.e. in a pre-build step). It can be used in harmony with a Selenium build step to let ZAProxy to catch all events throwing by Selenium (so, ZAProxy is used as a proxy: <a href="https://github.com/zaproxy/zap-core-help/wiki/HelpStartProxies" class="external-link" rel="nofollow">https://github.com/zaproxy/zap-core-help/wiki/HelpStartProxies</a>).</p>
<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The Selenium build step must be placed before the ZAProxy build step. So the lifecycle is <em>Start ZAProxy</em> &gt; <em>Run Selenium Tests</em> &gt; <em>Scan urls with ZAProxy</em>.</p></div></div>
<p><strong><span style="text-decoration: underline;">JDK:</span></strong> You can choose the JDK to use to start ZAProxy. ZAProxy requires Java 7 to run, so you must choose at least JDK 7.</p>

<p>Then comes a choice for how ZAProxy is installed:</p>
<ul>
	<li><strong><span style="text-decoration: underline;">ZAProxy is installed by Jenkins</span></strong>: indicates that ZAProxy is installed with a Jenkins tool (like Custom Tools Plugin). The user must choose the ZAProxy tool from the list of installed tools.</li>
	<li><strong><span style="text-decoration: underline;">ZAproxy is already installed</span></strong>: indicates that ZAProxy is already installed on the machine where the build is done. The user must then enter the environment variable that points to the path where ZAProxy is installed on the machine.</li>
</ul>


<h4 id="ZAProxyPlugin-Advanced">Advanced</h4>

<p>Clicking the advanced button, a new block appears below :</p>

<p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/78938160.png" data-image-src="attachments/78381094/78938160.png" data-unresolved-comment-count="0" data-linked-resource-id="78938160" data-linked-resource-version="4" data-linked-resource-type="attachment" data-linked-resource-default-alias="montage.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></p>

<p><strong><span style="text-decoration: underline;">Timeout for ZAProxy initialization</span></strong>: This is the maximum waiting time for ZAProxy is properly initialized. If ZAProxy has not finished its initialization, then the build fails.</p>

<p><strong><span style="text-decoration: underline;">Add ZAProxy command line option: </span></strong>You can configure the command line option and his value (if necessary) in this two appropriate fields. You can add as many command line as you want with the &quot;Add command line option&quot; button and delete them with the &quot;Delete command line&quot; button. More information on <a href="https://github.com/zaproxy/zap-core-help/wiki/HelpCmdline" class="external-link" rel="nofollow">https://github.com/zaproxy/zap-core-help/wiki/HelpCmdline</a>. </p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Add a ZAP command line option can interfere with other UI option of the plugin. Be careful !</p></div></div>

<h3 id="ZAProxyPlugin-Setup">Setup</h3>

<p><strong><span style="text-decoration: underline;">Load session</span></strong>: Allows the user to load a ZAProxy session. The session must be in a folder's workspace, for example <strong>workspace/myFolder/mySession.session</strong> and the user must choose the wanted session in the list. If a session is loaded, it is not necessary to save it at the end because ZAProxy backup in real time until the session is closed.</p>

<p><strong><span style="text-decoration: underline;">Target URL</span></strong>: The URL will endure ZAProxy attacks.</p>

<p><span style="color: rgb(0,0,0);"><strong><span style="text-decoration: underline;">URL to exclude from context</span></strong></span> <span style="color: rgb(0,0,0);">: the URL(s) that ZAP has not to scan in order to prevent some edge effects (logging out while performing  an authenticated scan, performing dangerous actions like deleting users, …)</span></p>


<p><strong><span style="text-decoration: underline;">ZAProxy default directory</span></strong>: Uses the specified directory instead of the default one for ZAProxy (<a href="https://github.com/zaproxy/zaproxy/wiki/FAQconfig" class="external-link" rel="nofollow">https://github.com/zaproxy/zaproxy/wiki/FAQconfig</a>). This allows to choose your policy below (if the specified directory contains policy files into a &quot;policies&quot; folder) or the authentication scripts (if the specified directory contains authentication scripts files into a &quot;scripts/authentication&quot; folder).</p>


<p><strong><span style="text-decoration: underline;">Choose policy to use</span></strong>: This list contains all policy  files located in &quot;specifiedDirectory/policies&quot;. If no policy file is  chosen, so the default policy file will be used for the scan.</p>

<p><span style="color: rgb(0,0,0);"><strong><span style="text-decoration: underline;">Unauthenticated scan</span></strong></span> <span style="color: rgb(0,0,0);">:</span> <span style="color: rgb(0,0,0);">ZAP will perform teh scan with no user profile</span></p>


<ul>
	<li><strong><span style="text-decoration: underline;">Spider URL</span></strong>: If this box is checked, ZAProxy will do a spider (passive scan <a href="https://github.com/zaproxy/zap-core-help/wiki/HelpStartConceptsPscan" class="external-link" rel="nofollow">https://github.com/zaproxy/zap-core-help/wiki/HelpStartConceptsPscan</a>) of the specified URL.</li>
</ul>


<ul>
	<li><strong><span style="text-decoration: underline;">Ajax Spider</span></strong> : If this box is checked zaproxy will do a Ajax Spider scan (Ajax spider <a href="https://github.com/zaproxy/zap-core-help/wiki/HelpAddonsSpiderAjaxConcepts#ajax-spider" class="external-link" rel="nofollow">https://github.com/zaproxy/zap-core-help/wiki/HelpAddonsSpiderAjaxConcepts#ajax-spider</a>) of the specific URL.</li>
</ul>


<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>You need ZAProxy 2.4.2 or higher to use this functionnality.</p></div></div>
<ul>
	<li><span style="color: rgb(0,0,0);"><strong><span style="text-decoration: underline;">Scan URL</span></strong></span> <span style="color: rgb(0,0,0);">: If this box is checked, ZAProxy will do a scan (active scan</span> <span style="color: rgb(0,0,0);">) of the specified URL.</span></li>
</ul>


<p><span style="color: rgb(0,0,0);"><strong><span style="text-decoration: underline;">Authenticated scan</span></strong></span> <span style="color: rgb(0,0,0);">:</span></p>

<p><span style="color: rgb(0,0,0);">ZAP will perform the scan in the point of view of the defined user.Two authentication modes are available :</span></p>
<ul>
	<li><span style="color: rgb(0,0,0);"><strong><span style="text-decoration: underline;">Form based authentication :</span></strong></span> <span style="color: rgb(0,0,0);">can be used in the most of cases</span></li>
</ul>


<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/95813652.png" data-image-src="attachments/78381094/95813652.png" data-unresolved-comment-count="0" data-linked-resource-id="95813652" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ZAP_AUTHENTICATED_SCAN_FORM_BASED.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></p>


<ul>
	<li><strong><span style="text-decoration: underline;">Login URL</span></strong> <strong>:</strong> URL of the login page.</li>
	<li><strong><span style="text-decoration: underline;">Logged in indicator</span></strong> : Indication that the Authentication is successful (existence of a sign out Link. This should be insert as a regular expression</li>
	<li><strong><span style="text-decoration: underline;">POST Username parameter</span></strong> : Parameter (variable name) that used to carry user name for the authentication (<a href="https://github.com/zaproxy/zaproxy/wiki/FAQformauth" class="external-link" rel="nofollow">https://github.com/zaproxy/zaproxy/wiki/FAQformauth</a>).</li>
	<li><strong><span style="text-decoration: underline;">POST password parameter</span></strong> : Parameter (variable name) that used to carry password for the authentication (<a href="https://github.com/zaproxy/zaproxy/wiki/FAQformauth" class="external-link" rel="nofollow">https://github.com/zaproxy/zaproxy/wiki/FAQformauth</a>).</li>
	<li><strong><span style="text-decoration: underline;">Username</span></strong> : Username for authentication.</li>
	<li><strong><span style="text-decoration: underline;">Password</span></strong> : Password for the given user for authentication.</li>
	<li><strong><span style="text-decoration: underline;">Other post data</span></strong> : Other post data needed to perform the authentication scenario (e.g : action=login&amp;perform=yes)</li>
</ul>




<ul>
	<li><span style="color: rgb(0,0,0);"><strong><span style="text-decoration: underline;">Scripts based authentication</span></strong></span> <span style="color: rgb(0,0,0);"><strong>:</strong></span> <span style="color: rgb(0,0,0);">can be used in the rest of cases where authentication process is more complicated (redirection to an authentication server,...)</span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/95813653.png" data-image-src="attachments/78381094/95813653.png" data-unresolved-comment-count="0" data-linked-resource-id="95813653" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ZAP_AUTHENTICATED_SCAN_SCRIPT_BASED.PNG" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></li>
</ul>


<p><br class="atl-forced-newline"/></p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>In  order to work correctly the full path to the scripts directory must be  filled in the ZAP config file &quot;config.xml&quot; between the tags  :&lt;dirs&gt;&lt;/dirs&gt;.Be sure that this path corresponds to the one filled in &quot;ZAProxy default directory&quot; text box or to the default one.You can find here the authentication script used in the example above : <a href="https://github.com/zaproxy/zaproxy/blob/develop/src/scripts/templates/authentication/BodgeIt%20Store%20Authentication.js" class="external-link" rel="nofollow">BodgeIt Store Authentication.js</a></p>
</div></div>
<ul>
	<li><strong><span style="text-decoration: underline;">Spider URL as User</span></strong> : If this box is checked zaproxy will do a spider as user (<a href="https://github.com/zaproxy/zap-core-help/wiki/HelpStartConceptsSpider#spider" class="external-link" rel="nofollow">https://github.com/zaproxy/zap-core-help/wiki/HelpStartConceptsSpider#spider</a>) of the specific URL. (Perform authentication automatically and spider the URL as an authenticated user)</li>
	<li><strong><span style="text-decoration: underline;">Ajax Spider URL As User</span></strong> : If this box is checked zaproxy will do a Ajax Spider scan as authenticated user (Ajax spider ) of the specific URL.</li>
	<li><strong><span style="text-decoration: underline;">Scan URL As User</span></strong> : If this box is checked, ZAProxy will do a scan as authenticated user (active scan <a href="https://github.com/zaproxy/zap-core-help/wiki/HelpStartConceptsAscan" class="external-link" rel="nofollow">https://github.com/zaproxy/zap-core-help/wiki/HelpStartConceptsAscan</a>) of the specified URL.</li>
</ul>





<p><strong><span style="text-decoration: underline;">Generate report</span></strong>: If this box is checked, the security alerts emitted by ZAProxy will be saved into a file in the build's workspace. File settings are:</p>
<ul>
	<li><strong><span style="text-decoration: underline;">Choose format report</span></strong>: This is a list of all available formats to save the report. You can selected several formats with CTRL + click.</li>
	<li><strong><span style="text-decoration: underline;">Filename for report</span></strong>:  The file name that will contain the security alerts. The addition of an extension is not required and user can user environment variables to rename the report (e.g : report_${BUILD_NUMBER})</li>
</ul>


<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>With  ZAproxy version 2.4.2, a new option is set by default. This option  merge related alerts in report. If you want get back to the classic  report, add a command line typing &quot;-config&quot; in command line option field  and &quot;alert.mergeissues=false&quot; in command line value field.</p></div></div>



<p><strong><span style="text-decoration: underline;">Save session</span></strong>: Saves the current ZAProxy session in the build's workspace. If a session is already loaded, it is not necessary to save it again because it is automatically persisted as we go along.</p>
<ul>
	<li><strong><span style="text-decoration: underline;">Filename for session</span></strong>: The file name that will contain the ZAProxy session. If a session is loaded and the user saves the session with the same name, the build will fail.</li>
</ul>


<p><strong><span style="text-decoration: underline;">Create Jira Issues (version 1.2.0)</span></strong></p>

<p>This is an optional feature which can be ONLY used with <a href="https://github.com/0xkasun/security-tools/raw/master/build/zap-exts/jiraIssueCreater-alpha-1.zap" class="external-link" rel="nofollow">Jira issue Creator Plugin</a> for ZAP installed. The plugin can be installed by following the instructions mentioned in <a href="https://docs.google.com/document/d/1KbEXOTqwNAFrVx3gFOOJEaIfqg4awpEnM52AY80PrTw/edit?usp=sharing" class="external-link" rel="nofollow">this</a> document (pdf version <a href="attachments/78381094/93683733.pdf" data-linked-resource-id="93683733" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Stepstosetupzapjiraextension.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80">here</a>). A screenshot of this feature is attached below. <br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/78381094/93683715.png" data-image-src="attachments/78381094/93683715.png" data-unresolved-comment-count="0" data-linked-resource-id="93683715" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="Selection_026.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="78381094" data-linked-resource-container-version="80"></span></p>

<p>The Jira Base Url, Jira Username and Jira Password has to be set in the global configuration of Jenkins. In using this feature the project key has to be set along with an assignee and the issues can be created depending on the alert level of each issue. A user can choose to export alerts as jiras depending on their threat level. At least one alert level has to be checked or else the plugin would fail. <br/>
Filter issue URLS by resource type is an optional feature which can be used to categorize the urls by resource type. (eg css,html, js, jsp etc..) </p>


<h2 id="ZAProxyPlugin-Observation">Observation</h2>

<p>Due to an issue in zaproxy (<a href="https://github.com/zaproxy/zaproxy/issues/1617" class="external-link" rel="nofollow">https://github.com/zaproxy/zaproxy/issues/1617</a>), exceptions can be thrown when you execute the plugin on headless machine although ZAProxy is launched in daemon (headless) mode. To bypass this problem, you can export DISPLAY variable before to start ZAProxy like that: &quot;DISPLAY=:0.0&quot;. This variable can set in <em>Jenkins -&gt; Configure System -&gt; Global properties</em> or with a plugin like <a href="https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin" class="external-link" rel="nofollow">EnvInject Plugin</a>.<em> </em></p>

<p>If it's not enough, you can install Xvfb on the node of the build to emulate frame buffer X11 server. After Xvfb is installed and running, export the DISPLAY variable like previously (with the Xvfb configuration) and launch the build. It should work.</p>

<p>Another solution is to use the <a href="https://wiki.jenkins-ci.org/display/JENKINS/Xvfb+Plugin" class="external-link" rel="nofollow">Xvfb jenkins plugin</a> to install and use Xvfb. It's certainly the best solution pending the issue in zaproxy is resolved. </p>

<h2 id="ZAProxyPlugin-Versionhistory">Version history</h2>


<h3 id="ZAProxyPlugin-Version1.2.1(Feb27,2016)">Version 1.2.1 (Feb 27, 2016)</h3>

<ul>
	<li>Jira features are now optional.</li>
	<li>Script based authentication is now supported.</li>
	<li>Fix <a href="https://github.com/jenkinsci/zaproxy-plugin/issues/11" class="external-link" rel="nofollow">Github issue #11</a></li>
	<li>Fix <a href="https://github.com/jenkinsci/zaproxy-plugin/issues/25" class="external-link" rel="nofollow">Github issue #25</a></li>
	<li>Fix <a href="https://github.com/jenkinsci/zaproxy-plugin/issues/27" class="external-link" rel="nofollow">Github issue #27</a>.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.2.0(Jan26,2016)">Version 1.2.0 (Jan 26, 2016)</h3>

<ul>
	<li>Added support for the ZAP Jira issue creator plugin. </li>
</ul>


<h3 id="ZAProxyPlugin-Version1.1.9(Dec23,2015)">Version 1.1.9 (Dec 23, 2015)</h3>

<ul>
	<li>Fix <a href="https://github.com/jenkinsci/zaproxy-plugin/issues/4" class="external-link" rel="nofollow">Github issue #4</a>.</li>
	<li>Fix <a href="https://github.com/jenkinsci/zaproxy-plugin/issues/8" class="external-link" rel="nofollow">Github issue #10</a>.</li>
	<li>Add the possibility to exclude some URLs from scan (log out url, dangerous actions,...)</li>
	<li>Add the possibility to make either an unauthenticated or authenticated scan.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.8(Oct24,2015)">Version 1.1.8 (Oct 24, 2015)</h3>

<ul>
	<li>Fix <a href="https://github.com/jenkinsci/zaproxy-plugin/issues/8" class="external-link" rel="nofollow">Github issue #8</a>.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.7(Sep15,2015)">Version 1.1.7 (Sep 15, 2015)</h3>

<ul>
	<li>Fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-29687" class="external-link" rel="nofollow">JENKINS-29687</a> issue.</li>
	<li>Minor fix according to the new zap-api (zap-api-2.4-v6).</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.6(Sep14,2015)">Version 1.1.6 (Sep 14, 2015)</h3>

<ul>
	<li>Added Authentication and Ajax spider features.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.5(Jul17,2015)">Version 1.1.5 (Jul 17, 2015)</h3>

<ul>
	<li>Fix a bug introduced by 1.1.4 version.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.4(Jul9,2015)">Version 1.1.4 (Jul 9, 2015)</h3>

<ul>
	<li>Add the possibility to override ZAP proxy host and port for each build.  </li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.1(May21,2015)">Version 1.1.1 (May 21, 2015)</h3>

<ul>
	<li>Bug correction with ZAP command line option.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.1.0(May20,2015)">Version 1.1.0 (May 20, 2015)</h3>

<ul>
	<li>Problem's resolution when the plugin is used with slaves. Now, ZAProxy is correctly launched on the node.</li>
	<li>Add the possibility to choose a specific JDK to start ZAProxy.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.0.5(Apr29,2015)">Version 1.0.5 (Apr 29, 2015)</h3>

<ul>
	<li>Modification to load session : now, the user must choose a session in the list instead of type the relative path.</li>
	<li>Modification to generate report. Now, &quot;true&quot; report are generated instead of write alert security in a file (for more informations, see <a href="https://groups.google.com/forum/#!topic/zaproxy-develop/5vOk_6n7-Ng" class="external-link" rel="nofollow">here</a>). With this modification, json format is not available.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.0.4(Apr27,2015)">Version 1.0.4 (Apr 27, 2015)</h3>

<ul>
	<li>Resolution of an internal conflict with imported library. </li>
</ul>



<h3 id="ZAProxyPlugin-Version1.0.3(Apr24,2015)">Version 1.0.3 (Apr 24, 2015)</h3>

<ul>
	<li>Remove the possibility to override ZAP config using &quot;-config&quot;.</li>
	<li>Add the possibility to add ZAP command line option (more generic than just use &quot;-config&quot;)</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.0.2(Apr23,2015)">Version 1.0.2 (Apr 23, 2015)</h3>

<ul>
	<li>Add the possibility to choose a policy file for a scan.</li>
	<li>Add the possibility to override ZAP config using &quot;-config&quot;.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.0.1(Apr16,2015)">Version 1.0.1 (Apr 16, 2015)</h3>

<ul>
	<li>Minor changes.</li>
</ul>



<h3 id="ZAProxyPlugin-Version1.0.0(Apr14,2015)">Version 1.0.0 (Apr 14, 2015)</h3>

<ul>
	<li>Initial version.</li>
</ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938114.png">conf_Custom_Tools_admin.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938115.png">conf_ZAPv2.4.0_plugin_admin.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938116.png">conf_ZAP_plugin_admin.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938117.png">conf_Custom_Tools_job.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938118.png">conf_ZAPv2.4.0_plugin_job.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938157.png">conf_zaproxy_plugin_admin.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938171.png">conf_zaproxy_plugin.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938161.png">montage.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938162.png">montage.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/79659047.png">montage.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938158.png">conf_zaproxy_plugin.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/79659046.png">Execute_ZAProxy_config.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/78938160.png">montage.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/81297432.png">conf_zaproxy_plugin_admin2.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/81297433.png">Execute_ZAProxy_config2.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/82280601.png">setup.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/87293956.png">ZAProxy_config_unauthenticated_scan.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/87293958.png">ZAProxy_authenticated_scan.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683714.png">Selection_023.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683730.png">Selection_023.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683732.png">Selection_026.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683713.png">Selection_023.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683731.png">Create Jira Issues_021.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683715.png">Selection_026.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/93683733.pdf">Stepstosetupzapjiraextension.pdf</a> (application/pdf)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/95813650.png">ZAP_ADMIN_JIRA.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/95813651.png">ZAP_UNAUTHENTICATED_SCAN.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/95813652.png">ZAP_AUTHENTICATED_SCAN_FORM_BASED.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/78381094/95813653.png">ZAP_AUTHENTICATED_SCAN_SCRIPT_BASED.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 14:01</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
