<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : CAS1 Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : CAS1 Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (david_beutel)</span>, last modified on Nov 30, 2016
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> Distribution of this plugin has been suspended due to unresolved security vulnerabilities, see below. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The current version of this plugin may not be safe to use. Please review the following warnings before use:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2017-04-10/" class="external-link" rel="nofollow">Arbitrary code execution vulnerability</a></li>
</ul>

</div></div>


<h1 id="CAS1Plugin-General">General</h1>

<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>This plugin is obsolete; use the <a href="CAS-Plugin.html">CAS Plugin</a> instead.<br/>
This plugin supports only the oldest version of the CAS protocol, and may be incompatible with newer versions and features of Jenkins.  It has not been maintained for many years.  It was superseded by the <a href="CAS-Plugin.html">CAS Plugin</a>, which should support all of its features on the CAS 1 protocol, as well as newer CAS protocols and Jenkins versions.  (These plugins have separate configurations, so if you upgrade to the <a href="CAS-Plugin.html">CAS Plugin</a>, you will need to configure it too.)  The documentation below has not been updated.</p></div></div>

<p>This plugin lets Jenkins authenticate users via your organization's Central Authentication Service (<a href="http://www.jasig.org/cas" class="external-link" rel="nofollow">CAS</a>), for single-sign-on.  It adds a Security Realm for the CAS protocol version 1 (plain text), which should be compatible with all versions of CAS.  It also allows you to configure a Groovy script that determines a user's authorities/roles/groups.  This script could work by parsing custom extensions in your CAS validation response, such as LDAP affiliation details.</p>

<h1 id="CAS1Plugin-Setup">Setup</h1>

<h2 id="CAS1Plugin-BasicSetup">Basic Setup</h2>

<ol>
	<li>if your CAS restricts the services for which it provides authentication, register your Jenkins service URL with your CAS</li>
	<li>Manage Jenkins &gt; Manage Plugins &gt; Available &gt; install CAS1 plugin</li>
	<li>Manage Jenkins &gt; Configure System &gt; Enable security</li>
	<li>select the CAS protocol version 1 Security Realm</li>
	<li>input the URL of your CAS server and the host name/port number of your Jenkins server</li>
	<li>click focus on another field so AJAX will validate your input</li>
	<li>heed warnings on your input, if any</li>
	<li>click the Save button at the bottom if there are no warnings</li>
</ol>


<p> <span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="attachments/42470386/43188234.png" data-image-src="attachments/42470386/43188234.png" data-unresolved-comment-count="0" data-linked-resource-id="43188234" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Hudson_1268449666628.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="42470386" data-linked-resource-container-version="20"></span></p>

<h2 id="CAS1Plugin-AdvancedSetup">Advanced Setup</h2>

<ol>
	<li>click the Advanced... button under CAS protocol version 1</li>
	<li>input a Groovy script that determines the list of groups/roles of any given user</li>
	<li>input an example validation response from your CAS</li>
	<li>click the Test Script and confirm the list of groups/roles your script produced</li>
	<li>select &quot;Project-based Matrix Authorization Strategy&quot; or &quot;Matrix based security&quot; and add groups matching roles returned by your script</li>
	<li>be sure to give yourself the Administer permission</li>
	<li>click the Save button at the bottom if there are no warnings</li>
</ol>


<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The example below is for a custom CAS server validation response, containing extra details from LDAP, including affiliation.  (The last two lines of the Test Validation Response is actually a single line displayed as wrapped by the narrow browser window.)  For cut-and-paste, this example is also in the help text (? icon).</p></div></div>
<p> <span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="attachments/42470386/43188235.png" data-image-src="attachments/42470386/43188235.png" data-unresolved-comment-count="0" data-linked-resource-id="43188235" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Hudson_1268450149349.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="42470386" data-linked-resource-container-version="20"></span></p>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body">
<p>Another example script determines roles from a standard validation response and ad hoc lists of users.  It can also be combined with the above example script.</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">def username = response.readLines()[1].trim()
roles += [
    &#39;hudson-adm&#39;: [&#39;jbeutel&#39;, &#39;jdoe&#39;, &#39;rsmith&#39;],
    &#39;developer&#39;: [&#39;jbeutel&#39;, &#39;jdoe&#39;, &#39;sclaus&#39;, &#39;ebunny&#39;],
    &#39;tester&#39;: [&#39;itokugawa&#39;, &#39;hmatsu&#39;] // etc...
].collect { role, names -&gt; names.contains(username) ? role : [] }.flatten()
return roles
</pre>
</div></div></div></div>

<h1 id="CAS1Plugin-Limitations">Limitations</h1>

<ul>
	<li>This Security Realm authenticates all pages; it has not implemented anonymous access.  So, the distinction between the Authorization choices of &quot;Logged-in users can do anything&quot; and &quot;Anyone can do anything&quot; is lost; the latter becomes the former.  Likewise, for the Authorization choices of &quot;Matrix based security&quot; and &quot;Project-based Matrix Authorization Strategy&quot;, the mandatory &quot;Anonymous&quot; user/group is superfluous and redundant with the <a href="http://hudson-ci.org/javadoc/hudson/security/SecurityRealm.html#AUTHENTICATED_AUTHORITY" class="external-link" rel="nofollow">build-in &quot;authenticated&quot; role</a>.</li>
	<li>It does not support CAS protocol version 2 (XML), including proxies or attributes.  (It looks like a plugin for all that could be implemented with just the Acegi library that comes with Jenkins, but Acegi does not seem to support version 1 of the CAS protocol, so this plugin includes the <a href="http://www.ja-sig.org/wiki/display/CASC/CAS+Client+for+Java+3.1" class="external-link" rel="nofollow">Java CAS client library</a> instead.)</li>
	<li>The plugin will initiate authentication on any page.  If your CAS restricts which pages it is willing to authenticate, then your users may need to start on one of those pages of Jenkins.</li>
</ul>



<h1 id="CAS1Plugin-ChangeLog">Change Log</h1>

<h3 id="CAS1Plugin-Version1.0.1(2010Mar9)">Version 1.0.1 (2010 Mar 9)</h3>

<ul>
	<li>testing Update Center</li>
</ul>


<h3 id="CAS1Plugin-Version1.0(2010Feb26)">Version 1.0 (2010 Feb 26)</h3>

<ul>
	<li>initial release</li>
</ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42470386/43188231.png">Hudson_1268446174537.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42470386/43188232.png">Hudson_1268449012957.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42470386/43188233.png">Hudson_1268449532345.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42470386/43188234.png">Hudson_1268449666628.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42470386/43188235.png">Hudson_1268450149349.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:15</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
