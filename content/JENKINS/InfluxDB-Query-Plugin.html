<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : InfluxDB Query Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : InfluxDB Query Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (joe99000)</span>, last modified by <span class='editor'> Unknown User (pmouawad)</span> on Dec 15, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View InfluxDB Query <a href="https://plugins.jenkins.io/influxdb-query" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
<p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1631023373175 {padding: 0px;}
div.rbtoc1631023373175 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1631023373175 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1631023373175'>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Description'>Description</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Installation'>Installation</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Prequisites'>Prequisites</a></li>
</ul>
</li>
<li><a href='#InfluxDBQueryPlugin-GlobalConfiguration'>Global Configuration</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Configurationparameter:'>Configuration parameter:</a></li>
</ul>
</li>
<li><a href='#InfluxDBQueryPlugin-JobPostStepConfiguration'>Job Post Step Configuration</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Configurationparameters'>Configuration parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#InfluxDBQueryPlugin-ChangeLog'>Change Log</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Version1.0(2018-11-20)'>Version 1.0 (2018-11-20)</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Releasenotesof1.0'>Release notes of 1.0</a></li>
</ul>
</li>
<li><a href='#InfluxDBQueryPlugin-Version1.1(2018-11-28)'>Version 1.1 (2018-11-28)</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Releasenotesof1.1'>Release notes of 1.1</a></li>
</ul>
</li>
<li><a href='#InfluxDBQueryPlugin-Version1.2(2018-12-12)'>Version 1.2 (2018-12-12)</a>
<ul class='toc-indentation'>
<li><a href='#InfluxDBQueryPlugin-Releasenotesof1.2'>Release notes of 1.2</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></p><h1 id="InfluxDBQueryPlugin-Description">Description</h1><p><span style="color: rgb(36,41,46);">The plugin provides a mechanism for querying InfluxDB as a post build step for use as a deployment gateway.</span><br/><span style="color: rgb(36,41,46);">Using a time series database to for aggregating testing and development tool data makes sense if you can query it after all the testing is complete to determine if a build is stable.</span><br/></p><div class="application-main "><div class="container new-discussion-timeline experiment-repo-nav  " style="margin-left: auto;"><div class="repository-content "><div class="readme boxed-group clearfix announce instapaper_body md"><h2 id="InfluxDBQueryPlugin-Installation"><a style="font-size: 20.0px;letter-spacing: 0.0px;" href="https://github.com/jenkinsci/influxdb-query-plugin#installation" class="external-link" rel="nofollow">Installation</a></h2><h3 id="InfluxDBQueryPlugin-Prequisites">Prequisites</h3><ul><li>Jenkins running on Java 1.7 or later</li></ul><h2 id="InfluxDBQueryPlugin-GlobalConfiguration"><a class="external-link" href="https://github.com/jenkinsci/influxdb-query-plugin#global-configuration" rel="nofollow">Global Configuration</a></h2><p><span style="color: rgb(36,41,46);">Select </span><span style="color: rgb(36,41,46);">Manage Jenkins</span><span style="color: rgb(36,41,46);"> -&gt; </span><em>Configure System</em><span style="color: rgb(36,41,46);">, scroll to </span><span style="color: rgb(36,41,46);">InfluxDB Query Plugin</span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/138457563/165579434.png" data-image-src="attachments/138457563/165579434.png" data-unresolved-comment-count="0" data-linked-resource-id="165579434" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="JENKINS_INFLUXDB_PLUGIN_CONFIG.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="138457563" data-linked-resource-container-version="16"></span></p><h3 id="InfluxDBQueryPlugin-Configurationparameter:"><span>Configuration parameter:</span></h3><ul><li><span><strong>InfluxDB URL</strong>:</span> The complete url including port of the Influxdb e.g. <a rel="nofollow" href="http://localhost:8086/" class="external-link">http://localhost:8086</a> or <a rel="nofollow" href="http://host.domain.com:8086/" class="external-link">http://host.domain.com:8086</a></li><li><strong>InfluxDB Database: </strong>Database name where relevant events are stored e.g. <em>devops</em></li><li><strong>InfluxDB User:</strong> InfluxDB username with access to the relevant events.</li><li><strong>InfluxDB Password:</strong> Password for InfluxDB user.</li></ul><p>Test connection would show you a count of available metrics.</p><p>If the count shows 0 measurements, credentials are correct but database may be wrong.</p><p>If credentials are incorrect you will receive an authentication error.</p><h2 id="InfluxDBQueryPlugin-JobPostStepConfiguration"><a href="https://github.com/jenkinsci/influxdb-query-plugin#job-post-build-configuration" class="external-link" rel="nofollow">Job Post Step Configuration</a></h2><p><span style="color: rgb(36,41,46);">On Job, select </span><span style="color: rgb(36,41,46);">Add Post-build step</span><span style="color: rgb(36,41,46);">, select </span><span style="color: rgb(36,41,46);">Query InfluxDB</span><span style="color: rgb(36,41,46);">:</span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="attachments/138457563/165579435.png" data-image-src="attachments/138457563/165579435.png" data-unresolved-comment-count="0" data-linked-resource-id="165579435" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="JENKINS_INFLUXDB_PLUGIN_ADD_POST_BUILD_STEP.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="138457563" data-linked-resource-container-version="16"></span></p><p><span><span style="color: rgb(36,41,46);">Then configure:</span></span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/138457563/165579436.png" data-image-src="attachments/138457563/165579436.png" data-unresolved-comment-count="0" data-linked-resource-id="165579436" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="JENKINS_INFLUXDB_PLUGIN_POST_BUILD_STEP_CONFIG.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="138457563" data-linked-resource-container-version="16"></span><br/></span></p><h3 id="InfluxDBQueryPlugin-Configurationparameters"><span>Configuration parameters</span></h3><ul><li><span><strong><span style="color: rgb(36,41,46);">Check Name:</span></strong><span style="color: rgb(36,41,46);"> Name for the check to be run, it is display in console for better understanding of performed check.</span></span></li><li><p><strong>Influx Query:</strong> InfluxDB select query supposed to return 1 value. It can be a sum, count or function returning only one value. May use Jenkins tokens such as build number in the query. e.g. :</p><pre>select count(errors) from DevOps where application = 'ArchRival2.1' deployment = '2-1-$BUILD_NUMBER'. </pre><p>It may also be a query against any metric in InfluxDB that is filled by a step of the build, for example if you run a Load Test with <a href="https://jmeter.apache.org" class="external-link" rel="nofollow">Apache JMeter</a> with an <a href="http://jmeter.apache.org/usermanual/component_reference.html#Backend_Listener" class="external-link" rel="nofollow">Backend Listener</a> with <a href="http://jmeter.apache.org/api/org/apache/jmeter/visualizers/backend/influxdb/InfluxdbBackendListenerClient.html" class="external-link" rel="nofollow">InfluxdbBackendListenerClient</a> client, you could query the errors to fail a build:</p><pre><code>select 100*sum(countError)/sum(count) from jmeter where application = 'mygreatapp' and buildNumber = '${BUILD_TAG}'
</code></pre></li><li><span><strong><span style="color: rgb(36,41,46);">Expected Threshold:</span></strong><span style="color: rgb(36,41,46);"> Threshold for the value returned by query result. If exceeded and if Mark Build Unstable is selected, the build will be marked unstable.</span></span></li><li><strong>Retry Count:</strong> Number of times to execute the query as a single post-build step.</li><li><strong>Retry Interval:</strong> Time to wait in between each query in seconds.</li><li><strong>Mark Build Unstable:</strong> Check if we should mark the build unstable if the Max Record Count is exceeded.</li><li><strong>Show Query Results:</strong> Check if we should should display the query results in the Jenkins console.</li></ul></div></div></div></div><p class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light "><span style="color: rgb(36,41,46);">You can configure multiple Queries.</span></p><div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light "><p class="mr-3"><br/></p><p class="mr-3">For any issue please report at our <a href="https://github.com/jenkinsci/influxdb-query-plugin" class="external-link" rel="nofollow">official repository</a>.</p><h1 id="InfluxDBQueryPlugin-ChangeLog">Change Log</h1><h2 id="InfluxDBQueryPlugin-Version1.0(2018-11-20)">Version 1.0 (2018-11-20)</h2><h3 id="InfluxDBQueryPlugin-Releasenotesof1.0"><span class="f6 text-gray-light" style="color: rgb(106,115,125);"><span class="f6 text-gray-light" style="color: rgb(106,115,125);"> <a href="https://github.com/jenkinsci/influxdb-query-plugin/milestone/1?closed=1" class="external-link" rel="nofollow">Release notes of 1.0</a></span></span></h3><h2 id="InfluxDBQueryPlugin-Version1.1(2018-11-28)"><span class="f6 text-gray-light" style="color: rgb(106,115,125);" />Version 1.1 (2018-11-28)</h2></div><h3 class="d-flex flex-justify-center pb-6" id="InfluxDBQueryPlugin-Releasenotesof1.1"><span class="f6 text-gray-light" style="color: rgb(106,115,125);"><span class="f6 text-gray-light" style="color: rgb(106,115,125);"><a href="https://github.com/jenkinsci/influxdb-query-plugin/milestone/2?closed=1" class="external-link" rel="nofollow">Release notes of 1.1</a></span></span></h3><h2 id="InfluxDBQueryPlugin-Version1.2(2018-12-12)"><span style="color: rgb(210,73,57);font-size: 20.0px;letter-spacing: 0.0px;">Version 1.2 (2018-12-12)</span></h2><h3 id="InfluxDBQueryPlugin-Releasenotesof1.2"><a style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;" href="https://github.com/jenkinsci/influxdb-query-plugin/milestone/3?closed=1" class="external-link" rel="nofollow">Release notes of 1.2</a></h3>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/138457563/165579434.png">JENKINS_INFLUXDB_PLUGIN_CONFIG.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/138457563/165579435.png">JENKINS_INFLUXDB_PLUGIN_ADD_POST_BUILD_STEP.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/138457563/165579436.png">JENKINS_INFLUXDB_PLUGIN_POST_BUILD_STEP_CONFIG.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 14:02</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
