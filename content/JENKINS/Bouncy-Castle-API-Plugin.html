<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Bouncy Castle API Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Bouncy Castle API Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (alobato)</span>, last modified by <span class='editor'> Unknown User (jthompson)</span> on Aug 21, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View bouncycastle API <a href="https://plugins.jenkins.io/bouncycastle-api" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
Provides an stable API to Bouncy Castle related tasks. Plugins using Bouncy Castle should depend on this plugin and not directly on Bouncy Castle<p><span style="color: rgb(255,0,0);"><strong><strong>PLEASE NOTE: Version 2.17 requires Java 8.</strong></strong></span></p><p><span style="color: rgb(255,0,0);"><strong>PLEASE NOTE: Version 2.16.0 requires Jenkins 2.16 or newer and is the culmination of the decoupling of bouncycastle from Jenkins core.</strong></span></p><p><span style="color: rgb(255,0,0);"><strong>Notice:</strong></span> <span style="color: rgb(255,0,0);">Currently there are two version lines 1.X for Jenkins cores &lt; 1.648 and 1.648.X for Jenkins cores &gt;= 1.648. Make sure you have the version matching your Jenkins version. </span></p><h2 id="BouncyCastleAPIPlugin-Changelog">Changelog</h2><h3 id="BouncyCastleAPIPlugin-Version2.17(Aug21,2018)">Version 2.17 (Aug 21, 2018)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-53074" class="external-link" rel="nofollow">JENKINS-53074</a> - Bouncy Castle library (bcpkix-jdk15on) updated to 1.60. Now requires Java 8.</li></ul><h3 id="BouncyCastleAPIPlugin-Version2.16.3(Jun6,2018)">Version 2.16.3 (Jun 6, 2018)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-50915" class="external-link" rel="nofollow">JENKINS-50915</a> - Bouncy Castle library (bcpkix-jdk15on) updated to 1.59</li></ul><h3 id="BouncyCastleAPIPlugin-Version2.16.2(Jul24,2017)">Version 2.16.2 (Jul 24, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-45621" class="external-link" rel="nofollow">JENKINS-45621</a> - Bouncy Castle library (bcpkix-jdk15on) updated to 1.57</li></ul><h3 id="BouncyCastleAPIPlugin-Version2.16.1(Apr4,2017)">Version 2.16.1 (Apr 4, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-41978" class="external-link" rel="nofollow">JENKINS-41978</a> - Fixed <code>NullPointerException</code> when a PEM file couldn't be read.</li><li>Reduce startup log level from <code>INFO</code> to <code>FINE</code>.</li></ul><h3 id="BouncyCastleAPIPlugin-Version2.16.0(Jul27,2016)">Version 2.16.0 (Jul 27, 2016)</h3><p><strong>MAJOR IMPROVEMENT:</strong> <a href="https://issues.jenkins-ci.org/browse/JENKINS-36923" class="external-link" rel="nofollow">JENKINS-36923</a> - Move bcpkix dependency from jenkins-war to bouncycastle-api plugin. <em>Requires Jenkins 2.16 or newer</em>. </p><h3 id="BouncyCastleAPIPlugin-Version1.648.3(Jun17,2016)"><strong>Version 1.648.3 (Jun 17, 2016)</strong></h3><p><em>Bugfix</em>: <a href="https://issues.jenkins-ci.org/browse/JENKINS-36035" class="external-link" rel="nofollow">JENKINS-36035</a> - Register Bouncy Castle before any plugin is started</p><h3 id="BouncyCastleAPIPlugin-Version1.648.2(Jun15,2016)"><strong>Version 1.648.2 (Jun 15, 2016)</strong></h3><p><em>Improvement</em>: <a href="https://issues.jenkins-ci.org/browse/JENKINS-35696" class="external-link" rel="nofollow">JENKINS-35696</a> - Provide a mechanism to register Bouncy Castle on the build agents. </p><p>Registration can be performed by calling <em>InstallBouncyCastleJCAProvider.on()</em></p><h3 id="BouncyCastleAPIPlugin-Version1.648.1(Jun14,2016)"><strong>Version 1.648.1 (Jun 14, 2016)</strong></h3><p><em>Bugfix</em>: <a href="https://issues.jenkins-ci.org/browse/JENKINS-35661" class="external-link" rel="nofollow">JENKINS-35661</a> - When reading PCKS8 PrivateKey it should be possible to obtain a KeyPair with toKeyPair</p><h3 id="BouncyCastleAPIPlugin-Version1.648(Jun8,2016)"><span style="color: rgb(210,73,57);"><strong>Version 1.648 (Jun 8, 2016)</strong></span></h3><p>Release for Jenkins versions &gt;= 1.648 with BC 1.54</p><hr/><h3 id="BouncyCastleAPIPlugin-Version1.0.3(Jun17,2014)"><strong>Version 1.0.3 (Jun 17, 2014)</strong></h3><p><em>Bugfix</em>: <a href="https://issues.jenkins-ci.org/browse/JENKINS-36035" class="external-link" rel="nofollow">JENKINS-36035</a> - Register Bouncy Castle before any plugin is started</p><h3 id="BouncyCastleAPIPlugin-Version1.0.2(Jun15,2014)"><strong>Version 1.0.2 (Jun 15, 2014)</strong></h3><p><em>Improvement</em>: <a href="https://issues.jenkins-ci.org/browse/JENKINS-35696" class="external-link" rel="nofollow">JENKINS-35696</a> - Provide a mechanism to register Bouncy Castle on the build agents. </p><p>Registration can be performed by calling <em>InstallBouncyCastleJCAProvider.on()</em></p><h3 id="BouncyCastleAPIPlugin-Version1.0.1(Jun14,2016)">Version 1.0.1 (Jun 14, 2016)</h3><p><em>Bugfix</em>: <a href="https://issues.jenkins-ci.org/browse/JENKINS-35661" class="external-link" rel="nofollow">JENKINS-35661</a> - When reading PCKS8 PrivateKey it should be possible to obtain a KeyPair with toKeyPair</p><h3 id="BouncyCastleAPIPlugin-Version1(Jun7,2016)">Version 1 (Jun 7, 2016)</h3><p>First release of the API supporting Jenkins versions &gt;= 1.609 and &lt; 1.648 with BC 1.47</p><h3 id="BouncyCastleAPIPlugin-Motivation">Motivation</h3><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-35291" class="external-link" rel="nofollow">JENKINS-35291</a></p><p><span style="color: rgb(51,51,51);">Dependency to multiple Bouncy Castle versions from Jenkins core and plugins is causing problems due to the binary incompatibility between versions, the different supported algorithms, etc.</span></p><p><span style="color: rgb(51,51,51);">On Jenkins core 1.648, Bouncy Castle was bumped from version </span>1.47<span style="color: rgb(51,51,51);"> to </span>1.54<span style="color: rgb(51,51,51);"> as a result of a change in </span>instance-identity<span style="color: rgb(51,51,51);"> module</span></p><ul><li>instance-identity-module<span style="color: rgb(51,51,51);"> bumped Bouncy Castle from </span>1.47<span style="color: rgb(51,51,51);"> to </span>1.54<span style="color: rgb(51,51,51);">: </span><a href="https://github.com/jenkinsci/instance-identity-module/blob/instance-identity-1.4/pom.xml#L32" class="external-link" rel="nofollow">pom.xml (v 1.4)</a><span style="color: rgb(51,51,51);"> -&gt; </span><a href="https://github.com/jenkinsci/instance-identity-module/blob/instance-identity-1.5.1/pom.xml#L33" class="external-link" rel="nofollow">pom.xml (v 1.5.1)</a></li><li><span style="color: rgb(51,51,51);">Jenkins core bumped instance-identity-plugin: </span><a href="https://github.com/jenkinsci/jenkins/blob/stable-1.647/war/pom.xml#L107" class="external-link" rel="nofollow">pom.xml (v 1.647) </a><span style="color: rgb(51,51,51);">-&gt; </span><a href="https://github.com/jenkinsci/jenkins/blob/jenkins-1.648/war/pom.xml#L100" class="external-link" rel="nofollow">pom.xml (v 1.648)</a></li></ul><p><span style="color: rgb(51,51,51);">Problems found:</span></p><ul><li><span style="color: rgb(51,51,51);">Plugins running in Jenkins &lt; </span>1.648<span style="color: rgb(51,51,51);"> get </span>1.47<span style="color: rgb(51,51,51);"> from the parent class loader (in the default class loading strategy). If they include a later version in their own classpath, only &quot;new&quot; classes are seen from their referenced JAR.</span></li><li><span style="color: rgb(51,51,51);">Plugins running in Jenkins &gt;= </span>1.648<span style="color: rgb(51,51,51);"> get </span>1.54<span style="color: rgb(51,51,51);"> from the parent class loader (in the default class loading strategy). If they include an earlier version in their own classpath, only &quot;removed&quot; classes are seen from their referenced JAR.</span></li><li><span style="color: rgb(51,51,51);">If the plugin is using JCA instead of BC classes directly usually the plugin works, but if ran in an BC </span>1.47<span style="color: rgb(51,51,51);"> Jenkins core, there will be missing algorithms.</span></li><li><span style="color: rgb(51,51,51);">Plugins are introducing different versions of BC which adds to de mix, potentially producing unpredictable results</span></li></ul><p><span style="color: rgb(51,51,51);">Some considerations:</span></p><ul><li><span style="color: rgb(51,51,51);">Many plugins are only introducing BC dependency to do PEM encoding/decoding. This API got changed by the BC bump.</span></li><li><span style="color: rgb(51,51,51);">instance-identity-module is using BC only for PEM encoding/decoding, removing this dependency from the core is possible</span></li></ul><p><span style="color: rgb(51,51,51);">Proposed solution</span><span style="color: rgb(51,51,51);"> A possible solution to this problem would to create a plugin (this plugin) from which plugins using BC will depend. Responsible for:</span></p><ul><li><span style="color: rgb(51,51,51);">Load BC into uber class loader.</span></li><li><span style="color: rgb(51,51,51);">Register BC as a JVM security provider in order to allow other plugins to use JCA API with BC algorithms.</span></li><li><span style="color: rgb(51,51,51);">Provide an API to do common tasks like PEM Encoding/Decoding ensuring its stability among BC versions.</span></li></ul><p><span style="color: rgb(51,51,51);">The implementation of this plugin does not expose any classes from BC, only JCA, allowing plugins to not depend on the specifics of BC.</span></p><p><span style="color: rgb(51,51,51);">Later some other actions would have to be taken in order to fully solve this situation, like having one version of the plugin for each version of BC, etc.</span></p><p><span style="color: rgb(51,51,51);">This plugin provides an stable API to Bouncy Castle related tasks. Plugins using Bouncy Castle should depend on this plugin and not directly on Bouncy Castle.</span></p>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:14</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
