<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Bitbucket Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Bitbucket Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (ndeloof)</span>, last modified by <span class='editor'> Unknown User (fbelzunc)</span> on Aug 27, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Bitbucket <a href="https://plugins.jenkins.io/bitbucket" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This plugin is currently looking for more maintainers.</p></div></div><p><br/></p><h1 id="BitbucketPlugin-About">About</h1><p>Bitbucket plugin is designed to offer integration between Bitbucket and Jenkins.</p><p>It exposes a single URI endpoint that you can add as a WebHook within each Bitbucket project you wish to integrate with. This single endpoint receives a full data payload from Bitbucket upon push (see their documentation), triggering compatible jobs to build based on changed repository/branch.</p><p><span class="confluence-anchor-link" id="BitbucketPlugin-cloud"></span></p><p>Since 1.1.5 Bitbucket automatically injects the payload received by Bitbucket into the build. You can catch the payload to process it accordingly through the environmental variable $BITBUCKET_PAYLOAD.</p><p><br/></p><h1 id="BitbucketPlugin-BitbucketCloudusage">Bitbucket Cloud usage</h1><p>Configure your Bitbucket repository with a <a href="https://confluence.atlassian.com/bitbucket/manage-webhooks-735643732.html" class="external-link" rel="nofollow">Webhook</a>, using URL JENKINS_URL/bitbucket-hook/ (no need for credentials but do remember the trailing slash).</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" width="793" src="attachments/69764527/160202791.png" data-image-src="attachments/69764527/160202791.png" data-unresolved-comment-count="0" data-linked-resource-id="160202791" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen Shot 2018-09-14 at 3.19.12 PM.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="69764527" data-linked-resource-container-version="32"></span></p><p><br/></p><p>The older-style HTTP POSTs from Bitbucket are also supported but deprecated.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/69764527/71696538.png" data-image-src="attachments/69764527/71696538.png" data-unresolved-comment-count="0" data-linked-resource-id="71696538" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Capture d’écran 2014-02-22 à 19.20.45.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="69764527" data-linked-resource-container-version="32"></span></p><p>On each push, the plugin:</p><ol><li>Scans Jenkins for all jobs with &quot;Build when a change is pushed to Bitbucket&quot; option enabled</li><li>Each each job matched:<ol><li>If the job's SCM (git) URL &quot;loosely matches&quot; that of the git repository listed inside the Bitbucket-provided payload, AND</li><li>If the job's SCM (git) detects that the remote repository has changes, THEN</li><li>A full build of the job will be queued</li></ol></li></ol><p><span class="confluence-anchor-link" id="BitbucketPlugin-server"></span></p><p>The &quot;loose matching&quot; is based on the host name and paths of the projects matching.</p><p><br/></p><h1 id="BitbucketPlugin-Bitbucketserverusage">Bitbucket server usage</h1><p>Since the version 1.1.7 of the Bitbucket plugin works against Bitbucket server. For this plugin to work against Bitbucket server you must: </p><ol><li>Install <a href="https://marketplace.atlassian.com/plugins/nl.topicus.bitbucket.bitbucket-webhooks/server/overview" class="external-link" rel="nofollow">Post Webhooks for Bitbucket</a> at Bitbucket side [the plugin is free]</li><li>At repository level, delete the webhook in case it exists</li></ol><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/69764527/135470320.png" data-image-src="attachments/69764527/135470320.png" data-unresolved-comment-count="0" data-linked-resource-id="135470320" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen Shot 2017-12-05 at 15.14.27.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="69764527" data-linked-resource-container-version="32"></span></p><p>     3. Create a Post-WebHook, which is different from WebHook and enable on push.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/69764527/135470321.png" data-image-src="attachments/69764527/135470321.png" data-unresolved-comment-count="0" data-linked-resource-id="135470321" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen Shot 2017-12-05 at 15.15.17.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="69764527" data-linked-resource-container-version="32"></span></p><p><br/></p><p>After this, you are all set-up</p><h1 id="BitbucketPlugin-JobDSL">Job DSL</h1><p>The current supported dsl is as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">freeStyleJob(&#39;test-job&#39;) {
  triggers{
    bitbucketPush()
  }
}
</pre>
</div></div><p><span style="color: rgb(210,73,57);"><strong>Changelog</strong></span></p><h4 id="BitbucketPlugin-1.1.11(27.August2019)">1.1.11 (27. August 2019)</h4><ul><li>Added possibility to process trigger from bitbucket server default webhooks <a href="https://github.com/jenkinsci/bitbucket-plugin/pull/63" class="external-link" rel="nofollow">PR-63</a> </li></ul><h4 id="BitbucketPlugin-1.1.10(4.July2019)">1.1.10 (4. July 2019)</h4><ul><li>Update job-dsl dependency to 1.66. See <a href="https://github.com/jenkinsci/bitbucket-plugin/pull/58" class="external-link" rel="nofollow">PR-58</a> </li></ul><h4 id="BitbucketPlugin-1.1.9(1.Jun2019)">1.1.9 (1. Jun 2019)</h4><ul><li>Address <a href="https://developer.atlassian.com/cloud/bitbucket/bitbucket-api-changes-gdpr/?_ga=2.164415676.2088283489.1559219877-1322535506.1557927444" class="external-link" rel="nofollow">Bitbucket API change</a>: 
<span class="jira-issue resolved" data-jira-key="JENKINS-57787" >
                    <a href="https://issues.jenkins.io/browse/JENKINS-57787?src=confmacro" class="jira-issue-key"><img class="icon"
                                                                                      src="https://issues.jenkins.io/secure/viewavatar?size=xsmall&amp;avatarId=14673&amp;avatarType=issuetype"/>JENKINS-57787</a>
                            -
            <span class="summary">[API change] Bitbucket Plugin unable to parse Bitbucket webhook json</span>
                                                <span class="aui-lozenge aui-lozenge-subtle             aui-lozenge-success
     jira-macro-single-issue-export-pdf">Resolved</span>
                </span>
</li></ul><h4 id="BitbucketPlugin-1.1.7(6.Dec2017)">1.1.7 (6. Dec 2017)</h4><ul><li>Add Jenkins ci integration</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-28877" class="external-link" rel="nofollow">JENKINS-28877</a> : Add integration for Bitbucket server</li></ul><p><span style="color: rgb(210,73,57);"> </span></p><h4 id="BitbucketPlugin-1.1.6(2.Nov2017)">1.1.6 (2. Nov 2017)</h4><ul><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-44309" class="external-link" rel="nofollow">JENKINS-44309</a> <span style="color: rgb(5,38,76);">Add support for Symbol</span></li></ul><h4 id="BitbucketPlugin-1.1.5(26.Jan2016)">1.1.5 (26. Jan 2016)</h4><ul><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-32372" class="external-link" rel="nofollow">JENKINS-32372</a> Inject the Payload into the build through $BITBUCKET_PAYLOAD</li></ul><h4 id="BitbucketPlugin-1.1.4(28.Dec2015)">1.1.4 (28. Dec 2015)</h4><ul><li>Add <a href="https://issues.jenkins-ci.org/browse/JENKINS-31185" class="external-link" rel="nofollow">JENKINS-31185</a> hg support</li><li>Add <a href="https://github.com/jenkinsci/bitbucket-plugin/pull/24" class="external-link" rel="nofollow">Job DSL extension</a></li><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-26234" class="external-link" rel="nofollow">JENKINS-26234</a> CSRF support</li></ul><h4 id="BitbucketPlugin-1.1.3(16.Oct2015)">1.1.3 (16. Oct 2015)</h4><ul><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-29096" class="external-link" rel="nofollow">JENKINS-29096</a> Advice users when they don't use the right hook url - last `/`</li><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-30985" class="external-link" rel="nofollow">JENKINS-30985</a> Jobs with the same git repository defined several times in the scm should be triggered only once</li></ul><h4 id="BitbucketPlugin-1.1.2(4.August2015)">1.1.2 (4. August 2015)</h4><ul><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-28882" class="external-link" rel="nofollow">JENKINS-28882</a> Workflow support for BitBucket trigger</li></ul><h4 id="BitbucketPlugin-1.1.1(9.July2015)">1.1.1 (9. July 2015)</h4><ul><li>Allow Webhooks 2.0</li></ul><h4 id="BitbucketPlugin-1.1.0(10.March2015)">1.1.0 (10. March 2015)</h4><ul><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-24999" class="external-link" rel="nofollow">JENKINS-24999</a> Build triggered by SCM change without activating trigger in the job configuration</li><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-26413" class="external-link" rel="nofollow">JENKINS-26413</a> BitBucket trigger doesn't need to InitializeLogFile</li><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-26489" class="external-link" rel="nofollow">JENKINS-26489</a> Action report for the bitbucket polling log on web UI</li><li>fix <a href="https://issues.jenkins-ci.org/browse/JENKINS-26805" class="external-link" rel="nofollow">JENKINS-26805</a> Job is not triggered after merging a branch</li></ul><h4 id="BitbucketPlugin-1.0">1.0</h4><ul><li>initial implementation</li></ul><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69764527/71696538.png">Capture d’écran 2014-02-22 à 19.20.45.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69764527/135470320.png">Screen Shot 2017-12-05 at 15.14.27.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69764527/135470321.png">Screen Shot 2017-12-05 at 15.15.17.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69764527/160202791.png">Screen Shot 2018-09-14 at 3.19.12 PM.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:13</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
