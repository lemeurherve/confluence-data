<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : GitHub pull request builder plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : GitHub pull request builder plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (janinko)</span>, last modified by <span class='editor'> Unknown User (jsoref)</span> on Jul 10, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>You should probably migrate to <a href="GitHub-Branch-Source-Plugin.html">GitHub Branch Source Plugin</a></p></div></div><p>This plugin builds pull requests in github and report results.<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View GitHub Pull Request Builder <a href="https://plugins.jenkins.io/ghprb" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2018-03-26/#SECURITY-261" class="external-link" rel="nofollow">GitHub access tokens stored in build.xml</a></li>
	<li><a href="https://jenkins.io/security/advisory/2018-03-26/#SECURITY-262" class="external-link" rel="nofollow">Webhook secret stored in plain text</a></li>
	<li><a href="https://jenkins.io/security/advisory/2018-06-04/#SECURITY-805" class="external-link" rel="nofollow">CSRF vulnerability and lack of permission checks allows capturing credentials</a></li>
</ul>

</div></div>



<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>This plugin is up for adoption.</strong> Want to help improve this plugin? <a href="/display/JENKINS/Adopt+a+Plugin" title="Adopt a Plugin">Click here to learn more</a>!</p></div></div></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>More <strong>up to date</strong> information is available on the:<br/> <a href="https://github.com/jenkinsci/ghprb-plugin/blob/master/README.md" class="external-link" rel="nofollow">Github README.md</a></p></div></div><p><span style="color: rgb(210,73,57);"><strong>Commands:</strong></span>Â </p><p>When a new pull request is opened in the project and the author of the pull request isn't white-listed, builder will ask &quot;Can one of the admins verify this patch?&quot;.</p><ul><li>&quot;ok to test&quot; to accept this pull request for testing</li><li>&quot;test this please&quot; for a one time test run</li><li>&quot;add to whitelist&quot; to add the author to the whitelist</li></ul><p>If the build fails for other various reasons you can rebuild.</p><ul><li>&quot;retest this please&quot; to start a new build</li></ul><p><span style="color: rgb(210,73,57);"><strong>Installation:</strong></span></p><ul><li>I recommend to create GitHub 'bot' user that will be used for communication with GitHub (however you can use your own account if you want).</li><li>The user needs to have push rights for your repository (must be collaborator (user repo) or must have Push &amp; Pull rights (organization repo)).</li><li>If you want to use GitHub hooks have them set automatically the user needs to have administrator rights for your repository (must be owner (user repo) or must have Push, Pull &amp; Administrative rights (organization repo))</li></ul><ul><li>Install the plugin.</li><li>Go to ``Manage Jenkins`` -&gt; ``Configure System`` -&gt; ``GitHub pull requests builder`` section.</li></ul><ul><li>Add GitHub usernames of admins (these usernames will be used as defaults in new jobs).</li><li>Under Advanced, you can modify:<ul><li>The phrase for adding users to the whitelist via comment. (Java regexp)</li><li>The phrase for accepting a pull request for testing. (Java regexp)</li><li>The phrase for starting a new build. (Java regexp)</li><li>The crontab line. This specify default setting for new jobs.</li></ul></li><li>Under Application Setup<ul><li>There are global and job default extensions that can be configured for things like:<ul><li>Commit status updates</li><li>Build status messages</li><li>Adding lines from the build log to the build result message</li><li>etc.</li></ul></li></ul></li></ul><h4 id="GitHubpullrequestbuilderplugin-Credentials">Credentials</h4><ul><li>If you are using Enterprise GitHub set the server api URL in ``GitHub server api URL``. Otherwise leave there ``<a href="https://api.github.com" class="external-link" rel="nofollow">https://api.github.com</a>``.</li><li>A GitHub API token or username password can be used for access to the GitHub API</li><li>To setup credentials for a given GitHub Server API URL:<ul><li>Click Add next to the ``Credentials`` drop down<ul><li>For a token select ``Kind`` -&gt; ``Secret text``<ul><li>If you haven't generated an access token you can generate one in ``Test Credentials...``.<ul><li>Set your 'bot' user's GitHub username and password.</li><li>Press the ``Create Access Token`` button</li><li>Jenkins will create a token credential, and give you the id of the newly created credentials. The default description is: ``serverAPIUrl + &quot; GitHub auto generated token credentials&quot;``.</li></ul></li></ul></li><li>For username/password us ``Kind`` -&gt; ``Username with password``<ul><li>The scope determines what has access to the credentials you are about to create</li></ul></li><li>The first part of the description is used to show different credentials in the drop down, so use something semi-descriptive</li><li>Click ``Add``</li></ul></li><li>Credentials will automatically be created in the domain given by the ``GitHub Server API URL`` field.</li><li>Select the credentials you just created in the drop down.</li><li>The first fifty characters in the Description are used to differentiate credentials per job, so again use something semi-descriptive</li></ul></li><li>Add as many GitHub auth sections as you need, even duplicate server URLs</li></ul><ul><li>Save to preserve your changes.</li></ul><h4 id="GitHubpullrequestbuilderplugin-Creatingjob:">Creating job:</h4><ul><li>Create a new job.</li><li>Add the project's GitHub URL to the &quot;GitHub project&quot; field (the one you can enter into browser. eg: &quot;https://github.com/janinko/ghprb&quot;)</li><li>Select Git SCM.</li><li>Add your GitHub &quot;Repository URL&quot;.</li><li><p>Under Advanced, set &quot;refspec&quot; to</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">+refs/pull/*:refs/remotes/origin/pr/*</pre>
</div></div></li><li><p>In &quot;Branch Specifier&quot;, enter</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">${sha1}</pre>
</div></div><p>or if you want to use the actual commit in the pull request, use</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">${ghprbActualCommit}</pre>
</div></div></li><li>Under &quot;Build Triggers&quot;, check &quot;Github pull requests builder&quot;.<ul><li>Add admins for this specific job.</li><li>If you want to use GitHub hooks for automatic testing, read the help for &quot;Use github hooks for build triggering&quot; in job configuration. Then you can check the checkbox.</li><li>In Advanced, you can modify:<ul><li>The crontab line for this specific job. This schedules polling to GitHub for new changes in Pull Requests.</li><li>The whitelisted users for this specific job.</li><li>The organisation names whose members are considered whitelisted for this specific job.</li></ul></li></ul></li><li>Save to preserve your changes.<br/>Make sure you <strong>DON'T</strong> have &quot;Prune remote branches before build&quot; advanced option selected, since it will prune the branch created to test this build. As noted in issue <a href="https://github.com/jenkinsci/ghprb-plugin/issues/507" class="external-link" rel="nofollow">#507</a> this may be achieved by unchecking '<span style="color: rgb(68,68,68);">Lightweight checkout</span>'.</li></ul><p>If you want to manually build the job, in the job setting check &quot;This build is parameterized&quot; and add string parameter named &quot;sha1&quot;. When starting build give the &quot;sha1&quot; parameter commit id you want to build or refname (eg: &quot;origin/pr/9/head&quot;).</p><h4 id="GitHubpullrequestbuilderplugin-EnvironmentVariables">Environment Variables</h4><p>The plugin makes some very useful environment variables available.</p><ul><li>ghprbActualCommit</li><li>ghprbActualCommitAuthor</li><li>ghprbActualCommitAuthorEmail</li><li>ghprbPullDescription</li><li>ghprbPullId</li><li>ghprbPullLink</li><li>ghprbPullTitle</li><li>ghprbSourceBranch</li><li>ghprbTargetBranch</li><li><span style="color: rgb(36,41,46);">ghprbCommentBody</span></li><li>sha1</li></ul><h4 id="GitHubpullrequestbuilderplugin-JobDSLSupport">Job DSL Support</h4><p>The plugin contains an extension for the Job DSL plugin to add DSL syntax for configuring the build trigger and the pull request merger post-build action.</p><p>Here is an example showing all DSL syntax elements:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">job(&#39;example&#39;) {
    scm {
        git {
            remote {
                github(&#39;test-owner/test-project&#39;)
                refspec(&#39;+refs/pull/*:refs/remotes/origin/pr/*&#39;)
            }
            branch(&#39;${sha1}&#39;)
        }
    }
    triggers {
        githubPullRequest {
            admin(&#39;user_1&#39;)
            admins([&#39;user_2&#39;, &#39;user_3&#39;])
            userWhitelist(&#39;you@you.com&#39;)
            userWhitelist([&#39;me@me.com&#39;, &#39;they@they.com&#39;])
            orgWhitelist(&#39;my_github_org&#39;)
            orgWhitelist([&#39;your_github_org&#39;, &#39;another_org&#39;])
            cron(&#39;H/5 * * * *&#39;)
            triggerPhrase(&#39;OK to test&#39;)
            onlyTriggerPhrase()
            useGitHubHooks()
            permitAll()
            autoCloseFailedPullRequests()
            allowMembersOfWhitelistedOrgsAsAdmin()
            extensions {
                commitStatus {
                    context(&#39;deploy to staging site&#39;)
                    triggeredStatus(&#39;starting deployment to staging site...&#39;)
                    startedStatus(&#39;deploying to staging site...&#39;)
                    statusUrl(&#39;http://mystatussite.com/prs&#39;)
                    completedStatus(&#39;SUCCESS&#39;, &#39;All is well&#39;)
                    completedStatus(&#39;FAILURE&#39;, &#39;Something went wrong. Investigate!&#39;)
                    completedStatus(&#39;PENDING&#39;, &#39;still in progress...&#39;)
                    completedStatus(&#39;ERROR&#39;, &#39;Something went really wrong. Investigate!&#39;)
                }
            }
        }
    }
}
</pre>
</div></div><p>See the <a href="https://github.com/jenkinsci/ghprb-plugin#job-dsl-support" class="external-link" rel="nofollow">README</a> on GitHub for the latest information.</p><h4 id="GitHubpullrequestbuilderplugin-Changelog">Changelog</h4><h5 id="GitHubpullrequestbuilderplugin-&gt;=1.25">&gt;= 1.25</h5><p><em>Changelog for</em> <code><em>1.25</em></code> <em>and upward is maintained on</em> <em><a href="https://github.com/jenkinsci/ghprb-plugin#updates" class="external-link" rel="nofollow">the plugins github page</a></em></p><h5 id="GitHubpullrequestbuilderplugin-1.24">1.24</h5><p>Use signature checking for webhooks if desired.<br/>Add custom messages to status updates and a custom url field.</p><h5 id="GitHubpullrequestbuilderplugin-1.23">1.23</h5><p>Use credentials plugin for username/password combinations and tokens.<br/>Support multiple GitHub endpoints.</p><h5 id="GitHubpullrequestbuilderplugin-1.22.x">1.22.x</h5><p>Fix issue where if a project was disabled the Jenkins Trigger process would crash<br/>Fix commit status context<br/>Add one line test results for downstream builds<br/>Miscellaneous bug fixes</p><h5 id="GitHubpullrequestbuilderplugin-1.22">1.22</h5><p>Move commit status over to extension form. It is now configurable, satisfying #81, #73, and #19 at least.</p><h5 id="GitHubpullrequestbuilderplugin-1.21">1.21</h5><p>Move all commenting logic out into extensions.</p><h5 id="GitHubpullrequestbuilderplugin-1.20.1">1.20.1</h5><p>Null Pointer fix for trigger.<br/>Added clarity to error message when access is forbidden.</p><h5 id="GitHubpullrequestbuilderplugin-1.20">1.20</h5><p>PullRequestMerger now notifies the taskListener of failures.<br/>AutoCloseFailedPullRequest has been extracted from the published URL check.</p><h5 id="GitHubpullrequestbuilderplugin-1.19">1.19</h5><p>More work for disabled builds.<br/>Unified tabs to spaces.<br/>Updates to the tests, and added some tests.</p><h5 id="GitHubpullrequestbuilderplugin-1.18">1.18</h5><p>Add support for folder projects.<br/>Correcting issue with default credentials.<br/>Correcting issue with ghRepository being null when it shouldn't be.<br/>Ignoring case when matching repo to url.<br/>Changing the wording for pull requests that are mergeable.<br/>Change requestForTesting phrase to a textArea.<br/>Check if project is disabled, if it is then don't do anything.</p><h5 id="GitHubpullrequestbuilderplugin-1.14">1.14</h5><p>A comment file can be created during the build and added to any comment made to the pull request. podarok#33<br/>Added a [skip ci] setting, that can be changed. Adding the skip statement to the pull request body will cause the job not to run. sathiya-mit#29<br/>Escaping single quotes in log statements tIGO#38<br/>Fixed owner name deduction from url on github hook handling nikicat#40<br/>Removed unused Test field from the config</p><h5 id="GitHubpullrequestbuilderplugin-1.13-1">1.13-1</h5><p>Replacing deprecated Github.connect method. tIGO#39<br/>Added a merge plugin for post build. If the build is successful, the job can specify conditions under which the pull request &quot;button&quot; will be pressed.</p><h5 id="GitHubpullrequestbuilderplugin-1.12">1.12</h5><p>Fixes issue with checking rate limits for GitHub Enterprise<br/>Internal refactorings<br/>Fixes checking of TriggerTimer (<a href="https://issues.jenkins-ci.org/browse/JENKINS-22550" class="external-link" rel="nofollow">JENKINS-22550</a>)</p><h5 id="GitHubpullrequestbuilderplugin-1.11.2">1.11.2</h5><p>Major reduction in the number of requests made to GitHub to avoid rate limit issues<br/>Fixed changelog for a build so it reports differences between Pull Request build<br/>Fixes bug on getting author email address from GitHub APIs<br/>Updates warning message is URL isn't set on the GitHub project plugin<br/>Adds some additional parameters to the build, such as the source branch, pull request link, etc.<br/>Success/failure message now put into the comment on Pull Requests</p><p><span style="color: rgb(210,73,57);"><strong>1.10 - 1.11.1</strong></span></p><p>Not publicly released.</p><h5 id="GitHubpullrequestbuilderplugin-1.9">1.9</h5><p>Added job specific triggers.<br/>Added more informations as job parameters.<br/>Fix support for gh-ent token generation. <a href="#GitHubpullrequestbuilderplugin-JENKINS-17334">JENKINS-17334</a><br/>Lookup PR detailed information for each PR. <a href="#GitHubpullrequestbuilderplugin-JENKINS-17852">JENKINS-17852</a><br/>Fix closing PR.<br/>various bugfixes</p><h5 id="GitHubpullrequestbuilderplugin-1.8">1.8</h5><p>Support auto-close at build level<br/>add pull id and target branch to environment variables<br/>fix GitHub Hooks when authentication is required on Jenkins<br/>various bug fixes and improvements</p><h5 id="GitHubpullrequestbuilderplugin-1.7">1.7</h5><p>implemented support for GitHub hooks<br/>added button for generating API token</p><h5 id="GitHubpullrequestbuilderplugin-1.6">1.6</h5><p>option for specifying how to mark unstable builds in GitHub<br/>Close failed pull requests automatically if plugin admin configured it<br/>customizeable pass/fail comments<br/>Refactoring of code<br/>help description in Jenkins configuration</p><h5 id="GitHubpullrequestbuilderplugin-1.5">1.5</h5><p>checkbox enabling sending comments when update of comment status fails<br/>option to enter organisations which members are whitelisted<br/>support for Enterprise GitHub<br/>link to pull request into build description<br/>fixes</p><h5 id="GitHubpullrequestbuilderplugin-1.4">1.4</h5><p>Changed comment commands - phrases for testing once, pull request or add user to whitelist<br/>&quot;test this please&quot; starts new build<br/>&quot;ok to test&quot; allow pull request for building<br/>&quot;add to whitelist&quot; add user to whitelist</p><h5 id="GitHubpullrequestbuilderplugin-1.3">1.3</h5><p>Add published URL feature.<br/>Enable connection to GitHub Enterprise instances.<br/>Enable authentication via a token.<br/>When automatic merge is possible, build the merge.</p><h5 id="GitHubpullrequestbuilderplugin-1.2">1.2</h5><p>Use commit status API instead of comments for reporting results.</p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/63930613/80412712.png">Screen Shot 2015-06-19 at 2.53.29.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/63930613/138449552.png">Screen Shot 2018-02-13 at 1.54.11 PM.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/63930613/138449553.png">Screen Shot 2018-02-13 at 1.55.30 PM.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:25</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
