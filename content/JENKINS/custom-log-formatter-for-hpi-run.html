<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : custom log formatter for hpi-run</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Extend-Jenkins.html">Extend Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugin-tutorial.html">Plugin tutorial</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : custom log formatter for hpi-run
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (m2spring)</span>, last modified on Dec 17, 2012
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>If you don't like the log format used by <code>hpi:run</code> use this approach:</p>

<ul>
	<li>Give the name of a logging properties file on the command line
  <div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">mvn hpi:run -Djava.util.logging.config.file=logging.properties</pre>
</div></div></li>
	<li>Have your custom formatter listed in the <code>logging.properties</code> file
  <div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
handlers = java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = ALL
java.util.logging.ConsoleHandler.formatter = org.example.SingleLineFormatter
</pre>
</div></div></li>
</ul>


<p><img class="emoticon emoticon-warning" src="images/icons/emoticons/warning.svg" data-emoticon-name="warning" alt="(warning)"/> This is the important step: Add your custom formatter class to the <code>plexus-classworlds*.jar</code> of your Maven installation!</p>

<h3 id="customlogformatterforhpi-run-ExampleFormatter">Example Formatter</h3>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
package org.example;

import java.util.logging.Formatter;
import java.util.logging.LogRecord;
import java.util.logging.Logger;

public class SingleLineFormatter extends Formatter{
    
    @Override
    public String format(LogRecord record) {
        return String.format(&quot;%1$tY%1$tm%1$td-%1$tH%1$tM%1$tS %2$s %3$s: %4$s\n&quot;,
                record.getMillis(),
                record.getLevel(), 
                record.getSourceClassName(),
                record.getMessage()
                );
    }
}
</pre>
</div></div>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:09</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
