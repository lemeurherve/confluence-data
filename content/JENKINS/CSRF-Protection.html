<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : CSRF Protection</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Use-Jenkins.html">Use Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Securing-Jenkins.html">Securing Jenkins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : CSRF Protection
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (kohsuke)</span>, last modified by <span class='editor'> Unknown User (wilfredh)</span> on Feb 19, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="CSRFProtection-Overview">Overview</h1><p><a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)" class="external-link" rel="nofollow">Cross site request forgery</a> is a class of attack that forces an end user to execute unwanted actions on Jenkins. Because of the way this attack works, even Jenkins that's running inside a corporate firewall is vulnerable. A common way to exploit this is by <a href="https://usa.kaspersky.com/internet-security-center/definitions/spear-phishing" class="external-link" rel="nofollow">spear phishing</a>.</p><h1 id="CSRFProtection-EnablingProtection">Enabling Protection</h1><p>To protect against this class of attacks, go to &quot;Manage Jenkins&quot; &gt; &quot;Configure Global Security&quot; and select &quot;Prevent Cross Site Request Forgery exploits.&quot; This option is enabled by default in new installations starting Jenkins 2.x, but if you are still on 1.x or upgrading existing installations to 2.x, this option is off by default.</p><p>Or with groovy:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>csrf.groovy</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: groovy; gutter: false; theme: Confluence" data-theme="Confluence">import hudson.security.csrf.DefaultCrumbIssuer
import jenkins.model.Jenkins

def instance = Jenkins.instance
instance.setCrumbIssuer(new DefaultCrumbIssuer(true))
instance.save()</pre>
</div></div><h1 id="CSRFProtection-Gotchas">Gotchas</h1><ul><li>If you have scripts and other programs that access Jenkins via <a href="Remote-access-API.html">REST API</a>, they can be impacted. See <a href="Remote-access-API.html#RemoteaccessAPI-CSRFProtection">its CSRF section</a> for more information about how to update those scripts.</li></ul>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:08</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
