<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Valgrind Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Valgrind Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (existence)</span>, last modified by <span class='editor'> Unknown User (jamberg)</span> on Sep 30, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><p><br/><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Valgrind <a href="https://plugins.jenkins.io/valgrind" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The current version of this plugin may not be safe to use. Please review the following warnings before use:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2020-09-01/#SECURITY-1830" class="external-link" rel="nofollow">Stored XSS vulnerability</a></li>
	<li><a href="https://jenkins.io/security/advisory/2020-09-01/#SECURITY-1829" class="external-link" rel="nofollow">XXE vulnerability</a></li>
</ul>

</div></div>
Integrates <a href="http://www.valgrind.org/" class="external-link" rel="nofollow">Valgrind</a> in Jenkins.This Plugin integrates <a href="http://www.valgrind.org/" class="external-link" rel="nofollow">Valgrind</a> (memcheck to be exact) into Jenkins by providing:</p><ul><li>Valgrind Runner: to run valgrind with your executables</li><li>Valgrind Publisher: to record valgrind xml reports</li></ul><p>Those two things work independently from each other. So if your build system already calls valgrind (as part of your unit tests or whatever) just use the publisher to record and analyze the xml reports.</p><p>Feedback, bug reports and feature requests are highly appreciated, just create a JIRA issue or drop me a email.</p><h5 id="ValgrindPlugin-RunnerOptions">Runner Options</h5><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/60918012/64356371.png" data-image-src="attachments/60918012/64356371.png" data-unresolved-comment-count="0" data-linked-resource-id="64356371" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="runner_options.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><h5 id="ValgrindPlugin-PublisherOptions">Publisher Options</h5><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/60918012/64356372.png" data-image-src="attachments/60918012/64356372.png" data-unresolved-comment-count="0" data-linked-resource-id="64356372" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="publisher_options.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><h5 id="ValgrindPlugin-Trendgraph">Trend graph</h5><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/60918012/61112439.jpg" data-image-src="attachments/60918012/61112439.jpg" data-unresolved-comment-count="0" data-linked-resource-id="61112439" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="valgrind-trend-graph.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><h5 id="ValgrindPlugin-Summaryonbuildpage">Summary on build page</h5><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/60918012/61112433.jpg" data-image-src="attachments/60918012/61112433.jpg" data-unresolved-comment-count="0" data-linked-resource-id="61112433" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="valgrind-error-summary.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><h5 id="ValgrindPlugin-Erroroverview">Error overview</h5><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/60918012/61112434.jpg" data-image-src="attachments/60918012/61112434.jpg" data-unresolved-comment-count="0" data-linked-resource-id="61112434" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="valgrind-error-overview.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><h5 id="ValgrindPlugin-Errordetailswithstacktrace">Error details with stacktrace</h5><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/60918012/61112431.jpg" data-image-src="attachments/60918012/61112431.jpg" data-unresolved-comment-count="0" data-linked-resource-id="61112431" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="valgrind-error-detail.jpg" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><h5 id="ValgrindPlugin-Exampleprojectwithasimplepipelineconfiguration">Example project with a simple pipeline configuration</h5><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/60918012/138451432.png" data-image-src="attachments/60918012/138451432.png" data-unresolved-comment-count="0" data-linked-resource-id="138451432" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="valgrind-pipeline-example.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="60918012" data-linked-resource-container-version="40"></span></p><p><span style="color: rgb(233,165,157);">Example pipeline script</span></p><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom">
  <b class="code-title"></b>
  <span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span>
  <span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar"> 
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: groovy; gutter: true; theme: Confluence; collapse: true" data-theme="Confluence">node {
   stage('Checkout') {
	  git 'https://github.com/eXistence/ValgrindTest.git'
   }
   stage('Build') {
      sh 'sh build.sh'
   }
   stage('Valgrind') {
        runValgrind (
          childSilentAfterFork: true,
          excludePattern: '',
          generateSuppressions: true,
          ignoreExitCode: true,
          includePattern: 'bin/test_leak',
          outputDirectory: '',
          outputFileEnding: '.memcheck',
          programOptions: '',
          removeOldReports: true,
          suppressionFiles: '',
          tool: [$class: 'ValgrindToolMemcheck',
            leakCheckLevel: 'full',
            showReachable: true,
            trackOrigins: true,
            undefinedValueErrors: true],
          traceChildren: true,
          valgrindExecutable: '',
          valgrindOptions: '',
          workingDirectory: ''
        )

        publishValgrind (
          failBuildOnInvalidReports: false,
          failBuildOnMissingReports: false,
          failThresholdDefinitelyLost: '',
          failThresholdInvalidReadWrite: '',
          failThresholdTotal: '',
          pattern: '*.memcheck',
          publishResultsForAbortedBuilds: false,
          publishResultsForFailedBuilds: false,
          sourceSubstitutionPaths: '',
          unstableThresholdDefinitelyLost: '',
          unstableThresholdInvalidReadWrite: '',
          unstableThresholdTotal: ''
        )
   }
}</pre> 
 </div>
</div><p><br/></p><h2 id="ValgrindPlugin-ChangeLog">Change Log</h2><h5 id="ValgrindPlugin-Release0.28(March06,2018)">Release 0.28 (March 06, 2018)</h5><ul><li>added ability to substitue source paths (thx J-cztery) </li><li>fixed several findbugs warnings (thx tern-nils)</li><li>added pipeline support (thx wulkop)</li><li>fixed problem with short valgrind arguments</li></ul><h5 id="ValgrindPlugin-Release0.24(November24,2014)">Release 0.24 (November 24, 2014)</h5><ul><li>fixed include/exclude patterns being relative to working directory, patterns are now always relative to workspace (fixed JENKINS-24971). <span style="color: rgb(0,0,0);"><strong>This change might break some configurations!</strong></span></li><li>generated report files are automatically excluded from executables</li><li>added option to the runner to generate and display suppression information for easy use in suppression files (fixed JENKINS-16218)</li><li>added option to the runner to use suppression files</li><li>added option to the runner to remove all old report files from workspace before running valgrind (useful if you are not doing a clean checkout)</li><li>added environment variable PROGRAM_DIR that contains the directory of the executable currently under test (useful for setting the working directory or other stuff relative to the executable)</li><li>requires Jenkins 1.480</li></ul><h5 id="ValgrindPlugin-Release0.23(November23,2014)">Release 0.23 (November 23, 2014)</h5><p>release failed, version skipped</p><h5 id="ValgrindPlugin-Release0.22(September16,2014)">Release 0.22 (September 16, 2014)</h5><ul><li>fixed: don't crash on invalid input data</li></ul><h5 id="ValgrindPlugin-Release0.21(August31,2014)">Release 0.21 (August 31, 2014)</h5><ul><li>fixed 'Ignore Exit Code' setting (JENKINS-16859)</li></ul><p>Thanks to Prunier Charles-Yves!</p><ul><li>added publisher option to fail build on missing xml report files (JENKINS-24256)</li><li>added publisher option to fail build on invalid xml report files (JENKINS-24256)</li></ul><h5 id="ValgrindPlugin-Release0.20(August23,2013)">Release 0.20 (August 23, 2013)</h5><ul><li>greatly improved memory footprint (only affects new builds)</li></ul><p>Thanks to Marco Miller (Ericsson) and Jakub Pawlaczyk!</p><ul><li>fixed: wrong error names on Process Details page</li><li>fixed: wrong/missing number of leaked bytes for some errors</li></ul><h5 id="ValgrindPlugin-Release0.19(March03,2013)">Release 0.19 (March 03, 2013)</h5><ul><li>fixed: multiple arguments for executable did not work</li><li>added more process details to record (pid, ppid, arguments)</li><li>errors are listed per process</li><li>added support for process hierarchies</li><li>added valgrind options trace-children, child-silent-after-fork</li><li>added options to publish results for failed or aborted builds</li><li>improved navigation between the different result pages (overview, process details, error details)</li></ul><h5 id="ValgrindPlugin-Release0.18(October23,2012)">Release 0.18 (October 23, 2012)</h5><ul><li>added exclude pattern for executables</li><li>added option to ignore valgrind exit code</li><li>added support for older valgrind versions (tested with 3.1.1, 3.2.0 and 3.7.0)</li></ul><h5 id="ValgrindPlugin-Release0.17(September23,2012)">Release 0.17 (September 23, 2012)</h5><ul><li>fixed null pointer exception on empty error list</li><li>display &quot;no errors&quot; on result page if error list is empty</li></ul><h5 id="ValgrindPlugin-Release0.16(September19,2012)">Release 0.16 (September 19, 2012)</h5><p>just a test, no changes</p><h5 id="ValgrindPlugin-Release0.15(September18,2012)">Release 0.15 (September 18, 2012)</h5><ul><li>added valgrind option &quot;--track-origins&quot;</li><li>added support for auxiliary messages and stacktraces</li><li>&quot;Valgrind Result&quot; on project page always links to most recent build with valid valgrind result, even if that build failed</li></ul><h5 id="ValgrindPlugin-Release0.14(September14,2012)">Release 0.14 (September 14, 2012)</h5><ul><li>fixed handling of multiple valgrind and program command line options</li></ul><h5 id="ValgrindPlugin-Release0.13(September14,2012)">Release 0.13 (September 14, 2012)</h5><ul><li>fixed error after upgrading from older version to 0.12</li></ul><h5 id="ValgrindPlugin-Release0.12(September13,2012)">Release 0.12 (September 13, 2012)</h5><ul><li>added support for arbitrary valgrind options</li><li>added support for program options</li></ul><h5 id="ValgrindPlugin-Release0.11(July27,2012)">Release 0.11 (July 27, 2012)</h5><ul><li>moved some settings to an “advanced” block, to encourage an “out of the box” usage</li><li>made the memcheck option “leak-check” configurable (defaults to &quot;full&quot;)</li></ul><p>Thanks to Alexandre Sanches from Thales!</p><h5 id="ValgrindPlugin-Release0.10(July11,2012)">Release 0.10 (July 11, 2012)</h5><ul><li>fixed: name of configured valgrind executable didn't show up</li></ul><h5 id="ValgrindPlugin-Release0.9(June24,2012)">Release 0.9 (June 24, 2012)</h5><ul><li>expand configuration strings with env vars (to support parameterized builds via <em>${my_var}</em>)</li><li>configure valgrind executable location for each job separately (or leave empty to use default valgrind location from PATH)</li></ul><h5 id="ValgrindPlugin-Release0.8(May15,2012)">Release 0.8 (May 15, 2012)</h5><ul><li>replaced quick fix from 0.7 with a better solution</li></ul><h5 id="ValgrindPlugin-Release0.7(May15,2012)">Release 0.7 (May 15, 2012)</h5><ul><li>quick fix for broken configuration</li></ul><h5 id="ValgrindPlugin-Release0.6(May15,2012)">Release 0.6 (May 15, 2012)</h5><ul><li>fixed exception with Jenkins 1.463</li><li>fixed thresholds (error count must truly exceed them)</li><li>improved naming and documentation of some settings</li></ul><h5 id="ValgrindPlugin-Release0.5(May9,2012)">Release 0.5 (May 9, 2012)</h5><ul><li>lowered required Jenkins version to 1.424</li><li>fixed crash on unknown valgrind error</li><li>validate input pattern and file ending</li><li>added support for more valgrind errors: Overlap, SyscallParam, InvalidFree and MismatchedFree</li><li>show more error types in trend graph</li><li>added descriptive text and a link to the valgrind manual to each type of error</li></ul><h5 id="ValgrindPlugin-Release0.4(May8,2012)">Release 0.4 (May 8, 2012)</h5><ul><li>internal fixes: added name to pom.xml</li></ul><h5 id="ValgrindPlugin-Release0.3(May8,2012)">Release 0.3 (May 8, 2012)</h5><ul><li>internal fixes: added wiki url and license to pom.xml</li></ul><h5 id="ValgrindPlugin-Release0.2(May8,2012)">Release 0.2 (May 8, 2012)</h5><ul><li>integrated &quot;Uninitialized Condition&quot; and &quot;Uninitialized value&quot; errors</li><li>improved labeling of global config options</li><li>show Unique ID from Valgrind XML output</li></ul><h5 id="ValgrindPlugin-Release0.1(May7,2012)">Release 0.1 (May 7, 2012)</h5><ul><li>Initial Release</li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/61112431.jpg">valgrind-error-detail.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/61112435.jpg">valgrind-error-summary.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/61112434.jpg">valgrind-error-overview.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/61112433.jpg">valgrind-error-summary.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/61112439.jpg">valgrind-trend-graph.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/65339420.png">runner_options.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/64356372.png">publisher_options.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/64356371.png">runner_options.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/60918012/138451432.png">valgrind-pipeline-example.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:55</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
