<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Remoting</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Extend-Jenkins.html">Extend Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Writing-an-SCM-plugin.html">Writing an SCM plugin</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Remoting
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (redsolo)</span>, last modified on Jul 15, 2008
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Hudson supports building on distributed machines, and the SCM plugin must be able to be executed on other machines than the master. There are two ways to add support for remoting for a SCM, either through a third party library or interacting with a command-line client. Depending on what type of interaction the SCM plugin uses it will deal with remoting in two separate ways.</p>

<h2 id="Remoting-UsingaSCMlibrary">Using a SCM library</h2>

<p>Since all code is being executed on the master machine, the SCM must tell Hudson what code that should be executed on the slave. To do that you need to put the code into a <code>Callable</code> class and supply it to the <code>FilePath.act(Callable)</code> method. </p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
public class CheckoutTask implements FileCallable&lt;Boolean&gt; {
    public Boolean invoke(File workspace, VirtualChannel channel) throws IOException {
        // This here code is executed on the slave.
        // Call the library method to check out the files
        return true;
    }
}
</pre>
</div></div>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
 public boolean checkout(AbstractBuild build, Launcher launcher, FilePath workspace, 
        BuildListener listener, File changelogFile) throws IOException, InterruptedException {  
    CheckoutTask task = new CheckoutTask();
    return workspace.act(task); // The CheckoutTask.invoke() method is now invoked
}
</pre>
</div></div>

<h2 id="Remoting-Usingacommand-lineclient">Using a command-line client</h2>

<p>The <code>Launcher</code> class hides the difference between running programs locally vs remotely.</p>

<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">
 public boolean checkout(AbstractBuild build, Launcher launcher, FilePath workspace, 
        BuildListener listener, File changelogFile) throws IOException, InterruptedException {
    String[] cmd = new String[2];
    cmd[0] = &quot;scm-tool&quot;;
    cmd[1] = &quot;checkout&quot;;
    int cmdResult = launcher.launch(cmd, new String[0], null, listener.getLogger(), workspace).join();
    return (cmdResult == 0);
}
</pre>
</div></div>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:09</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
