<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : DX APM Jenkins Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : DX APM Jenkins Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (srikns)</span>, last modified by <span class='editor'> Unknown User (pramodanarase)</span> on Sep 05, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>DX APM Jenkins Plugin<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View CA-APM <a href="https://plugins.jenkins.io/ca-apm" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
Allows users to collect CA APM performance data and publish it in Jenkins and allows the users to publish build number, status etc into CA-APM APM Team Center(ATC)<br/></p><p><br/><style type='text/css'>/*<![CDATA[*/
div.rbtoc1631020917648 {padding: 0px;}
div.rbtoc1631020917648 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1631020917648 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1631020917648'>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-CAAPMPlugin2.xandlater'>CA APM Plugin 2.x and later</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-Features'>Features</a></li>
<li><a href='#DXAPMJenkinsPlugin-Requirements'>Requirements</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-Jenkins'>Jenkins</a></li>
</ul>
</li>
<li><a href='#DXAPMJenkinsPlugin-CAAPMJenkinsplug-inPackaging'>CA APM Jenkins plug-in Packaging</a></li>
<li><a href='#DXAPMJenkinsPlugin-CAAPMAgentSetup'>CA APM Agent Setup</a></li>
<li><a href='#DXAPMJenkinsPlugin-InstalltheJenkinsplug-in'>Install the Jenkins plug-in</a></li>
<li><a href='#DXAPMJenkinsPlugin-UsingtheJenkinsPipelineSyntaxtoRuntheCAAPMJenkinsplug-in'>Using the Jenkins Pipeline Syntax to Run the CA APM Jenkins plug-in</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-Blazemeter'>Blazemeter</a></li>
<li><a href='#DXAPMJenkinsPlugin-JMeter'>JMeter</a></li>
</ul>
</li>
<li><a href='#DXAPMJenkinsPlugin-PluginConfiguration'>Plugin Configuration</a></li>
<li><a href='#DXAPMJenkinsPlugin-DefaultComparisonStrategiesandOutputHandlerAvailablewiththeplug-in'>Default Comparison Strategies and Output Handler Available with the plug-in</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-ListofAvailableComparison-Strategies'>List of Available Comparison-Strategies</a></li>
<li><a href='#DXAPMJenkinsPlugin-MeanLatencyComparisonStrategy'>Mean Latency Comparison Strategy</a></li>
<li><a href='#DXAPMJenkinsPlugin-StaticThresholdStrategy'>Static Threshold Strategy</a></li>
<li><a href='#DXAPMJenkinsPlugin-ListofAvailableOutput-Handlers'>List of Available Output-Handlers</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-PlainTextEmailReportOutputHandler'>Plain Text Email Report Output Handler</a></li>
<li><a href='#DXAPMJenkinsPlugin-JSONFileOutputHandler'>JSON File Output Handler</a></li>
<li><a href='#DXAPMJenkinsPlugin-ChartOutputHandler'>Chart Output Handler</a></li>
<li><a href='#DXAPMJenkinsPlugin-HistogramOutputHandler'>Histogram Output Handler</a></li>
<li><a href='#DXAPMJenkinsPlugin-ComparisonStrategytoOutput-HandlerMapping'>Comparison Strategy to Output-Handler Mapping</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#DXAPMJenkinsPlugin-DXAPMSaaSIntegration'>DX APM SaaS Integration</a></li>
<li><a href='#DXAPMJenkinsPlugin-JenkinsAttributesinAPMTeamCenter'>Jenkins Attributes in APM Team Center</a></li>
<li><a href='#DXAPMJenkinsPlugin-Extendingtheplugin'>Extending the plugin </a></li>
<li><a href='#DXAPMJenkinsPlugin-Troubleshoottheplug-in'>Troubleshoot the plug-in</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-ComparatorPluginExecutionCompletedwithfailures'>Comparator Plugin Execution Completed with failures</a></li>
<li><a href='#DXAPMJenkinsPlugin-MessageprintedonJenkinsConsoleOutput'>Message printed on Jenkins Console Output</a></li>
<li><a href='#DXAPMJenkinsPlugin-ComparisonStrategyhandlerfor&lt;strategy_name&gt;isnotdefined'>Comparison Strategy handler for &lt;strategy_name&gt; is not defined</a></li>
<li><a href='#DXAPMJenkinsPlugin-NoAgentSpecifier(s)definedfor&lt;strategy_name&gt;'>No Agent Specifier(s) defined for &lt;strategy_name&gt;</a></li>
<li><a href='#DXAPMJenkinsPlugin-Nometricspecifierdefinedfor&lt;strategy_name&gt;'>No metric specifier defined for &lt;strategy_name&gt;</a></li>
<li><a href='#DXAPMJenkinsPlugin-Warning:Nooutputhandler(s)mappedto&lt;strategy_name&gt;'>Warning: No output handler(s) mapped to &lt;strategy_name&gt;</a></li>
<li><a href='#DXAPMJenkinsPlugin-Nooutput-handler(s)definedintheconfiguration,henceexitingExitingmeanswillstoprunningthepluginfurther'>No output-handler(s) defined in the configuration, hence exiting Exiting means will stop running the plugin further</a></li>
<li><a href='#DXAPMJenkinsPlugin-classisnotpresentintheclasspath'>class is not present in the classpath</a></li>
<li><a href='#DXAPMJenkinsPlugin-Errorinexecutingcomparisonstrategy&lt;strategy_name&gt;'>Error in executing comparison strategy &lt;strategy_name&gt;</a></li>
<li><a href='#DXAPMJenkinsPlugin-ErrorinexecutingOutputstrategy&lt;strategy_name&gt;'>Error in executing Output strategy &lt;strategy_name&gt;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#DXAPMJenkinsPlugin-Changelog'>Changelog</a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-Release2.1.2(September5,2019)'>Release 2.1.2 (September 5, 2019) </a></li>
<li><a href='#DXAPMJenkinsPlugin-Release2.1.1(August23,2019)'>Release 2.1.1 (August 23, 2019) </a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-KnownIssues'>Known Issues</a></li>
</ul>
</li>
<li><a href='#DXAPMJenkinsPlugin-Release2.1(August22,2019)'>Release 2.1 (August 22, 2019) </a>
<ul class='toc-indentation'>
<li><a href='#DXAPMJenkinsPlugin-KnownIssues:'>Known Issues: </a></li>
<li><a href='#DXAPMJenkinsPlugin-Note:Pleaseuserelease2.1.2forAPM10.x,DXAPM11.1andDXSaaS'>Note: Please use release 2.1.2 for APM 10.x , DX APM 11.1 and DX SaaS</a></li>
</ul>
</li>
<li><a href='#DXAPMJenkinsPlugin-Release2.0(May27,2019)'>Release 2.0 (May 27, 2019)</a></li>
<li><a href='#DXAPMJenkinsPlugin-Release2.0-beta-0(January25,2019)'>Release 2.0-beta-0 (January 25, 2019)</a></li>
</ul>
</li>
</ul>
</div></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>For ca-apm 1.x please refer to <a href="CA-APM-Plugin-1.x.html">CA APM Plugin 1.x</a></p></div></div><h1 id="DXAPMJenkinsPlugin-CAAPMPlugin2.xandlater">CA APM Plugin 2.x and later</h1><p><br/>Jenkins is a tool to automate continuous delivery pipelines. A most common use of Jenkins is to run tests against the new builds of an application. The CA APM Jenkins plug-in extension automates comparing the performance of builds. The plug-in provides abstraction to run the plug-in after any LoadGenerator, define multiple comparison strategies and define multiple output handlers.</p><ul><li><strong>LoadGenerator</strong> :You can use any load generators example - Jmeter and CA Balzemeter</li><li><strong>Comparison Strategies:</strong> CA Jenkins plugin supports the following comparison strategies:<ul><li><strong>Mean Latency:</strong> Compares the average value of a metric of a transaction with its corresponding value of benchmark build.</li><li><strong>Static Threshold:</strong> Compares the value of the metric with the corresponding threshold value defined in the configuration.</li></ul></li><li><strong>Output Handlers:</strong> Email HTML Report, JSON, and Chart Output, Histogram Chart Output</li></ul><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>More Information:</strong></p><ul class='childpages-macro'><li><a href="CA-APM-Plugin-1.x.html">CA APM Plugin 1.x</a></li><li><a href="Configure-the-CA-APM-Jenkins-Plugin-Properties.html">Configure the CA APM Jenkins Plugin Properties</a></li><li><a href="Extending-the-CA-APM-Jenkins-Plugin.html">Extending the CA APM Jenkins Plugin</a></li><li><a href="Please-delete-this-page--.html">Please delete this page -</a></li></ul></div></div><h2 id="DXAPMJenkinsPlugin-Features">Features</h2><ul><li>Ability to fetch multiple metrics using regex as KPI for tracking</li><li>Ability to configure multiple fail conditions<ul><li>Metric A less than or greater than a constant value OR</li><li>Metric A in comparison to Metric B</li></ul></li><li>Ability to send notification via Email (if smtp server is configured)</li><li>Ability to view KPI's per build or cross build dashboard in Jenkins&amp;nbsp</li><li>Ability to decorate APM Team Center 10.1 nodes using custom attributes like build status, number and date</li><li>Ability to just notify via email: If &quot;build.fail&quot; property is false the build will NOT be marked as fail even if the conditions are met but only a notification will be sent</li><li>Ability Jump to Webview in context (for both metric and time range) from build or x-build dashboard</li></ul><p><br/></p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong style="text-align: left;">Note:</strong><span style="color: rgb(51,51,51);"> 2.0 is not APM 11.1 compatible.</span></p></div></div><h2 id="DXAPMJenkinsPlugin-Requirements">Requirements</h2><h3 id="DXAPMJenkinsPlugin-Jenkins">Jenkins</h3><p>Jenkins version 2.60.1 or newer</p><h2 id="DXAPMJenkinsPlugin-CAAPMJenkinsplug-inPackaging">CA APM Jenkins plug-in Packaging</h2><p>The CA APM Jenkins plug-in package contains the following folder and files:</p><ul><li>Properties<ul><li><code>performance-comparator.properties</code></li></ul></li><li>Repo<ul><li><code>ca-apm-jenkins.hpi (HPI file)</code></li><li><code><span>ca-apm</span>-api.jar</code></li><li><code><span>ca-apm</span>-core.jar</code></li><li><code><span>ca-apm</span>-default-strategy.jar</code></li></ul></li><li>javadoc directory - Contains java documentation about comparison-strategy, output-handler, and available helper utilities</li></ul><h2 id="DXAPMJenkinsPlugin-CAAPMAgentSetup">CA APM Agent Setup</h2><p>Agent need to be configured for the Application for which user running the JMeter and Blazemeter<span style="letter-spacing: 0.0px;"><a class="external-link" href="https://docops.ca.com/ca-application-performance-management-digital-experience-insights-from-ca/ga/en/implementing-agents/configure-and-download-an-agent-package-for-ca-digital-experience-insights" style="text-decoration: none;" rel="nofollow"> </a> . For More info on <span><a class="external-link" href="https://docops.ca.com/ca-application-performance-management-digital-experience-insights-from-ca/ga/en/implementing-agents/configure-and-download-an-agent-package-for-ca-digital-experience-insights" style="text-decoration: none;" rel="nofollow">Configure and Download an Agent</a></span></span></p><p><span style="letter-spacing: 0.0px;">You must configure the application server that you are instrumenting to include the path to the agent primary </span><code style="letter-spacing: 0.0px;">.jar</code><span style="letter-spacing: 0.0px;"> file (</span><code style="letter-spacing: 0.0px;">Agent.jar</code><span style="letter-spacing: 0.0px;">)  Usually, you configure the path by editing the application server startup script, then restarting the application server. When the application server restarts, the Java Agent instruments the classes discovered for default components of the JVM and application environment. The specific steps that are involved depend on the application server.  find additional info </span><a class="external-link" href="https://docops.ca.com/ca-application-performance-management-digital-experience-insights-from-ca/ga/en/implementing-agents/java-agent/install-the-java-agent/configure-application-server-to-use-the-java-agent" style="text-decoration: none;" rel="nofollow">Configure Application Server to Use the Java Agent</a><span style="letter-spacing: 0.0px;">.</span></p><h2 id="DXAPMJenkinsPlugin-InstalltheJenkinsplug-in">Install the Jenkins plug-in</h2><p>This section describes the steps to install the plug-in. You can install the Jenkins plug-in from the Jenkin's Manage Plug-ins page.</p><p><strong>Follow these steps:</strong></p><ol><li>Select <strong>Jenkins</strong>, <strong>Manage Jenkins</strong>, <strong>Manage</strong> <strong>plugins</strong>.<br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="attachments/96076164/165582486.png" data-image-src="attachments/96076164/165582486.png" data-unresolved-comment-count="0" data-linked-resource-id="165582486" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-1-11_9-28-13.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="96076164" data-linked-resource-container-version="103"></span><br/>The Manage Plug-in page opens.</li><li>Select the <strong>Advanced</strong> tab.<br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/96076164/165582487.png" data-image-src="attachments/96076164/165582487.png" data-unresolved-comment-count="0" data-linked-resource-id="165582487" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-1-11_9-28-57.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="96076164" data-linked-resource-container-version="103"></span><br/>The HTTP Proxy Configuration page opens.</li><li><p>Browse and upload the performance-comparator-jenkins.hpi file available in the Repo directory.<br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="196" src="attachments/96076164/165582407.png" data-image-src="attachments/96076164/165582407.png" data-unresolved-comment-count="0" data-linked-resource-id="165582407" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-1-10_12-33-14.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="96076164" data-linked-resource-container-version="103"></span><br/>Wait for the installation to complete.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>Note:</strong> Ensure that no jobs are running</p></div></div></li><li>Restart the Jenkins when installation is complete.</li></ol><h2 id="DXAPMJenkinsPlugin-UsingtheJenkinsPipelineSyntaxtoRuntheCAAPMJenkinsplug-in">Using the Jenkins Pipeline Syntax to Run the CA APM Jenkins plug-in</h2><p>  Jenkins job can be configured with any load generator to generate the load on the application, as below, before running the ca-apm plugin. </p><p>  Example : </p><h3 id="DXAPMJenkinsPlugin-Blazemeter">Blazemeter</h3><p><br/></p><p><strong>To use BlazeMeter in pipeline syntax you need to have</strong> <a href="BlazeMeter-Plugin.html">BlazeMeter Plugin</a><br/><br/></p><p><strong>Please refer the below sample pipeline Blazemeter script from APM 10.x.</strong></p><div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><colgroup><col/></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="confluenceTd"><p style="text-align: left;"><code class="java plain" style="text-align: left;">pipeline {</code><br/><code class="java spaces" style="text-align: left;"> </code><code class="java plain" style="text-align: left;">agent any</code><br/><code class="java spaces" style="text-align: left;"> </code><code class="java plain" style="text-align: left;">stages {</code><br/><code class="java spaces" style="text-align: left;">    </code><code class="java plain" style="text-align: left;">stage(</code><code class="java string" style="text-align: left;">'Blazemeter'</code><code class="java plain" style="text-align: left;">){</code><br/><code class="java spaces" style="text-align: left;">        </code><code class="java plain" style="text-align: left;">steps{</code><br/><code class="java spaces" style="text-align: left;">           </code><code class="java plain" style="text-align: left;">script {</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">loadGeneratorName = env.STAGE_NAME;</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">loadGeneratorStartTime = System.currentTimeMillis();</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">blazeMeterTest credentialsId:</code><code class="java string" style="text-align: left;">'&lt;credentials_id&gt;'</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">serverUrl:</code><code class="java string" style="text-align: left;">'<a href="https://blazemeter.ca.com/" style="text-decoration: none;text-align: left;" class="external-link" rel="nofollow">https://blazemeter.ca.com</a>'</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">testId:</code><code class="java string" style="text-align: left;">'&lt;test_id&gt;'</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">notes:</code><code class="java string" style="text-align: left;">''</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">sessionProperties:</code><code class="java string" style="text-align: left;">''</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">jtlPath:</code><code class="java string" style="text-align: left;">''</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">junitPath:</code><code class="java string" style="text-align: left;">''</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">getJtl:</code><code class="java keyword" style="text-align: left;">false</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">getJunit:</code><code class="java keyword" style="text-align: left;">false</code><br/><code class="java spaces" style="text-align: left;">            </code><code class="java plain" style="text-align: left;">loadGeneratorEndTime = System.currentTimeMillis();</code></p><p style="text-align: left;">                         map = [jenkinsPluginName: &quot;CAAPM&quot;];<br/><code class="java spaces" style="text-align: left;">          </code><code class="java plain" style="text-align: left;">}</code><br/><code class="java spaces" style="text-align: left;">        </code><code class="java plain" style="text-align: left;">}</code><br/><code class="java spaces" style="text-align: left;">    </code><code class="java plain" style="text-align: left;">}</code><br/><code class="java spaces" style="text-align: left;">    </code><code class="java plain" style="text-align: left;">stage(</code><code class="java string" style="text-align: left;">'CAAPMPerformanceComparator'</code><code class="java plain" style="text-align: left;">) {</code><br/><code class="java spaces" style="text-align: left;">        </code><code class="java plain" style="text-align: left;">steps { </code><br/><code class="java spaces" style="text-align: left;">             </code><code class="java plain" style="text-align: left;">caapmplugin performanceComparatorProperties:<span> </span></code><code class="java string" style="text-align: left;">&quot;${env.WORKSPACE}/properties/performance-comparator.properties&quot;</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">             </code><code class="java plain" style="text-align: left;">loadGeneratorStartTime:<span> </span></code><code class="java string" style="text-align: left;">&quot;$loadGeneratorStartTime&quot;</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">             </code><code class="java plain" style="text-align: left;">loadGeneratorEndTime:<span> </span></code><code class="java string" style="text-align: left;">&quot;$loadGeneratorEndTime&quot;</code><code class="java plain" style="text-align: left;">,</code><br/><code class="java spaces" style="text-align: left;">             </code><code class="java plain" style="text-align: left;">loadGeneratorName:<span> </span></code><code class="java string" style="text-align: left;">&quot;$loadGeneratorName&quot;,</code></p><p style="text-align: left;">                            attribsStr: &quot;$map&quot;;<br/><code class="java spaces" style="text-align: left;">        </code><code class="java plain" style="text-align: left;">}</code><br/><code class="java spaces" style="text-align: left;">    </code><code class="java plain" style="text-align: left;">}  </code><br/><code class="java spaces" style="text-align: left;"> </code><code class="java plain" style="text-align: left;">}</code><br/><code class="java plain" style="text-align: left;">}</code></p></td></tr></tbody></table></div><h3 id="DXAPMJenkinsPlugin-JMeter">JMeter</h3><p><br/></p><p><strong>Sample pipeline scripts with JMeter for APM 10.x</strong></p><p>    </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">pipeline {   
   agent any     
   stages {
	stage(&#39;JMeter&#39;){ 
		steps{   
            script {
                 loadGeneratorName = env.STAGE_NAME;
                 loadGeneratorStartTime = System.currentTimeMillis();
                 sh &quot;${env.WORKSPACE}\\&lt;jmeter_home&gt;\\bin\\jmeter.sh -n -t &lt;jmx_file_path&gt;&quot;
                 loadGeneratorEndTime = System.currentTimeMillis();
                map = [jenkinsPluginName: &quot;CAAPM&quot;];
            }              
        }
    }            
   stage(&#39;CAAPMPerformanceComparator&#39;) {
      steps {  
           caapmplugin performanceComparatorProperties:&quot;${env.WORKSPACE}/properties/performance-comparator.properties&quot;,
           loadGeneratorStartTime: &quot;$loadGeneratorStartTime&quot;,
           loadGeneratorEndTime: &quot;$loadGeneratorEndTime&quot;,
           loadGeneratorName: &quot;$loadGeneratorName&quot;,
           attribsStr: &quot;$map&quot;; 

     }
   }   
  }
}</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><strong>Note:</strong> Each Jenkins job will be binded with the parameters  loadGeneratorStartTime, loadGeneratorEndTime of the Load Generator and the same parameters will be passed to the plugin.</p></div></div><p><br/></p><p><strong>Follow these steps:</strong></p><ol><li>Add the predefined stage in your existing pipeline job.</li><li>Run the Jenkins job.</li></ol><p>Important: The Jenkins plug-in and the properties files must be in the same machine.</p><h2 id="DXAPMJenkinsPlugin-PluginConfiguration">Plugin Configuration</h2><p>Configure properties in performance-comparator.properties file.</p><p>Download the performance-comparator.properties file from  http://repo.jenkins-ci.org/releases/org/jenkins-ci/plugins/ca-apm/ca-apm-dist/&lt;version&gt;/ca-apm-dist-&lt;version&gt;.zip</p><p>Please refer the <a href="Configure-the-CA-APM-Jenkins-Plugin-Properties.html">Configure the CA APM Jenkins Plugin Properties</a></p><h2 id="DXAPMJenkinsPlugin-DefaultComparisonStrategiesandOutputHandlerAvailablewiththeplug-in">Default Comparison Strategies and Output Handler Available with the plug-in</h2><p>The plug-in has the following built-in Comparison Strategies and Output Handlers.</p><h3 id="DXAPMJenkinsPlugin-ListofAvailableComparison-Strategies">List of Available Comparison-Strategies</h3><p>By default the following strategies are executed:</p><ul><li>MeanLatencyStrategy </li><li>staticThresholdStrategy</li></ul><p>If you do not want to execute the default strategy, remove the corresponding strategy name from <code>comparisonstrategies.list</code> property value list.</p><p>For example, for meanLatencyStrategy, it can be any RegEx like *Frontend.*Health: Average Response Time \\(ms\\). Do not remove Health: Average Response Time \\(ms\\), else it looses its logical meaning.</p><p>By default, the following comparison-strategies are available with the plug-in:</p><h3 id="DXAPMJenkinsPlugin-MeanLatencyComparisonStrategy">Mean Latency Comparison Strategy</h3><p>The strategy compares the average value of the metric between current build and benchmark build with threshold of five percentage. You can set a custom value for the &lt;metricName&gt;<code>.threshold</code> property. The following code shows the sample configuration:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">#MeanLatency Comparison-Strategy
#threshold value, e.g.,2. the build will fail,if the build.fail property value is set true and if the metric&#39;s avg value difference
#between current and benchmark build cross this value
cpu.threshold=5
#agent name of the application,  e.g., .* means any agent and multiple agent specifiers can be given with comma separation
cpu.agentspecifier=.*
#metric path , it will be specific to agent, application. e.g, .*CPU.*Processor 0:Utilization % \\(aggregate\\), multiple metric specifiers can be given with comma separation
cpu.metricspecifier=.*CPU.*Processor 0:Utilization % \\(aggregate\\)
#comparator class name excluding the &quot;ComparisonStrategy&quot;, e.g., MeanLatency for MeanLatencyComparisonStrategy
cpu.comparator=MeanLatency
#list of output handlers for this strategy. available output handlers : plaintextemail,jsonfilestore,chartoutputhtml,histogramoutputhtml
cpu.outputhandlers=plaintextemail,jsonfilestore,chartoutputhtml,histogramoutputhtml</pre>
</div></div><h3 id="DXAPMJenkinsPlugin-StaticThresholdStrategy"><br/>Static Threshold Strategy</h3><p>The strategy compares your Concurrent Invocation metric of transactions of the current build with the given threshold value (2).</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">#StaticThreshold Comparison-Strategy
#threshold value,e.g., 2.  it will be compared with the average value of metric for current  build
concurrentinvocations.threshold=2
#agent name of the application, e.g., .*  and multiple agent specifiers can be given with comma separation
concurrentinvocations.agentspecifier=.*
#metric path , it will be specific to agent, application. e.g., .*Business Segment.*Health:Concurrent Invocations. multiple metric specifiers can be given with comma separation
concurrentinvocations.metricspecifier=.*Business Segment.*Health:Concurrent Invocations
#comparator class name excluding the &quot;ComparisonStrategy&quot;, e.g., StaticThreshold for StaticThresholdComparisonStrategy
concurrentinvocations.comparator=StaticThreshold
#list of output handlers for this strategy. available output handlers : plaintextemail,jsonfilestore,chartoutputhtml,histogramoutputhtml
concurrentinvocations.outputhandlers=plaintextemail,jsonfilestore,chartoutputhtml,histogramoutputhtml</pre>
</div></div><h3 id="DXAPMJenkinsPlugin-ListofAvailableOutput-Handlers"><br/>List of Available Output-Handlers</h3><p>The plug-in provides the following default output handlers that are mapped to all the following default comparison-strategies in the outputhandlers property. You can remove any or all of the output handlers. The output-handlers should be declared with the below property as below:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">outputhandlers.list=plaintextemail,jsonfilestore,chartoutputhtml,histogramoutputhtml</pre>
</div></div><h4 id="DXAPMJenkinsPlugin-PlainTextEmailReportOutputHandler">Plain Text Email Report Output Handler</h4><p>The handler generates a plain text email comparison report. The report contains the metrics for all the  strategies that are mapped that are in the properties file.</p><h4 id="DXAPMJenkinsPlugin-JSONFileOutputHandler"><br/>JSON File Output Handler</h4><p>The handler generates a JSON report of the average value of the metrics comparison between current build and benchmark build as a percentage.</p><h4 id="DXAPMJenkinsPlugin-ChartOutputHandler"><br/>Chart Output Handler</h4><p>The handler generates a Chart Output of comparison of performance metrics between benchmark build and current build.</p><p>The output is stored in <code>&lt;current_build&gt;/workspace/chartOutput</code> folder. The output html files are in the <code>chartOutput/output</code> folder. The folder contains one file for each comparison-strategy. For Example, If one comparison strategy has six metric paths that are identified, then the output file contains six charts.</p><p><span style="color: rgb(210,73,57);"><br/></span></p><h4 id="DXAPMJenkinsPlugin-HistogramOutputHandler"><span style="color: rgb(210,73,57);">Histogram Output Handler</span></h4><p>The handler generates build to build comparison in histogram style, with the average value of each metric for each build, default it render for 10 builds.</p><h4 id="DXAPMJenkinsPlugin-ComparisonStrategytoOutput-HandlerMapping">Comparison Strategy to Output-Handler Mapping</h4><p>The mapping lets you receive the output from only those <code>comparison-strategies</code> which are mapped to output-handler using the <code>outputHandlers</code> property. The communication between a comparison-strategy and output-handler happens using the Data Structure T within <code>StrategyResult Entity.</code>Map the comparison-strategy and output-handler using the same data format. If the mapping is incorrect, it is not processed by Output-Handler and plug-in raises a warning.</p><p>The default implementation of T is DefaultStrategyResult provided with the plug-in. All the default strategies and output-handlers communicate using the <code>StrategyResult&lt;DefaultStrategyResult&gt;</code> Entity.</p><h2 id="DXAPMJenkinsPlugin-DXAPMSaaSIntegration">DX APM SaaS Integration</h2><div class="confluence-information-macro confluence-information-macro-information"><p class="title">DX APM SaaS Integration</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>In &quot;performance-comparator.properties&quot; file add the DX APM SaaS details </p><p>Example </p><p>em.url=<a href="https://63922.dxi-na1.saas.broadcom.com/" class="external-link" rel="nofollow">https://63922.dxi-na1.saas.broadcom.com/</a><br/>em.authtoken= iLCJhbGciOiJFUzI1NiJ9.eyJzdWIiOiJQQVVMTy1GRVJSRUlSQUBIQ0wuQ09NIiwiZHluZXhwIjp0cnVlLCJ0aWQiOjI3Niw<br/>em.timezone=CDT<br/>em.webview.port=443</p></div></div><h2 id="DXAPMJenkinsPlugin-JenkinsAttributesinAPMTeamCenter">Jenkins Attributes in APM Team Center</h2><p>With the help of Jenkins plug-in, you can view the following Jenkins attributes as Custom attributes to each application vertex:</p><ul><li>currentBuildNumber</li><li>benchmarkBuildNumber</li><li>buildStatus</li><li>loadGeneratorStartTime</li><li>loadGeneratorEndTime</li></ul><h2 id="DXAPMJenkinsPlugin-Extendingtheplugin">Extending the plugin </h2><p><span style="color: rgb(51,51,51);">Extending the plug-in lets you add new sub commands to the existing plug-in to perform new tasks. Please refer the <a href="Extending-the-CA-APM-Jenkins-Plugin.html">Extending the CA APM Jenkins Plugin</a> </span></p><h2 id="DXAPMJenkinsPlugin-Troubleshoottheplug-in">Troubleshoot the plug-in</h2><p>This section discusses the error message that you see on your screen, symptom, and solution to resolve the error.</p><h3 id="DXAPMJenkinsPlugin-ComparatorPluginExecutionCompletedwithfailures">Comparator Plugin Execution Completed with failures</h3><p><strong>Symptom:</strong></p><p>The jenkins job fails and detailed specific error is printed on the Jenkins build console.</p><p><strong>Solution:</strong></p><p>Review the comparison-runner.log file that is generated in <code>&lt;current_build&gt;/workspace</code> directory.</p><p><br/></p><h3 id="DXAPMJenkinsPlugin-MessageprintedonJenkinsConsoleOutput">Message printed on Jenkins Console Output</h3><p>Input Properties file defined in parameters does not exist, please check</p><p><strong>Symptom:</strong></p><p>Jenkins plug-in run fails because the specific configuration file does not exist.</p><p><strong>Solution:</strong></p><p>Place the file in the specified location as printed in the error message and run the plug-in.</p><h3 id="DXAPMJenkinsPlugin-ComparisonStrategyhandlerfor&lt;strategy_name&gt;isnotdefined">Comparison Strategy handler for &lt;strategy_name&gt; is not defined</h3><p><strong>Symptom:</strong></p><p>There is no value against the property comparator which is the comparison strategy handler.</p><p><strong>Solution:</strong></p><p>Provide the complete qualified class name of the comparison strategy handler.</p><h3 id="DXAPMJenkinsPlugin-NoAgentSpecifier(s)definedfor&lt;strategy_name&gt;">No Agent Specifier(s) defined for &lt;strategy_name&gt;</h3><p><strong>Symptom:</strong></p><p>Values are not specified against agentspecifier for a given comparison strategy.</p><p><strong>Solution:</strong></p><p>Provide at least one agent-specifier regular expression, at least .*</p><h3 id="DXAPMJenkinsPlugin-Nometricspecifierdefinedfor&lt;strategy_name&gt;">No metric specifier defined for &lt;strategy_name&gt;</h3><p><strong>Symptom:</strong></p><p>Value is not specified against metricspecifier for a given comparison strategy.</p><p><strong>Solution:</strong></p><p>Provide a qualified correct regular expression for metric specifier using the following syntax:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Business Segment\|&lt;appName&gt;\|[^|]+\|Health:Average Response Time \(ms\)</pre>
</div></div><h3 id="DXAPMJenkinsPlugin-Warning:Nooutputhandler(s)mappedto&lt;strategy_name&gt;">Warning: No output handler(s) mapped to &lt;strategy_name&gt;</h3><p><strong>Symptom:</strong></p><p>The given comparison strategy is unmapped to any output-handler, so its output is not used anywhere.</p><p><strong>Solution:</strong></p><p>Either comment this comparison-strategy or assign a relevant output-handler to this comparison-strategy.</p><h3 id="DXAPMJenkinsPlugin-Nooutput-handler(s)definedintheconfiguration,henceexitingExitingmeanswillstoprunningthepluginfurther">No output-handler(s) defined in the configuration, hence exiting Exiting means will stop running the plugin further</h3><p><strong>Symptom:</strong></p><p>No output handlers are mentioned against the outputhandlers list.</p><p><strong>Solution:</strong></p><p>Provide at least one output-handler, which is mapped to at least one comparison-strategy.</p><h3 id="DXAPMJenkinsPlugin-classisnotpresentintheclasspath">class is not present in the classpath</h3><p><strong>Symptom:</strong></p><p>The specified class is not present inside a jar in the extensions directory that is defined in the <code>performance-comparator.properties</code> file.</p><p><strong>Solution:</strong></p><p>Check if the specified class is present in the configured extensions directory.</p><h3 id="DXAPMJenkinsPlugin-Errorinexecutingcomparisonstrategy&lt;strategy_name&gt;">Error in executing comparison strategy &lt;strategy_name&gt;</h3><p><strong>Symptom:</strong></p><p>Detailed reason is present in comparison-runner.log file present in workspace current build directory.</p><p><strong>Solution:</strong></p><p>Check for detailed error and act appropriately.</p><h3 id="DXAPMJenkinsPlugin-ErrorinexecutingOutputstrategy&lt;strategy_name&gt;">Error in executing Output strategy &lt;strategy_name&gt;</h3><p><strong>Symptom:</strong></p><p>Detailed reason is present in comparison-runner.log file present in the <code>&lt;current_build&gt;/workspace</code> directory.</p><p><strong>Solution:</strong></p><p>Check for detailed error and act appropriately.</p><p><br/></p><h1 id="DXAPMJenkinsPlugin-Changelog">Changelog</h1><h3 id="DXAPMJenkinsPlugin-Release2.1.2(September5,2019)">Release 2.1.2 (September 5, 2019) </h3><ul><li>Addressed the issue for DX APM Links from output handlers</li><li>Addressed Custom Attributes in ATC</li></ul><h3 id="DXAPMJenkinsPlugin-Release2.1.1(August23,2019)">Release 2.1.1 (August 23, 2019) </h3><ul><li>Added Support for DX APM 11.1 and DX SaaS</li><li>Code Changes to support for API changes in latest version of DX APM 11.1 and DX SaaS</li><li>Code changes to support sending events to OI</li><li>Publish SCM(source code management) parameters as Attributes</li><li>Compatibility with APM 10.x releases</li><li>Sev 1 issue of release 2.1 is addressed</li></ul><h4 id="DXAPMJenkinsPlugin-KnownIssues">Known Issues</h4><ul><li>DXAPM URL link broken </li><li>Update of Custom Attributes in ATC</li></ul><h3 id="DXAPMJenkinsPlugin-Release2.1(August22,2019)">Release 2.1 (August 22, 2019) </h3><h4 id="DXAPMJenkinsPlugin-KnownIssues:">Known Issues: </h4><ul><li><span style="color: rgb(34,34,34);">Sev1 : Error while fetching BuildPerformanceData</span></li></ul><h4 id="DXAPMJenkinsPlugin-Note:Pleaseuserelease2.1.2forAPM10.x,DXAPM11.1andDXSaaS">Note:<span style="color: rgb(34,34,34);"> Please use release 2.1.2 for APM 10.x , DX APM 11.1 and DX SaaS</span></h4><h3 id="DXAPMJenkinsPlugin-Release2.0(May27,2019)">Release 2.0 (May 27, 2019)</h3><ul><li>2.0 release with reading load generator time from Jenkins job phase</li></ul><h3 id="DXAPMJenkinsPlugin-Release2.0-beta-0(January25,2019)">Release 2.0-beta-0 (January 25, 2019)</h3><ul><li>Initial release for 2.x</li></ul><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305182.jpg">JenkinsConfig.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305170.jpg">Jenkins1.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305171.jpg">Jenkins2.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305172.jpg">Jenkins3.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305173.jpg">JenkinsEmail.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305174.jpg">JenkinsATC.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305184.jpg">JenkinsConfig.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305183.jpg">JenkinsConfigSmall.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305185.jpg">JenkinsConfig.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305186.jpg">JenkinsConfig.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305187.jpg">JenkinsConfig.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305169.jpg">JenkinsConfig.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305188.jpg">JenkinsConfig1.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305189.png">JenkinsConfig2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305190.jpg">JenkinsBuildDash.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305191.png">JenkinsConfig4.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305192.jpg">Jenkins21.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305193.jpg">Jenkins31.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/96305194.jpg">JenkinsEmail1.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/165582405.png">image2019-1-10_12-15-59.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/165582407.png">image2019-1-10_12-33-14.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/165582486.png">image2019-1-11_9-28-13.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076164/165582487.png">image2019-1-11_9-28-57.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:21</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
