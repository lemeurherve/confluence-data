<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : SLOCCount Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : SLOCCount Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (npiguet)</span>, last modified by <span class='editor'> Unknown User (imarinkov)</span> on Dec 22, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View SLOCCount <a href="https://plugins.jenkins.io/sloccount" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
This plug-in generates trend report for <a href="http://www.dwheeler.com/sloccount/" class="external-link" rel="nofollow">SLOCCount</a> and <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">cloc</a> open source tools, that count number of code lines written in many programming languages.</p><h1 id="SLOCCountPlugin-Description">Description</h1><p>The SLOCCount plug-in scans for <a href="http://www.dwheeler.com/sloccount/" class="external-link" rel="nofollow">SLOCCount</a> or <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">cloc</a> report files in the build workspace directory and reports the number of lines they found.</p><p>The following features are provided by this plug-in:</p><ul><li>Parsing of reports generated by <a href="http://www.dwheeler.com/sloccount/" class="external-link" rel="nofollow">SLOCCount</a> tool.</li><li>Parsing of reports generated by <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">cloc</a> tool.</li><li>Configuration of the files to scan after a build.</li><li>Trend reports showing the number of lines per language.</li><li>Trend reports showing the number of added or deleted lines per language.</li><li>Overview of the lines per file, folder or language.</li><li><a href="Dashboard-View.html">Dashboard View</a> portlet showing number of lines, files and languages per job.</li><li>Remote access API (<a href="https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API" class="external-link" rel="nofollow">REST API</a>).</li><li>Works with any project/job type.</li></ul><p>This plug-in is developed and maintained by Nicolas Piguet. Please use the <a href="Mailing-Lists.html">Mailing Lists</a> or <a href="http://issues.jenkins-ci.org/" class="external-link" rel="nofollow">issue tracker</a> to ask questions, create feature request or bug reports, since I don't read the comment section on this page regularly.</p><h1 id="SLOCCountPlugin-Screenshots">Screenshots</h1><p>

    
    
    

<div class="gallery">
        <table>

                        <tr>
                                    <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/135468590" width="300" height="92" data-image-src="/download/attachments/37322820/sloccount-pipeline.png?version=1&amp;modificationDate=1510481561000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount-pipeline.png" data-linked-resource-id="135468590" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696486" width="300" height="215" data-image-src="/download/attachments/37322820/sloccount_portlet.png?version=1&amp;modificationDate=1390750241000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_portlet.png" data-linked-resource-id="71696486" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696427" width="300" height="230" data-image-src="/download/attachments/37322820/sloccount_summary.png?version=3&amp;modificationDate=1390669930000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_summary.png" data-linked-resource-id="71696427" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696471" width="300" height="146" data-image-src="/download/attachments/37322820/cloc_config.png?version=2&amp;modificationDate=1390669576000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="cloc_config.png" data-linked-resource-id="71696471" data-linked-resource-container-id="37322820">
                </td>
                                </tr>
                    <tr>
                                    <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                </tr>
                        <tr>
                                    <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696472" width="300" height="254" data-image-src="/download/attachments/37322820/cloc_trend.png?version=2&amp;modificationDate=1390653191000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="cloc_trend.png" data-linked-resource-id="71696472" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696430" width="300" height="75" data-image-src="/download/attachments/37322820/sloccount_results_languages.png?version=1&amp;modificationDate=1389474710000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_results_languages.png" data-linked-resource-id="71696430" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696429" width="300" height="126" data-image-src="/download/attachments/37322820/sloccount_results_folders.png?version=1&amp;modificationDate=1389474700000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_results_folders.png" data-linked-resource-id="71696429" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696428" width="300" height="159" data-image-src="/download/attachments/37322820/sloccount_results_files.png?version=1&amp;modificationDate=1389474688000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_results_files.png" data-linked-resource-id="71696428" data-linked-resource-container-id="37322820">
                </td>
                                </tr>
                    <tr>
                                    <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                </tr>
                        <tr>
                                    <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696426" width="300" height="255" data-image-src="/download/attachments/37322820/sloccount_trend.png?version=1&amp;modificationDate=1389474652000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_trend.png" data-linked-resource-id="71696426" data-linked-resource-container-id="37322820">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/37322820/71696425" width="300" height="160" data-image-src="/download/attachments/37322820/sloccount_config.png?version=1&amp;modificationDate=1389474612000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="sloccount_config.png" data-linked-resource-id="71696425" data-linked-resource-container-id="37322820">
                </td>
                                                <td></td>
                                                <td></td>
                                </tr>
                    <tr>
                                    <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td></td>
                                                <td></td>
                                </tr>
             </table>
</div>
</p><h1 id="SLOCCountPlugin-Usage">Usage</h1><p>If you are not sure which type of report files to use, prefer <strong>cloc</strong>. It is able to detect more programming languages than SLOCCount (Scala, Ant, CSS, ...) and is able to count also lines with comments that often contain Javadoc or Doxygen documentation. Cloc is also better portable, SLOCCount requires <a href="https://www.cygwin.com/" class="external-link" rel="nofollow">cygwin</a> or similar environment under MS Windows.</p><p><strong>Never switch between SLOCCount and cloc inside one job.</strong> You would end up with messy trend graph because they name programming languages differently. Delete all affected builds and rebuild the job in such case to fix the issue.</p><h2 id="SLOCCountPlugin-Linux">Linux</h2><ul><li>Install <a href="http://www.dwheeler.com/sloccount/" class="external-link" rel="nofollow">SLOCCount</a> or <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">cloc</a> on the build slave machine. Note they may be present in package repository of your distribution.<ul><li>Debian, Ubuntu, ...<ul><li><code>apt-get install sloccount</code></li><li><code>apt-get install cloc</code></li></ul></li><li>Red Hat, CentOS, Fedora, ...<ul><li><code>yum install sloccount</code></li><li><code>yum install cloc</code></li></ul></li></ul></li><li>For each job configuration page:<ul><li>Add a <strong>execute shell</strong> build step to generate the report files, or create them in your build scripts (Ant, Maven, Make, ...).<ul><li><code>sloccount --duplicates --wide --details [source-folder] &gt; [output-folder]/sloccount.sc</code></li><li><code>cloc --by-file --xml --out=[output-folder]/cloc.xml [source-folder]</code></li></ul></li><li>Activate the checkbox <strong>Publish SLOCCount analysis results</strong> and provide the path to the generated report files.</li></ul></li></ul><h2 id="SLOCCountPlugin-Windows">Windows</h2><h3 id="SLOCCountPlugin-cloc">cloc</h3><ul><li>Download and install <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">cloc</a> (<a href="http://sourceforge.net/projects/cloc/files/cloc/" class="external-link" rel="nofollow">cloc.exe</a>) on the build slave machine. Optionally if you have Perl installed, you can run cloc as a standalone Perl Script.</li><li>For each job configuration page:<ul><li>Generate the report files<ul><li><code>cloc.exe --by-file --xml --out=[output-folder]/cloc.xml [source-folder]</code></li><li><code>perl cloc.pl --by-file --xml --out=[output-folder]/cloc.xml [source-folder]</code></li></ul></li><li>Activate the checkbox <strong>Publish SLOCCount analysis results</strong> and provide the path to the generated cloc report.</li></ul></li></ul><h3 id="SLOCCountPlugin-SLOCCount">SLOCCount</h3><p>Since SLOCCount does not run on a native Windows machine the setup for Windows requires additional steps. Most of the setup is explained in detail in the <a href="http://www.dwheeler.com/sloccount/sloccount.html" class="external-link" rel="nofollow">SLOCCount documentation</a>.</p><ul><li>Install <a href="https://www.cygwin.com/" class="external-link" rel="nofollow">Cygwin</a> on the build slave.</li><li>Compile and install SLOCCount within the Cygwin environment.</li><li>For each job configuration page:<ul><li>Add a build step to run Cygwin and SLOCCount. See the ANT example below to learn how to start Cygwin and run SLOCCount from an ANT script.<ul><li><code>/usr/bin/sloccount --duplicates --wide --details [source-folder] &gt;[output-folder]/sloccount.sc</code><br/> You must convert Windows paths that are passed as parameters to SLOCCount utility to Linux/Cygwin style (C:\ becomes /cygdrive/c/).</li></ul></li><li>Convert the SLOCCount results in sloccount.sc back to windows paths.</li><li>Activate the checkbox <strong>Publish SLOCCount analysis results</strong> and provide the path to the generated SLOCCount report.</li></ul></li></ul><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you uses sloccount for multiple jobs sometimes two jobs end at the same time and sloccount is executed simultaneously. This will fail since SLOCCount (by default) uses one temp data folder in $HOME/.slocdata.</p><p>Either change sloccount to not use a temp data directory or change the setup explanation so novice users (like me) are explained to use the --datadir option in order to get a datadir per hudson job.</p><p>This seems to work:<br/> [ -d slocdata ] || mkdir slocdata<br/> sloccount --datadir slocdata --details &quot;your source path&quot; &gt; sloccount.sc</p></div></div><h4 id="SLOCCountPlugin-ANTexampleforWindowsbuild">ANT example for Windows build</h4><p>The target converts Windows paths to Linux style cygdrive paths (C:\ becomes /cygdrive/c/) before SLOCCount runs. The converted paths are passed as environment variables to Cygwin. After SLOCCount has been executed, the results in sloccount.sc are converted back to windows paths.</p><h4 id="SLOCCountPlugin-ANTtarget">ANT target</h4><p>Add this target to your Jenkins build:</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>build.xml</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;target name=&quot;sloccount&quot; depends=&quot;createAllSrc&quot;&gt;
  &lt;script language=&quot;javascript&quot;&gt; &lt;![CDATA[
    function winToCygdrivePath(cygProp, winProp) {
      winPath = project.getProperty(winProp);
      cygPath = winPath.replaceAll(&quot;C:&quot;, &quot;/cygdrive/c&quot;).replace(&#39;\\&#39;, &#39;/&#39;);
      project.setProperty(cygProp, cygPath);
    }
    winToCygdrivePath(&quot;cygdrive.workspace.dir&quot;, &quot;dir.workspace&quot;);
    winToCygdrivePath(&quot;cygdrive.allsrc.dir&quot;, &quot;dir.allsrc&quot;);
    winToCygdrivePath(&quot;cygdrive.build.scripts.dir&quot;, &quot;dir.build.scripts&quot;);
  ]]&gt;&lt;/script&gt;

  &lt;exec executable=&quot;${cygwin.bin}\bash.exe&quot;&gt;
    &lt;arg line=&quot;-li &#39;${cygdrive.build.scripts.dir}/cygwin_sloccount.sh&#39;&quot; /&gt;
    &lt;env key=&quot;SLOCCOUNT_SOURCE_DIR&quot; value=&quot;${cygdrive.allsrc.dir}&quot; /&gt;
    &lt;env key=&quot;SLOCCOUNT_OUTPUT_DIR&quot; value=&quot;${cygdrive.workspace.dir}&quot; /&gt;
  &lt;/exec&gt;

  &lt;replace file=&quot;${dir.workspace}/sloccount.sc&quot; token=&quot;/cygdrive/c&quot; value=&quot;C:&quot; /&gt;
  &lt;replace file=&quot;${dir.workspace}/sloccount.sc&quot; token=&quot;/&quot; value=&quot;\&quot; /&gt;
&lt;/target&gt;
</pre>
</div></div><p>You may have to adjust the paths used in the snippet, if your Jenkins workspace is on another drive than C.</p><h4 id="SLOCCountPlugin-Shellscript">Shell script</h4><p>This shell script is called by Cygwin / ANT.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>cygwin_sloccount.sh</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sloccount --duplicates --wide --details &quot;$SLOCCOUNT_SOURCE_DIR&quot; &gt; &quot;$SLOCCOUNT_OUTPUT_DIR/sloccount.sc&quot;
</pre>
</div></div><h1 id="SLOCCountPlugin-RemoteaccessAPI(RESTAPI)">Remote access API (<a href="https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API" class="external-link" rel="nofollow">REST API</a>)</h1><p>Use the URLs below to access the SLOCCount specific data.</p><p>Description of possibilities</p><ul><li><a href="http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api" class="external-link" rel="nofollow">http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api</a></li></ul><p>Data</p><ul><li><a href="http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/xml" class="external-link" rel="nofollow">http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/xml</a></li><li><a href="http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/xml?depth=1" class="external-link" rel="nofollow">http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/xml?depth=1</a></li><li><a href="http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/json" class="external-link" rel="nofollow">http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/json</a></li><li><a href="http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/json?depth=1" class="external-link" rel="nofollow">http://SERVER/job/JOB_NAME/BUILD_NUMBER/sloccountResult/api/json?depth=1</a></li><li>etc.</li></ul><p>Example of XML data:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>&lt;sloccountReportStatistics&gt;
	&lt;language&gt;
		&lt;files&gt;7&lt;/files&gt;
		&lt;lines&gt;513&lt;/lines&gt;
		&lt;name&gt;xml&lt;/name&gt;
	&lt;/language&gt;
	&lt;language&gt;
		&lt;files&gt;116&lt;/files&gt;
		&lt;lines&gt;8174&lt;/lines&gt;
		&lt;name&gt;java&lt;/name&gt;
	&lt;/language&gt;
	&lt;totalFiles&gt;123&lt;/totalFiles&gt;
	&lt;totalLanguages&gt;2&lt;/totalLanguages&gt;
	&lt;totalLines&gt;8687&lt;/totalLines&gt;
&lt;/sloccountReportStatistics&gt;
</pre>
</div></div><p>Example of JSON data:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>{
	&quot;languages&quot;:
	[
		{&quot;files&quot;:7,&quot;lines&quot;:513,&quot;name&quot;:&quot;xml&quot;},
		{&quot;files&quot;:116,&quot;lines&quot;:8174,&quot;name&quot;:&quot;java&quot;},
	],
	&quot;totalFiles&quot;:123,
	&quot;totalLanguages&quot;:2,
	&quot;totalLines&quot;:8687
}
</pre>
</div></div><h1 id="SLOCCountPlugin-Supportforcloctool">Support for cloc tool</h1><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Parsing of cloc XML reports is supported natively in the plugin from version 1.20.</p></div></div><p><a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">Cloc</a> (Count Lines of Code) is a tool similar to SLOCCount. It provides output to a XML file that can be simply transformed to the SLOCCount format and used in this plugin. Cloc is written in Perl and should be better portable than SLOCCount.</p><p>This howto was created and tested on Debian GNU/Linux, Jenkins 1.447, SLOCCount plugin 1.12, cloc 1.60 and xsltproc 1.1.28.</p><h3 id="SLOCCountPlugin-Installclocandxsltproc">Install cloc and xsltproc</h3><p>Download cloc from <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">http://cloc.sourceforge.net/</a> and install it. You need also a whatever tool for XML transformations (xsltproc used) or you can try <a href="https://gitorious.org/clokins" class="external-link" rel="nofollow">clokins</a> tool (not tested at all). You can install the packages present in your GNU/Linux distribution.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence"># Debian/Ubuntu specific
apt-get install cloc xsltproc
</pre>
</div></div><h3 id="SLOCCountPlugin-ScriptforXSLTtransformation">Script for XSLT transformation</h3><p>Copy-paste the script below and store it to cloc2sloccount.xsl file accessible by your Jenkins server. If you are using master and slave machines, store the script to all slaves where the jobs are executed.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>cloc2sloccount.xsl</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:de=&quot;.&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;
&lt;xsl:output method=&quot;text&quot; version=&quot;4.0&quot; encoding=&quot;iso-8859-1&quot;
  doctype-public=&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  doctype-system=&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;/&gt;

&lt;xsl:template match=&quot;file&quot;&gt;
  &lt;xsl:variable name=&quot;file_path&quot; select=&quot;translate(@name,&#39;\\&#39;,&#39;/&#39;)&quot;/&gt;
  &lt;xsl:variable name=&quot;file_path_part1&quot; select=&quot;substring-after($file_path,&#39;/&#39;)&quot;/&gt;
  &lt;xsl:variable name=&quot;module&quot; select=&quot;substring-before($file_path_part1,&#39;/&#39;)&quot;/&gt;
  &lt;xsl:value-of select=&quot;@code&quot;/&gt;
  &lt;xsl:text&gt;&amp;#09;&lt;/xsl:text&gt;
  &lt;xsl:value-of select=&quot;@language&quot;/&gt;
  &lt;xsl:text&gt;&amp;#09;&lt;/xsl:text&gt;
  &lt;xsl:value-of select=&quot;$module&quot;/&gt;
  &lt;xsl:text&gt;&amp;#09;&lt;/xsl:text&gt;
  &lt;xsl:value-of select=&quot;@name&quot;/&gt;
  &lt;xsl:text&gt;&amp;#13;&amp;#10;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;files&quot;&gt;
&lt;xsl:apply-templates select=&quot;file&quot;/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;cloc_url&quot;&gt;For more details see: &lt;xsl:value-of select=&quot;.&quot;/&gt;
&lt;xsl:text&gt;&amp;#13;&amp;#10;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;cloc_version&quot;&gt;This report has been generated by cloc &lt;xsl:value-of select=&quot;.&quot;/&gt;.&lt;xsl:text&gt;&amp;#13;&amp;#10;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;header&quot;&gt;
&lt;xsl:apply-templates select=&quot;cloc_version&quot;/&gt;
&lt;xsl:apply-templates select=&quot;cloc_url&quot;/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;results&quot;&gt;
&lt;xsl:apply-templates select=&quot;header&quot;/&gt;
&lt;xsl:text&gt;&amp;#13;&amp;#10;&lt;/xsl:text&gt;
&lt;xsl:apply-templates select=&quot;files&quot;/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;/&quot;&gt;
&lt;xsl:apply-templates select=&quot;results&quot;/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</pre>
</div></div><h3 id="SLOCCountPlugin-Executecloc">Execute cloc</h3><p>Change configuration of your job to execute the following shell script. Update the path to the directory where your source files are stored and optionally pass <a href="http://cloc.sourceforge.net/#Options" class="external-link" rel="nofollow">additional parameters</a> to cloc. Then execute XSLT transformation on cloc output to get a SLOCCount compatible report.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cloc --by-file --xml -out=cloc.xml DIRECTORY
xsltproc PATH/TO/cloc2sloccount.xsl cloc.xml &gt; sloccount.sc
</pre>
</div></div><p>Enable SLOCCount publisher, enter path to the generated SLOCCount report and that's all.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail" src="attachments/37322820/71696471.png" data-image-src="attachments/37322820/71696471.png" data-unresolved-comment-count="0" data-linked-resource-id="71696471" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="cloc_config.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="37322820" data-linked-resource-container-version="88"></span> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-thumbnail" src="attachments/37322820/71696472.png" data-image-src="attachments/37322820/71696472.png" data-unresolved-comment-count="0" data-linked-resource-id="71696472" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="cloc_trend.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="37322820" data-linked-resource-container-version="88"></span></p><p> </p><h3 id="SLOCCountPlugin-UsingthepluginwithinaJenkinspipeline">Using the plugin within a Jenkins pipeline</h3><p>Configure your pipeline in a similar way to this example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Jenkinsfile</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: groovy; gutter: true; theme: Confluence" data-theme="Confluence">node(&#39;master&#39;) {
    stage (&quot;Analyse&quot;) {
        sh &#39;sloccount --duplicates --wide --details path-to-code/ &gt; sloccount.sc&#39;
    }
    stage (&quot;Publish reports&quot;) {
        sloccountPublish encoding: &#39;&#39;, pattern: &#39;&#39;
    }
}</pre>
</div></div><p> </p><h1 id="SLOCCountPlugin-KnownIssues">Known Issues</h1><p> <div class="jim-error-message jim-error-message-table">
    <table class="aui">
        <tbody>
                <tr></tr>

        <tr>
                            <th>type</th>
                            <th>key</th>
                            <th>summary</th>
                            <th>priority</th>
                            <th>status</th>
                            <th>resolution</th>
                            <th>created</th>
                            <th>updated</th>
                    </tr>

        <tr>
            <td colspan="8">
                <div class="aui-message aui-message-warning">
                    <p class="message">
                        <span class="icon-in-pdf"></span>
                        Can&#39;t show details. Ask your admin to whitelist this Jira URL.
                    </p>
                     <a class="jira-link" href="https://issues.jenkins-ci.org/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=project%20=%20JENKINS%20AND%20status%20in%20%28Open,%20%22In%20Progress%22,%20Reopened%29%20AND%20component%20=%20&#39;sloccount-plugin&#39;&amp;tempMax=1000&amp;src=confmacro">View these issues in Jira</a>                 </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</p><h1 id="SLOCCountPlugin-ChangeLog">Change Log</h1><h3 id="SLOCCountPlugin-Version1.24(Dec22,2017)">Version 1.24 (Dec 22, 2017)</h3><ul><li>Fixed: Concurrent builds are serialized when publishing (<a href="https://issues.jenkins-ci.org/browse/JENKINS-43658" class="external-link" rel="nofollow">JENKINS-43658</a>)</li></ul><h3 id="SLOCCountPlugin-Version1.23(Nov26,2017)">Version 1.23 (Nov 26, 2017)</h3><ul><li>Fixed: Lines and comments value are inversed in folders tab (<a class="external-link" href="https://issues.jenkins-ci.org/browse/JENKINS-37056" rel="nofollow">JENKINS-37056</a>)</li></ul><h3 id="SLOCCountPlugin-Version1.22(Nov12,2017)">Version 1.22 (Nov 12, 2017)</h3><ul><li>Implemented: Support the new workflow/pipeline model (<a class="external-link" href="https://issues.jenkins-ci.org/browse/JENKINS-35234" rel="nofollow">JENKINS-35234</a>)</li></ul><h3 id="SLOCCountPlugin-Version1.21(Nov3,2015)">Version 1.21 (Nov 3, 2015)</h3><ul><li>Implemented: Get total comment count in SloccountReportStatistics (<a href="https://issues.jenkins-ci.org/browse/JENKINS-31221">JENKINS-31221</a>).<ul><li>Only in cloc based reports, pull request by Jim SERRA.</li></ul></li></ul><h3 id="SLOCCountPlugin-Version1.20(Sep6,2014)">Version 1.20 (Sep 6, 2014)</h3><ul><li>Implemented: Native support for cloc tool (<a href="https://issues.jenkins-ci.org/browse/JENKINS-24602">JENKINS-24602</a>).</li><li>Implemented: Folding help in configuration (<a href="https://issues.jenkins-ci.org/browse/JENKINS-24094">JENKINS-24094</a>).</li><li>Implemented: Clean jelly code (<a href="https://issues.jenkins-ci.org/browse/JENKINS-24093">JENKINS-24093</a>).</li><li>Implemented: Show statistics from last build on main job page (<a href="https://issues.jenkins-ci.org/browse/JENKINS-24021">JENKINS-24021</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.19(Apr15,2014)">Version 1.19 (Apr 15, 2014)</h3><ul><li>Fixed: Error 404 when trying to access language details for &quot;C/C++ Header&quot; (<a href="https://issues.jenkins-ci.org/browse/JENKINS-22597">JENKINS-22597</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.18(Apr5,2014)">Version 1.18 (Apr 5, 2014)</h3><ul><li>Implemented: Should have option to not care about build failure status (<a href="https://issues.jenkins-ci.org/browse/JENKINS-22303">JENKINS-22303</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.17(Apr2,2014)">Version 1.17 (Apr 2, 2014)</h3><ul><li>Unsuccessful.</li></ul><h3 id="SLOCCountPlugin-Version1.16(Mar14,2014)">Version 1.16 (Mar 14, 2014)</h3><ul><li>Fixed: Lazy loaded report details are never released (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21921">JENKINS-21921</a>).</li><li>Fixed: Fix findings from FindBugs static analysis (<a href="https://issues.jenkins-ci.org/browse/JENKINS-22160">JENKINS-22160</a>).</li><li>Implemented: Remote access API (REST API) (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21922">JENKINS-21922</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.15(Feb8,2014)">Version 1.15 (Feb 8, 2014)</h3><ul><li>Fixed: Possibly too wide table on summary page (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21557">JENKINS-21557</a>).</li><li>Fixed: Sorting using Distribution column/graph doesn't work (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21700">JENKINS-21700</a>).</li><li>Implemented: Configurable Graph (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21552">JENKINS-21552</a>).</li><li>Implemented: New Modules panel on report page (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21697">JENKINS-21697</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.14(Jan26,2014)">Version 1.14 (Jan 26, 2014)</h3><ul><li>Implemented: sloccount report formatting on build summary (<a href="https://issues.jenkins-ci.org/browse/JENKINS-13235">JENKINS-13235</a>).</li><li>Implemented: Create a dash-board view portlet that shows the SLOC of the selected projectes (<a href="https://issues.jenkins-ci.org/browse/JENKINS-6876">JENKINS-6876</a>).</li><li>Implemented: add a sloccount portlet to dashboard (<a href="https://issues.jenkins-ci.org/browse/JENKINS-12166">JENKINS-12166</a>).</li><li>Rejected: Support multimodule sloccount report (<a href="https://issues.jenkins-ci.org/browse/JENKINS-13382">JENKINS-13382</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.13(Jan24,2014)">Version 1.13 (Jan 24, 2014)</h3><ul><li>Fixed: Unable to copy the sloccount summary when the job has been executed on a slave with a different OS (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21467">JENKINS-21467</a>).</li><li>Fixed: Link to workspace root directory is not accessible in results (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21500">JENKINS-21500</a>).</li><li>Implemented: Can this plugin support CLOC for even more languages and better Windows support (<a href="https://issues.jenkins-ci.org/browse/JENKINS-10274">JENKINS-10274</a>).<ul><li>Existing information in the task tested, a howto about <a href="http://cloc.sourceforge.net/" class="external-link" rel="nofollow">cloc</a> support written and added to wiki.</li></ul></li></ul><h3 id="SLOCCountPlugin-Version1.12(Jan18,2014)">Version 1.12 (Jan 18, 2014)</h3><ul><li>Fixed: Can't open sloccount table portlet (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21419">JENKINS-21419</a>).<ul><li>Release for MS Windows, all long-term issues with Windows backslashes '\' in paths should be fixed now.</li></ul></li><li>Outdated information about plugin version &lt;= 1.6 removed from wiki to clean it up.</li></ul><h3 id="SLOCCountPlugin-Version1.11(Jan15,2014)">Version 1.11 (Jan 15, 2014)</h3><ul><li>Fixed: Memory consumption is huge (<a href="https://issues.jenkins-ci.org/browse/JENKINS-4769">JENKINS-4769</a>).<ul><li>Changes in data storage that heavily reduces memory consumption and increases performance during a common Jenkins use.</li><li>Stored data now contains statistics per language (just several numbers), full report is lazy-loaded only while it is needed in the results page. Compare with parsing of giant XML that contains information about each source file present in your sandbox multiplied by number of builds just to show a simple trend graph.</li><li>Data format is very different but the code should satisfy a backward compatibility, migration tested with plugin versions 1.8 and 1.10.</li><li>The plugin update will have full impact after builds from a previous version will completely role out and only new data are present.</li></ul></li><li>Fixed: NoClassDefFoundError exception on job configuration page (<a href="https://issues.jenkins-ci.org/browse/JENKINS-19629">JENKINS-19629</a>).</li><li>Fixed: Support for matrix projects (<a href="https://issues.jenkins-ci.org/browse/JENKINS-12816">JENKINS-12816</a>) and IVY projects (<a href="https://issues.jenkins-ci.org/browse/JENKINS-17024">JENKINS-17024</a>).<ul><li>All project types should be supported now.</li><li>Unnecessary dependencies to Maven and FindBugs removed.</li></ul></li><li>Fixed: Summary is missing for the first build (<a href="https://issues.jenkins-ci.org/browse/JENKINS-20646">JENKINS-20646</a>).</li><li>Fixed: Broken link in menu on the job page before the first build (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21174">JENKINS-21174</a>).</li><li>Fixed: Broken differences in build summary for failed builds (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21223">JENKINS-21223</a>).</li><li>Fixed: Possible resource leak in parser (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21229">JENKINS-21229</a>).</li><li>Fixed: Broken HTML code on results page (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21230">JENKINS-21230</a>).</li><li>Fixed: Graphical artifacts in the trend graphs (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21258">JENKINS-21258</a>).</li><li>Implemented: SLOCCount churn graph (<a href="https://issues.jenkins-ci.org/browse/JENKINS-14504">JENKINS-14504</a>).<ul><li>New trend graph with differences in lines count between current and previous build.</li></ul></li><li>Wiki updates - information, screenshots.</li></ul><h3 id="SLOCCountPlugin-Version1.10(Apr16,2013)">Version 1.10 (Apr 16, 2013)</h3><ul><li>fixed java.io.InvalidClassException (<a href="https://issues.jenkins-ci.org/browse/JENKINS-14255">JENKINS-14255</a>).</li><li>Made the plugin applicable for Job Generator jobs.</li></ul><h3 id="SLOCCountPlugin-Version1.8(Jun16,2012)">Version 1.8 (Jun 16, 2012)</h3><ul><li>sloccount trend report only works up to last failed build (<a href="https://issues.jenkins-ci.org/browse/JENKINS-9309">JENKINS-9309</a>).</li><li>SLOCCount plugin fails with Windows/Cygwin SLOCCount execution (<a href="https://issues.jenkins-ci.org/browse/JENKINS-4836">JENKINS-4836</a>).</li></ul><h3 id="SLOCCountPlugin-Version1.7(May19,2012)">Version 1.7 (May 19, 2012)</h3><ul><li>String index out of range (<a href="https://issues.jenkins-ci.org/browse/JENKINS-13775">JENKINS-13775</a>).</li><li>added Japanese localization.</li><li>use commas in numbers for readability (<a href="https://issues.jenkins-ci.org/browse/JENKINS-13235">JENKINS-13235</a>).</li><li>sort lines and files numerically.</li><li>fixed breadcrumb move down.</li></ul><h3 id="SLOCCountPlugin-Version1.6(Oct19,2011)">Version 1.6 (Oct 19, 2011)</h3><ul><li>Allow Maven support</li></ul><h3 id="SLOCCountPlugin-Version1.5(Feb14,2011)">Version 1.5 (Feb 14, 2011)</h3><ul><li>Update link in help</li><li>Translation updates (French, Dutch)</li></ul><h3 id="SLOCCountPlugin-Version1.4(Feb10,2010)">Version 1.4 (Feb 10, 2010)</h3><ul><li>Update code for more recent Hudson</li></ul><h3 id="SLOCCountPlugin-Version1.3(Jul7,2009)">Version 1.3 (Jul 7, 2009)</h3><ul><li>Made to work with distributed builds (<a href="http://www.nabble.com/sloccount-plugin-and-distributed-builds--%3E-exception-td22791316.html" class="external-link" rel="nofollow">patch</a>)</li></ul><h3 id="SLOCCountPlugin-Version1.2(Feb28,2009)">Version 1.2 (Feb 28, 2009)</h3><ul><li>Clicking on the SLOCCount icon in the left sidebar will now take you directly to the last build's detailed sloccount report instead of that build's general main page</li></ul><h3 id="SLOCCountPlugin-Version1.1(Feb24,2009)">Version 1.1 (Feb 24, 2009)</h3><ul><li>Added breadcrumbs to help in the navigation of the result report</li></ul><h3 id="SLOCCountPlugin-Version1.0(Feb20,2009)">Version 1.0 (Feb 20, 2009)</h3><ul><li>Initial release</li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/37519361.png">sloccount-header.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696425.png">sloccount_config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696426.png">sloccount_trend.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696474.png">sloccount_summary.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696428.png">sloccount_results_files.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696429.png">sloccount_results_folders.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696430.png">sloccount_results_languages.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696475.png">cloc_config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696473.png">cloc_trend.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696472.png">cloc_trend.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696476.png">sloccount_summary.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696471.png">cloc_config.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696427.png">sloccount_summary.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/71696486.png">sloccount_portlet.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/37322820/135468590.png">sloccount-pipeline.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:47</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
