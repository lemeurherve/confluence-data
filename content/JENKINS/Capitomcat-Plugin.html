<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Capitomcat Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Capitomcat Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (sunggun)</span>, last modified on Feb 17, 2015
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Capitomcat <a href="https://plugins.jenkins.io/capitomcat" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>


<h2 id="CapitomcatPlugin-Capitomcatis">Capitomcat is</h2>

<p><span style="color: rgb(0,0,0);">Capitomcat plugin deploy the WAR file to multiple remote Tomcat servers using Capitomcat which is Capistrano 3 recipe and library for Tomcat deployment.</span></p>

<p>See also : <a href="http://sunggun-yu.github.io/capitomcat/" class="external-link" rel="nofollow">Capitomcat</a> homepage</p>

<h3 id="CapitomcatPlugin-Andalso,Youdon&#39;tneedtoinstallRubyandCapistrano3onyourJenkinsbox.CapitomcatandCapistrano3arerunningontheJenkinsRubyruntime."><span style="color: rgb(255,0,0);">And also, You don't need to install Ruby and Capistrano 3 on your Jenkins box. Capitomcat and Capistrano 3 are running on the Jenkins Ruby runtime.</span></h3>

<h2 id="CapitomcatPlugin-TestedOSlist">Tested OS list</h2>

<p>Please check the link in below. Capitomcat is tested on a lot of Linux environment. </p>

<p><a href="https://github.com/sunggun-yu/capitomcat-test-vagrant" class="external-link" rel="nofollow">https://github.com/sunggun-yu/capitomcat-test-vagrant</a></p>

<h2 id="CapitomcatPlugin-Capitomcatpluginsupports2waydeployment.">Capitomcat plugin supports 2 way deployment.</h2>


<h3 id="CapitomcatPlugin-Basic">Basic</h3>

<p><span style="color: rgb(0,0,0);">Basic deployment is usual way for Tomcat deployment. Capitomcat will upload the WAR file under your $TOMCAT_HOME/webapps directy.</span></p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/71435287/71696477.png" data-image-src="attachments/71435287/71696477.png" data-unresolved-comment-count="0" data-linked-resource-id="71696477" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="capitomcat_deploy_flow_basic.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span></p>

<p>Basic deployment is the default for Capitomcat deployment.</p>

<p> <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/71435287/71696481.png" data-image-src="attachments/71435287/71696481.png" data-unresolved-comment-count="0" data-linked-resource-id="71696481" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="capitomcat-config-basic.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span></p>

<h3 id="CapitomcatPlugin-WithupdatingContextfile">With updating Context file</h3>

<p><span style="color: rgb(0,0,0);">Also, Capitomcat supports deploment with updating contex.xml file. if you want keep the old release WAR file or give some build number for WAR file, this will be very helpful.</span></p>

<p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/71435287/71696480.png" data-image-src="attachments/71435287/71696480.png" data-unresolved-comment-count="0" data-linked-resource-id="71696480" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="capitomcat_deploy_flow_context.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span><br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/71435287/71696482.png" data-image-src="attachments/71435287/71696482.png" data-unresolved-comment-count="0" data-linked-resource-id="71696482" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="capitomcat-config-context.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span></p>

<h2 id="CapitomcatPlugin-Authentication&amp;Authorisation">Authentication &amp; Authorisation</h2>

<p>Basically, Capitomcat supports password input. by the way, that password will be saved as plain text in your config file. I'm trying to use certification plugin. but, for security, please consider using public key authentication.</p>

<p>And also, Capitomcat is following Authentication &amp; Authorisation guide line of Capistrano.</p>

<p>please refer to <a href="http://capistranorb.com/documentation/getting-started/authentication-and-authorisation/" class="external-link" rel="nofollow">Authentication &amp; Authorisation</a> page on the Capistrano home page for more detail about Authentication &amp; Authorisation. <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/71435287/71696483.png" data-image-src="attachments/71435287/71696483.png" data-unresolved-comment-count="0" data-linked-resource-id="71696483" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="capitomcat-config-host-auth-3.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span></p>

<h2 id="CapitomcatPlugin-NOPASSWDSetting">NOPASSWD Setting</h2>

<p>At least of following NOPASSWD setting is required to use Capitomcat.</p>

<div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>%your_deploy_user_name ALL=NOPASSWD:/etc/init.d/tomcat7 &lt;Your tomcat command&gt;<br/>
%your_deploy_user_name ALL=(&lt;your_tomcat_user&gt; : &lt;your_tomcat_user_group&gt;) NOPASSWD: ALL</p>
</div></div>


<h2 id="CapitomcatPlugin-AdvancedSetting:TomcatVirtualHostsetting">Advanced Setting : Tomcat Virtual Host setting</h2>

<p>Capitomcat Jenkins plugin is following virtual hosting setting convention of Tomcat.</p>

<p><a href="http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html" class="external-link" rel="nofollow">Virtual Hosting and Tomcat</a><br/>
<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/71435287/71696484.png" data-image-src="attachments/71435287/71696484.png" data-unresolved-comment-count="0" data-linked-resource-id="71696484" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="capitomcat-config-advanced-vhost.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span></p>

<h2 id="CapitomcatPlugin-OpenIssues">Open Issues</h2>

<p><a href="https://github.com/sunggun-yu/jenkins-capitomcat-plugin/issues?page=1&amp;state=open" class="external-link" rel="nofollow">Open Issues</a></p>


<h2 id="CapitomcatPlugin-Changelogs">Change logs</h2>


<h3 id="CapitomcatPlugin-v0.1.0">v0.1.0</h3>

<ul>
	<li>Updating Capitomcat library version - 1.2.1
	<ul>
		<li>Updating Capistrano dependency version - 3.3.5</li>
	</ul>
	</li>
	<li>Can choose the way how to execute the remote tomcat command to apply pty option correctly. you can select the option in advanced menu : `Use background execution for Tomcat command`.
	<ul>
		<li>No - Using Normal script(Default) : It follows the global pty option.</li>
		<li>Yes - Using Background script : It makes pty false in some OS even though global pty is true. for example, RHEL 5.6</li>
	</ul>
	</li>
</ul>


<p>for more details, please refer to <a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.1.0" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.1.0</a></p>

<h3 id="CapitomcatPlugin-V0.0.11">V0.0.11</h3>

<p><a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.11" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.11</a></p>


<p>Bug fix : Upgrading issue on ssh port default value.</p>
<ul>
	<li><span style="color: rgb(51,51,51);">ssh port value is null after upgrade to 0.0.10</span></li>
	<li><span style="color: rgb(51,51,51);">adding null check and invalid number value on ssh port.</span></li>
	<li><span style="color: rgb(51,51,51);">ssh port value will be ignored if it is invalid.</span></li>
</ul>


<h3 id="CapitomcatPlugin-V0.0.10">V0.0.10</h3>

<p><a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.10" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.10</a></p>
<ul>
	<li><span style="color: rgb(51,51,51);">Fix default value issue. default value was disappeared.</span></li>
	<li><span style="color: rgb(51,51,51);">Adding configurable SSH port option.</span>** <span style="color: rgb(51,51,51);">It supports custom ssh port host. such like Vagrant port forwarding.</span></li>
	<li><span style="color: rgb(51,51,51);">Adding Jenkins Builder.</span>** <span style="color: rgb(51,51,51);">The Capitomcat deployment can be added in pre and post build step.</span>** <span style="color: rgb(51,51,51);">It supports multiple Tomcat hosts that has different server setting in each other.</span></li>
</ul>


<h3 id="CapitomcatPlugin-V0.0.9">V0.0.9</h3>

<p><a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.9" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.9</a></p>

<ul>
	<li>Bug fix : Potential fix to allow updating the advanced configuration fields.</li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.8">v0.0.8</h3>

<p><a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.8" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.8</a></p>
<ul>
	<li><span style="color: rgb(51,51,51);">Support custom variable injection : please refer to release note in Github (with screenshot)</span></li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.7">v0.0.7</h3>

<p><a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.7" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.7</a></p>
<ul>
	<li><span style="color: rgb(51,51,51);">BUG-FIX : Config reload - property tomcat port number take default.</span></li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.6">v0.0.6</h3>

<p><a href="https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.6" class="external-link" rel="nofollow">https://github.com/jenkinsci/capitomcat-plugin/releases/tag/capitomcat-0.0.6</a></p>
<ul>
	<li><span style="color: rgb(51,51,51);">Unpacked WAR directory is not refreshed. eventually, Tomcat doesn't provide latest changes in new WAR file by this issue.</span></li>
	<li><span style="color: rgb(51,51,51);">Thanks to </span><a href="https://github.com/jwcarman" class="external-link" rel="nofollow">@jwcarman</a></li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.5">v0.0.5</h3>

<p><a href="https://github.com/sunggun-yu/jenkins-capitomcat-plugin/releases/tag/capitomcat-0.0.5" class="external-link" rel="nofollow">https://github.com/sunggun-yu/jenkins-capitomcat-plugin/releases/tag/capitomcat-0.0.5</a></p>


<ul>
	<li>Add functionality to select PTY options for global SSH setting : it fix deployment problem of some particular OS environment. ex) CentOS 6.5  <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/71435287/72613932.png" data-image-src="attachments/71435287/72613932.png" data-unresolved-comment-count="0" data-linked-resource-id="72613932" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="test-web2_Config__Jenkins_.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="71435287" data-linked-resource-container-version="33"></span></li>
	<li>Bug Fix for white space on host name section</li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.4.1">v0.0.4.1</h3>

<p>Apply the Capitomcat v1.1.3 changes : <a href="https://github.com/sunggun-yu/capitomcat/blob/master/CHANGES.md" class="external-link" rel="nofollow">https://github.com/sunggun-yu/capitomcat/blob/master/CHANGES.md</a></p>
<ul>
	<li>Bug Fix : There was space between &quot;-&quot; and &quot;u&quot; at Tomcat work directory cleaning task.</li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.3">v0.0.3</h3>

<p>Apply the Capitomcat v1.1.1 and v1.1.2 changes : <a href="https://github.com/sunggun-yu/capitomcat/blob/master/CHANGES.md" class="external-link" rel="nofollow">https://github.com/sunggun-yu/capitomcat/blob/master/CHANGES.md</a></p>
<ul>
	<li><span style="color: rgb(51,51,51);">Bug Fix : Some Tomcat startup script need to be executed in background #6 (</span><a href="https://github.com/sunggun-yu/capitomcat/issues/6" class="external-link" rel="nofollow">https://github.com/sunggun-yu/capitomcat/issues/6</a><span style="color: rgb(51,51,51);">)</span>** <span style="color: rgb(51,51,51);">Start/stop command has modified to be executed in the background.</span>** <span style="color: rgb(51,51,51);">Adding sleep time after command is executed.</span></li>
	<li><span style="color: rgb(51,51,51);">Bug Fix : SSHKIT test and within not properly working at CentOS5.x #7 (</span><a href="https://github.com/sunggun-yu/capitomcat/issues/7" class="external-link" rel="nofollow">https://github.com/sunggun-yu/capitomcat/issues/7</a><span style="color: rgb(51,51,51);">)</span>** <span style="color: rgb(51,51,51);">Removing within method</span>** <span style="color: rgb(51,51,51);">Adding checking method for remote directory and file existing.</span></li>
</ul>



<h3 id="CapitomcatPlugin-v0.0.2">v0.0.2</h3>

<ul>
	<li>Bug Fix : [v0.0.1]Config information not refreshed after built.</li>
</ul>


<h3 id="CapitomcatPlugin-v0.0.1">v0.0.1</h3>

<ul>
	<li>First Release of Capitomcat Jenkins plugin</li>
</ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696478.png">capitomcat_deploy_flow_basic.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696477.png">capitomcat_deploy_flow_basic.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696479.jpg">capitomcat_deploy_flow_basic.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696480.png">capitomcat_deploy_flow_context.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696481.png">capitomcat-config-basic.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696482.png">capitomcat-config-context.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696483.png">capitomcat-config-host-auth-3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/71696484.png">capitomcat-config-advanced-vhost.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/71435287/72613932.png">test-web2_Config__Jenkins_.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:15</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
