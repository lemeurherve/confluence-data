<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Xvfb Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Xvfb Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (zregvart)</span>, last modified on Oct 12, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Xvfb <a href="https://plugins.jenkins.io/xvfb" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
<a href="https://jenkins.ci.cloudbees.com/job/plugins/job/xvfb-plugin/badge/icon" class="external-link" rel="nofollow"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://jenkins.ci.cloudbees.com/job/plugins/job/xvfb-plugin/badge/icon" data-image-src="https://jenkins.ci.cloudbees.com/job/plugins/job/xvfb-plugin/badge/icon"></span></a></p><h1 id="XvfbPlugin-Whatisit?">What is it?</h1><p>Lets you control <a href="http://www.x.org/archive/current/doc/man/man1/Xvfb.1.xhtml" class="external-link" rel="nofollow">Xvfb</a> virtual frame buffer X11 server with each build. It starts Xvfb before the build starts, and stops it with the build. This is very useful if your build requires X11 access, for instance runs tests that require GUI.</p><div class="confluence-information-macro confluence-information-macro-note"><p class="title">New feature in version 1.1.0 - Jenkins Pipeline support</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>With 1.1.0 <a href="Pipeline-Plugin.html">Pipeline</a> support has landed, you can now use Xvfb to wrap other pipeline steps:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">node {
  wrap([$class: &#39;Xvfb&#39;]) {
    ... your steps here
  }
}
</pre>
</div></div></div></div><div class="confluence-information-macro confluence-information-macro-note"><p class="title">New feature in version 1.0.16 - Parallel build mode</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Use <strong>I’m running this job in parallel on same node</strong> when running multiple slaves (Jenkins nodes) on the same machine to prevent collisions when jobs are run on same-numbered executors.</p></div></div><div class="confluence-information-macro confluence-information-macro-note"><p class="title">New feature in version 1.0.11 - Labels</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Use <strong>Start only on nodes labeled</strong> option for multi platform builds.</p></div></div><div class="confluence-information-macro confluence-information-macro-note"><p class="title">New feature in version 1.0.9 - auto display name (on newer Xvfb versions)</p><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Use <strong>Let Xvfb choose display name</strong> option with Xvfb that supports <strong>displayfd</strong> option to choose the display number automatically by Xvfb.</p></div></div><h1 id="XvfbPlugin-Gettinghelp">Getting help</h1><p>Please use the <a href="https://jenkins.io/mailing-lists/" class="external-link" rel="nofollow">users mailing list</a>, <a href="https://stackoverflow.com/questions/tagged/jenkins" class="external-link" rel="nofollow">Stackoverflow</a> or ask on one of the <a href="https://jenkins.io/chat/" class="external-link" rel="nofollow">chats</a>. This page was not designed for support, please do no comment on it asking for help. If you encounter bugs or issues please create a ticket in the <a href="https://issues.jenkins-ci.org" class="external-link" rel="nofollow">issue tracker</a>, it would be really nice if you would research first and see if the issue you're experiencing is due to the Xvfb Jenkins plugin or with the Xvfb itself and the version of Xvfb you're using.</p><h1 id="XvfbPlugin-Usage">Usage</h1><p>The plugin starts and stops the Xvfb virtual framebuffer X11 server so your jobs can use X11 displays in headless environments such as servers, or when dedicated X11 display is required for each job.</p><p>Start by going to <em>Manage Jenkins</em> / <em>Global Tool Configuration</em> on Jenkins version 2.0 or <em>Manage Jenkins</em> / <em>Configure System</em> on earlier version and setup your Xvfb installation. You need to give it a arbitrary name like <em>default Xvfb</em> and directory in which the Xvfb executable is located like <em>/usr/X11R6/bin</em>. Unfortunately there is no support for automatic installation of Xvfb. As of version 1.1.0 you can define a single Xvfb tool installation or have a installation named &quot;default&quot; and the jobs are going to run even if you don't define what installation to use in the job configuration.</p><p>Typically you would use the defaults, which are that display numbers, a unique number that is used to identify each X11 display (you might see them shown as <code>:0</code>, <code>:1</code> or such), are based on the current Jenkins executor number (the number you see next to the running job in the <em>Build Executor Status</em> box). This is fine if display numbers corresponding to the executor numbers are available for Jenkins to use. If they're not you have several options:</p><ul><li>use a fixed display number (<em>Xvfb specific display name</em>) by which you guarantee that the specified display number is reserved for the specified Jenkins job</li><li>use display numbers based on executor numbers but offset by some number (<em>Xvfb display name offset</em>) by which you reserve a range of display numbers for the specified Jenkins job, for instance if you use offset of 100, display names will be 100 and greater, up to the number of executors on a particular Jenkins executor (i.e. slave or master depending on where the job is run)</li><li>leave the choice of display number to Xvfb (<em>Let Xvfb choose display name</em>) – if your Xvfb version supports it, by which Xvfb chooses a free display number on its own</li></ul><h1 id="XvfbPlugin-ProjectConfiguration">Project Configuration</h1><p>On the job configuration page, enable the &quot;Start Xvfb before the build, and shut it down after.&quot; under the Build Environment. <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/59510716/59900128.png" data-image-src="attachments/59510716/59900128.png" data-unresolved-comment-count="0" data-linked-resource-id="59900128" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen shot 2012-01-29 at 23.01.31.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59510716" data-linked-resource-container-version="40"></span></p><p>If you want to customize defaults click on Advanced... button.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" width="900" src="attachments/59510716/76054551.png" data-image-src="attachments/59510716/76054551.png" data-unresolved-comment-count="0" data-linked-resource-id="76054551" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen Shot 2015-02-08 at 20.50.43.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59510716" data-linked-resource-container-version="40"></span></p><ul><li><strong>Xvfb installation</strong> lets you choose Xvfb installation to use, these are configured by the Jenkins administrator in the Tools section of Jenkins configuration. By default the first defined installation is used.</li><li><strong>Let Xvfb choose display name</strong> Uses the -displayfd option of Xvfb by which it chooses its own display name by scanning for an available one. This option requires a recent version of xserver, check your installation for support. Useful if you do not want to manage display number ranges but have the first free display number be used.</li><li><strong>Xvfb specific display name</strong> lets you customize what displayname should be created, enter a number here and that number prefixed by : will be the displayname (e.g. :1). If none is given display name is based upon Jenkins executor number increased by 1, or the configurable <strong>Xvfb display name offset</strong>.</li><li><strong>I’m running this job in parallel on same node</strong> - if you have multiple slaves on the same machine, the build number will be generated based on the ordinal of the machine multiplied by 100 plus the executor number and any offset configured. Be careful Xvfb will not work with this enabled if you're running more than 595 nodes and 35 executors per node.</li><li><strong>Start only on nodes labeled</strong> lets you specify via label expressions on what node(s) to start Xvfb.</li><li><strong>Timeout in seconds</strong> lets you specify the number of seconds before letting the build progress. Since Xvfb is started in background, certain builds might fail because Xvfb was not started quick enough, with this the build is paused the for specified seconds to let Xvfb startup. The default is not to pause the build.</li><li><strong>Xvfb screen</strong> changes the screen resolution and pixel depth, it needs to be in WxHxD format (i.e. 1600x1200x24). The default is 1024x768x24.</li><li><strong>Xvfb display name offset</strong> lets you specify a offset i.e. a number that will be added to the job's executor number that will form the display name used. This is handy if you run other X servers (Xvfb, Xvnc or similar) in order to ensure that display numbers do not overlap.</li><li><strong>Xvfb additional options</strong> lets you specify any additional Xvfb command line options you might need.</li><li><strong>Log Xvfb output</strong> redirects output of Xvfb into job log, useful if you need to troubleshoot Xvfb starting/stopping.</li><li><strong>Shutdown Xvfb with whole job, not just with the main build action</strong> keeps Xvfb running for post build steps.</li></ul><h1 id="XvfbPlugin-Jenkinsconfiguration">Jenkins configuration</h1><p>Jenkins administrator needs to define the Xvfb tool installation. <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/59510716/59900130.png" data-image-src="attachments/59510716/59900130.png" data-unresolved-comment-count="0" data-linked-resource-id="59900130" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen shot 2012-01-29 at 23.18.00.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59510716" data-linked-resource-container-version="40"></span></p><p>The directory in which to find Xvfb executable can be left blank, then PATH is searched to find the executable.</p><h1 id="XvfbPlugin-VersionHistory">Version History</h1><h2 id="XvfbPlugin-Version1.1.3(Mar20,2015)"><strong>Version 1.1.3 (Mar 20, 2015)</strong></h2><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-32039" class="external-link" rel="nofollow">JENKINS-32039</a> &quot;screen&quot; default does not work<br/> <a href="https://issues.jenkins-ci.org/browse/JENKINS-33206" class="external-link" rel="nofollow">JENKINS-33206</a> Xvfb plugin doesn't remember &quot;Log Xvfb output&quot; set via the configuration page<br/> <a href="https://issues.jenkins-ci.org/browse/JENKINS-33288" class="external-link" rel="nofollow">JENKINS-33288</a> Xvfb error does not fail build</p><p>Thanks to Mark Leaky, Nathan Smith and Francis De Brabandere for reporting issues!</p><h2 id="XvfbPlugin-Version1.1.2(Dec10,2015)"><strong>Version 1.1.2 (Dec 10, 2015)</strong></h2><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-32005" class="external-link" rel="nofollow">JENKINS-32005</a> Xfvb plugin doesn't remember displayname set via the configuration page</p><p>Thanks to Adriaan Wisse for reporting the issue!</p><h2 id="XvfbPlugin-Version1.1.1(Dec5,2015)"><strong>Version 1.1.1 (Dec 5, 2015)</strong></h2><p><a href="https://github.com/jenkinsci/xvfb-plugin/pull/8" class="external-link" rel="nofollow">PULL#8</a> Screen name was not being set from the configuration.</p><p>Thanks to Daniel Borges for the pull request!</p><h2 id="XvfbPlugin-Version1.1.0(Nov24,2015)"><strong>Version 1.1.0 (Nov 24, 2015)</strong></h2><p>Added support for the <a href="Pipeline-Plugin.html">Pipeline Plugin</a></p><h2 id="XvfbPlugin-Version1.0.16(Feb8,2015)"><strong>Version 1.0.16 (Feb 8, 2015)</strong></h2><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-26848" class="external-link" rel="nofollow">JENKINS-26848</a> Does not actually randomize DISPLAY</p><p>Thanks to Jo Shields for reporting and testing!</p><h2 id="XvfbPlugin-Version1.0.15(Jan20,2015)"><strong>Version 1.0.15 (Jan 20, 2015)</strong></h2><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-26504" class="external-link" rel="nofollow">JENKINS-26504</a> Cannot run low numbered builds with xvfb in Jenkins 1.597<br/> <a href="https://issues.jenkins-ci.org/browse/JENKINS-26505" class="external-link" rel="nofollow">JENKINS-26505</a> java.lang.IllegalArgumentException: Prefix string too short org.jenkinsci.plugins.xvfb.XvfbBuildWrapper.launchXvfb(XvfbBuildWrapper.java:484) <a class="createlink" href="/pages/createpage.action?spaceKey=JENKINS&amp;title=duplicate&amp;linkCreation=true&amp;fromPageId=59510716">duplicate</a></p><p>Thanks to Jonathan Price and mturra for reporting the issue!</p><h2 id="XvfbPlugin-Version1.0.13(Oct1,2014)"><strong>Version 1.0.13 (Oct 1, 2014)</strong></h2><p><a href="https://github.com/jenkinsci/xvfb-plugin/pull/5" class="external-link" rel="nofollow">Prevent NPE when NullConverter registered</a> pull request by <a href="https://github.com/aleksz" class="external-link" rel="nofollow">Aleksandr Zhuikov</a></p><p>Thanks to Aleksandr Zhuikov for the pull request!</p><h2 id="XvfbPlugin-Version1.0.12(Jun2,2014)-bug-fixrelease"><strong>Version 1.0.12 (Jun 2, 2014) - bug-fix release</strong></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-23267" class="external-link" rel="nofollow">JENKINS-23267</a> NullPointerException in XvfbBuildWrapper.setUp when configured without node label restrictions</li></ul><p>Thanks to Alexander Clausen, Jarosław Strzelecki &amp; elygre for reporting and suggesting fix.</p><h2 id="XvfbPlugin-Version1.0.11(Jun1,2014)"><strong>Version 1.0.11 (Jun 1, 2014)</strong></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-23155" class="external-link" rel="nofollow">JENKINS-23155</a> Only run plugin under Linux</li></ul><p>Thanks to cowwoc for reporting and testing!</p><h2 id="XvfbPlugin-Version1.0.10(Apr23,2014)"><strong>Version 1.0.10 (Apr 23, 2014)</strong></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-22719" class="external-link" rel="nofollow">JENKINS-22719</a> Xvfb plugin does not start before release plugin</li><li>Zombie slaying on Jenkins master failure</li></ul><p>Thanks to Zoltan Nagy and Dmitry Katsubo for reporting and testing!</p><h2 id="XvfbPlugin-Version1.0.9(Mar5,2014)"><strong>Version 1.0.9 (Mar 5, 2014)</strong></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-20758" class="external-link" rel="nofollow">JENKINS-20758</a> Xvfb processes remain after slave disconnect</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-19950" class="external-link" rel="nofollow">JENKINS-19950</a> DISPLAY variable is not overwritten when it already exists</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-21548" class="external-link" rel="nofollow">JENKINS-21548</a> Xvfb failure does not fail build</li><li>New feature that lets Xvfb to pick the display name</li></ul><p>Thanks to Marc Günther, Richard Cross and Jonathan Rogers for reporting and beta testing!</p><h2 id="XvfbPlugin-Version1.0.8(Jun29,2013)"><span style="color: rgb(210,73,57);"><strong>Version 1.0.8 (Jun 29, 2013)</strong></span></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-18094" class="external-link" rel="nofollow">JENKINS-18094</a> Xvfb plugin doesn't write any error message in build log</li></ul><p>Thanks to Aleksey Alekseev for reporting and testing!</p><h2 id="XvfbPlugin-Version1.0.7(Dec9,2012)"><span style="color: rgb(210,73,57);"><strong>Version 1.0.7 (Dec 9, 2012)</strong></span></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-15972" class="external-link" rel="nofollow">JENKINS-15972</a> No display available in post build actions</li></ul><p>Thanks to Yves Langisch for reporting the feature request!</p><h2 id="XvfbPlugin-Version1.0.6(Nov5,2012)"><span style="color: rgb(210,73,57);"><strong>Version 1.0.6 (Nov 5, 2012)</strong></span></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-15638" class="external-link" rel="nofollow">JENKINS-15638</a> Xvfb 'display name offset' defaults to 0, not 1 as described, if unset</li></ul><p>Thanks to Fredrik Vihlborg for re-reporting issues!</p><h2 id="XvfbPlugin-Version1.0.5(Oct30,2012)"><span style="color: rgb(210,73,57);"><strong>Version 1.0.5 (Oct 30, 2012)</strong></span></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-15638" class="external-link" rel="nofollow">JENKINS-15638</a> Xvfb 'display name offset' defaults to 0, not 1 as described, if unset</li></ul><p>Thanks to Fredrik Vihlborg for reporting issues!</p><h2 id="XvfbPlugin-Version1.0.4(Oct24,2012)"><span style="color: rgb(210,73,57);"><strong>Version 1.0.4 (Oct 24, 2012)</strong></span></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-14483" class="external-link" rel="nofollow">JENKINS-14483</a> Remaining Xvfb processes in matrix jobs</li><li><a href="https://github.com/jenkinsci/xvfb-plugin/issues/2" class="external-link" rel="nofollow">pull request #2</a> Make sure the random display name is always more than 0.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-15608" class="external-link" rel="nofollow">JENKINS-15608</a> Xvfb 'specific displayname' selects a random display between 0..100, not 1..100.</li></ul><p>Thanks to Thorsten Kahler for reporting the issue and exemplary patience in testing, <a href="https://github.com/JeroenVanHab" class="external-link" rel="nofollow">JeroenVanHab</a> for the pull request and Fredrik Vihlborg for reporting the issue!</p><h2 id="XvfbPlugin-Version1.0.3(Sep15,2012)"><span style="color: rgb(210,73,57);"><strong>Version 1.0.3 (Sep 15, 2012)</strong></span></h2><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-14790" class="external-link" rel="nofollow">JENKINS-14790</a> NullPointerException starting Xvfb on remote slave</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-15174" class="external-link" rel="nofollow">JENKINS-15174</a> Timeout option not retrieved correctly</li></ul><p>Thanks to Brian Sipos and Daniel Piorkowski for reporting issues!</p><h2 id="XvfbPlugin-Version1.0.2(Mar12,2012)">Version 1.0.2 (Mar 12, 2012)</h2><ul><li>Field to add additional options to Xvfb command line (JENKINS-13046)</li></ul><h2 id="XvfbPlugin-Version1.0.1(Jan29,2012)">Version 1.0.1 (Jan 29, 2012)</h2><ul><li>Initial release</li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/59900128.png">Screen shot 2012-01-29 at 23.01.31.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/59900129.png">Screen shot 2012-01-29 at 23.06.20.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/59900130.png">Screen shot 2012-01-29 at 23.18.00.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/65339419.png">Screen shot 2012-10-24 at 22.30.06.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/65863763.png">Screen shot 2012-12-09 at 17.08.18.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/69959750.png">Screen Shot 2013-10-06 at 22.15.21.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/72974359.png">Screen Shot 2014-06-01 at 19.59.30.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/76054551.png">Screen Shot 2015-02-08 at 20.50.43.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59510716/106496056.jpg">xvfb.JPG</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 14:00</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
