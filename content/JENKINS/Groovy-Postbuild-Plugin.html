<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Groovy Postbuild Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Groovy Postbuild Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (siordache@scoop-gmbh.de)</span>, last modified by <span class='editor'> Unknown User (ikedam)</span> on Jun 24, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Groovy Postbuild <a href="https://plugins.jenkins.io/groovy-postbuild" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2018-05-09/#SECURITY-821" class="external-link" rel="nofollow">Persisted cross-site scripting vulnerability in build badges</a></li>
	<li><a href="https://jenkins.io/security/advisory/2017-04-10/" class="external-link" rel="nofollow">Arbitrary code execution vulnerability</a></li>
</ul>

</div></div>
This plugin executes a groovy script in the Jenkins JVM. Typically, the script checks some conditions and changes accordingly the build result, puts badges next to the build in the build history and/or displays information on the build summary page.<p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1631021204492 {padding: 0px;}
div.rbtoc1631021204492 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1631021204492 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1631021204492'>
<ul class='toc-indentation'>
<li><a href='#GroovyPostbuildPlugin-Migrationfrom1.X'>Migration from 1.X</a>
<ul class='toc-indentation'>
<li><a href='#GroovyPostbuildPlugin-Scriptsusingonlywhitelistedmethodsofmanager'>Scripts using only whitelisted methods of manager</a></li>
<li><a href='#GroovyPostbuildPlugin-Scriptsusingnon-whitelistedmethods'>Scripts using non-whitelisted methods</a></li>
<li><a href='#GroovyPostbuildPlugin-Scriptsusingexternaljarfiles'>Scripts using external jar files</a></li>
<li><a href='#GroovyPostbuildPlugin-Scriptsusingexternalclassdirectories'>Scripts using external class directories</a></li>
</ul>
</li>
<li><a href='#GroovyPostbuildPlugin-Usage'>Usage</a>
<ul class='toc-indentation'>
<li><a href='#GroovyPostbuildPlugin-Whitelistedmethods'>Whitelisted methods</a></li>
<li><a href='#GroovyPostbuildPlugin-Non-whitelistedmethods'>Non-whitelisted methods</a></li>
<li><a href='#GroovyPostbuildPlugin-Restinterfaces'>Rest interfaces</a></li>
<li><a href='#GroovyPostbuildPlugin-Exampleusages'>Example usages</a>
<ul class='toc-indentation'>
<li><a href='#GroovyPostbuildPlugin-Example1'>Example 1</a></li>
<li><a href='#GroovyPostbuildPlugin-Example2'>Example 2</a></li>
<li><a href='#GroovyPostbuildPlugin-Example3'>Example 3</a></li>
<li><a href='#GroovyPostbuildPlugin-Example4'>Example 4</a></li>
<li><a href='#GroovyPostbuildPlugin-Example5'>Example 5</a></li>
<li><a href='#GroovyPostbuildPlugin-Example6'>Example 6</a></li>
<li><a href='#GroovyPostbuildPlugin-Example7'>Example 7</a></li>
<li><a href='#GroovyPostbuildPlugin-Example8'>Example 8</a></li>
<li><a href='#GroovyPostbuildPlugin-Example9(thankstoKenBertelson)'>Example 9 (thanks to Ken Bertelson)</a></li>
<li><a href='#GroovyPostbuildPlugin-Example10(thankstoFrankMerrow)'>Example 10 (thanks to Frank Merrow)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#GroovyPostbuildPlugin-Issues'>Issues</a></li>
<li><a href='#GroovyPostbuildPlugin-Changelog'>Changelog</a>
<ul class='toc-indentation'>
<li><a href='#GroovyPostbuildPlugin-Version2.5(Jun24,2019)'>Version 2.5 (Jun 24, 2019)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.4.3(Nov18,2018)'>Version 2.4.3 (Nov 18, 2018)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.4.2(Aug8,2018)'>Version 2.4.2 (Aug 8, 2018)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.4.1(May4,2018)'>Version 2.4.1 (May 4, 2018)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.4(Mar25,2018)'>Version 2.4 (Mar 25, 2018)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.3.1(Feb7,2016)'>Version 2.3.1 (Feb 7, 2016)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.3(Dec27,2015)'>Version 2.3 (Dec 27, 2015)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.2.2(Oct17,2015)'>Version 2.2.2 (Oct 17, 2015)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.2.1(Aug18,2015)'>Version 2.2.1 (Aug 18, 2015)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.2(Dec19,2014)'>Version 2.2 (Dec 19, 2014)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.1(Oct25,2014)'>Version 2.1 (Oct 25, 2014)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version2.0(Sep21,2014)'>Version 2.0 (Sep 21, 2014)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version1.10(July26,2014)'>Version 1.10 (July 26, 2014)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version1.9(April29,2014)'>Version 1.9 (April 29, 2014)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version1.8(August22,2012)'>Version 1.8 (August 22, 2012)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version1.7(May2,2012)'>Version 1.7 (May 2, 2012)</a></li>
<li><a href='#GroovyPostbuildPlugin-Version1.6'>Version 1.6</a></li>
<li><a href='#GroovyPostbuildPlugin-Version1.5(November5,2011)'>Version 1.5 (November 5, 2011)</a></li>
</ul>
</li>
</ul>
</div></p><h2 id="GroovyPostbuildPlugin-Migrationfrom1.X">Migration from 1.X</h2><p>From version 2.0, Groovy Postbuild plugin introduces <a href="Script-Security-Plugin.html">Script Security Plugin</a>.<br/>Administrators can prevent users without proper privileges from running harmful scripts.<br/>For details, see <a href="Script-Security-Plugin.html">Script Security Plugin</a>.<br/>This doesn't affect <a href="Securing-Jenkins.html">Jenkins without security enabled</a> and users with administrative privilege (to be exact, with RUN_SCRIPTS permission).</p><p>When you upgrade the Groovy Postbuild plugin from 1.X to 2.X, you and your Jenkins users<br/>also requires update configurations of Groovy Postbuild, or they will fail with outputs like this:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>ERROR: Failed to evaluate groovy script.
org.jenkinsci.plugins.scriptsecurity.scripts.UnapprovedUsageException: script not yet approved for use
	at org.jenkinsci.plugins.scriptsecurity.scripts.ScriptApproval.using(ScriptApproval.java:398)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SecureGroovyScript.evaluate(SecureGroovyScript.java:165)
	at org.jvnet.hudson.plugins.groovypostbuild.GroovyPostbuildRecorder.perform(GroovyPostbuildRecorder.java:343)
	at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)
	at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:785)
	at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:757)
	at hudson.model.Build$BuildExecution.post2(Build.java:183)
	at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:706)
	at hudson.model.Run.execute(Run.java:1690)
	at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
	at hudson.model.ResourceController.execute(ResourceController.java:88)
	at hudson.model.Executor.run(Executor.java:246)
</pre>
</div></div><h3 id="GroovyPostbuildPlugin-Scriptsusingonlywhitelistedmethodsofmanager">Scripts using only whitelisted methods of manager</h3><p>Scripts using only <a href="#GroovyPostbuildPlugin-Whitelistedmethods">whitelisted methods of manager</a> can run with using Groovy sandbox.<br/>They can be validated only by checking &quot;Use Groovy Sandbox&quot;.</p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-content-image-border image-center" src="attachments/42469250/74285063.png" data-image-src="attachments/42469250/74285063.png" data-unresolved-comment-count="0" data-linked-resource-id="74285063" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="scriptsecurity-enablesandbox.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h3 id="GroovyPostbuildPlugin-Scriptsusingnon-whitelistedmethods">Scripts using non-whitelisted methods</h3><p>Scripts using <a href="#GroovyPostbuildPlugin-Non-whitelistedmethods">non-whitelisted methods of manager</a> or methods not of manager requires<br/>approval of administrators.</p><p>Administrators should check and approve those scripts in Manage Jenkins &gt; In-process Script Approval.</p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-content-image-border image-center" src="attachments/42469250/74285064.png" data-image-src="attachments/42469250/74285064.png" data-unresolved-comment-count="0" data-linked-resource-id="74285064" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="scriptsecurity-approvescript.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h3 id="GroovyPostbuildPlugin-Scriptsusingexternaljarfiles">Scripts using external jar files</h3><p>If you refer external jar files from your scripts, you need to have those jar files approved by administartors.</p><p>Administrators should check and approve those jar files in Manage Jenkins &gt; In-process Script Approval.</p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-content-image-border image-center" src="attachments/42469250/74285065.png" data-image-src="attachments/42469250/74285065.png" data-unresolved-comment-count="0" data-linked-resource-id="74285065" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="scriptsecurity-approvejar.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h3 id="GroovyPostbuildPlugin-Scriptsusingexternalclassdirectories">Scripts using external class directories</h3><p><a href="Script-Security-Plugin.html">Script Security Plugin</a> doesn't support class directories.</p><p>If you refer external class directories from your scripts, you should archive them into jar files.<br/>It can be performed by running a following command:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>jar -cf mylib.jar -C /path/to/classes .
</pre>
</div></div><p>You can use /path/to/mylib.jar as an additonal classpath for scripts.</p><h2 id="GroovyPostbuildPlugin-Usage">Usage</h2><p>The groovy script can use the variable <em>manager</em>, which provides various methods to decorate your builds.<br/>Those methods can be classified into <em>whitelisted methods</em> and <em>non-whitelisted methods</em>.<br/>You can always use <em>Whitelisted methods</em>, but you can use <em>Non-whitelisted methods</em> only when &quot;Enable groovy postbuild security&quot; is not enabled (version 1.X) or in scripts approved by administrators (since version 2.x)</p><h3 id="GroovyPostbuildPlugin-Whitelistedmethods">Whitelisted methods</h3><ul><li>getEnvVariable(key) - get a variable value. (since 1.10)</li><li>getResult() - get a build result string (like SUCCESS, FAILURE) (since 2.2)</li></ul><ul><li>logContains(regexp) - returns true if the build log file contains a line matching <em>regexp</em>.</li><li>getLogMatcher(regexp) - returns a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html" class="external-link" rel="nofollow">java.util.regex.Matcher</a> for the first occurrence of <em>regexp</em> in the build log file.</li></ul><ul><li>addShortText(text) - puts a badge with a short text, using the default format.</li><li>addShortText(text, color, background, border, borderColor) - puts a badge with a short text, using the specified format.  For Colors supported, Google &quot;html color names&quot;.</li><li>addBadge(icon, text) - puts a badge with the given icon and text. In addition to the <a href="https://github.com/jenkinsci/jenkins/tree/master/war/src/main/webapp/images/16x16" class="external-link" rel="nofollow">16x16 icons</a> offered by Jenkins, groovy-postbuild provides the following icons (watch out for duplicates, see Example 5):<blockquote><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631320.gif" data-image-src="attachments/42469250/42631320.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631320" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="completed.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - completed.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631321.gif" data-image-src="attachments/42469250/42631321.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631321" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="db_in.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - db_in.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631322.gif" data-image-src="attachments/42469250/42631322.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631322" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="db_out.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - db_out.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631323.gif" data-image-src="attachments/42469250/42631323.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631323" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="delete.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - delete.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631324.gif" data-image-src="attachments/42469250/42631324.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631324" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="error.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - error.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631325.gif" data-image-src="attachments/42469250/42631325.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631325" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="folder.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - folder.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631326.gif" data-image-src="attachments/42469250/42631326.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631326" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="green.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - green.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631327.gif" data-image-src="attachments/42469250/42631327.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631327" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="info.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - info.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631328.gif" data-image-src="attachments/42469250/42631328.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631328" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="red.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - red.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631329.gif" data-image-src="attachments/42469250/42631329.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631329" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="save.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - save.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631330.gif" data-image-src="attachments/42469250/42631330.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631330" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="success.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - success.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631331.gif" data-image-src="attachments/42469250/42631331.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631331" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="text.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - text.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631332.gif" data-image-src="attachments/42469250/42631332.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631332" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="warning.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - warning.gif<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631333.gif" data-image-src="attachments/42469250/42631333.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631333" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="yellow.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> - yellow.gif</p></blockquote></li></ul><ul><li>addBadge(icon, text, link) - like addBadge(icon, text), but the Badge icon then actually links to the given link (since 1.8)</li><li>addInfoBadge(text) - puts a badge with <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631327.gif" data-image-src="attachments/42469250/42631327.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631327" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="info.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> info icon and the given text.</li><li>addWarningBadge(text) - puts a badge with <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631332.gif" data-image-src="attachments/42469250/42631332.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631332" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="warning.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> warning icon and the given text.</li><li>addErrorBadge(text) - puts a badge with <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631324.gif" data-image-src="attachments/42469250/42631324.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631324" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="error.gif" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span> error icon and the given text.</li><li>addHtmlBadge(html) - puts a badge with html source (since 2.5). Unsafe html codes will be removed.</li><li>removeBadges() - removes all badges from the current build. It is often used with <code>setBuildNumber</code>.</li><li>removeBadge(index) - removes the badge with the given index. It is often used with <code>setBuildNumber</code>.</li></ul><ul><li>buildUnstable() - sets the build result to <em>UNSTABLE</em>.</li><li>buildFailure() - sets the build result to <em>FAILURE</em>.</li><li>buildSuccess() - sets the build result to <em>SUCCESS</em>.</li></ul><ul><li>buildIsA(klass) - test the build is a specified class (since 2.0)</li></ul><h3 id="GroovyPostbuildPlugin-Non-whitelistedmethods">Non-whitelisted methods</h3><p>Methods returning non-primitive objects aren't whitelisted as groovy-postbuild doesn't ensure every methods of those objects are safe.</p><ul><li>hudson - the current Hudson instance (see <a href="http://javadoc.jenkins-ci.org/index.html?hudson/model/Hudson.html" class="external-link" rel="nofollow">hudson.model.Hudson</a>).</li><li>build - the current build (see <a href="http://javadoc.jenkins-ci.org/index.html?hudson/model/AbstractBuild.html" class="external-link" rel="nofollow">hudson.model.AbstractBuild</a>).</li><li>listener - the build listener (see <a href="http://javadoc.jenkins-ci.org/index.html?hudson/model/BuildListener.html" class="external-link" rel="nofollow">hudson.model.BuildListener</a>).</li></ul><ul><li><p>envVars - the build variables map. You can get a variable value with</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">manager.envVars[&#39;varname&#39;]</pre>
</div></div><p>You shouldn't update values. This isn't whitelisted, and it is recommended to use <code>getEnvVariable(key)</code> instead. (since 1.10)</p></li></ul><ul><li>contains(file, regexp) - returns true if the given file contains a line matching <em>regexp</em>. Not whitelisted as it allows users access any files (for example, a file containing passwords).</li><li>getMatcher(file, regexp) - returns a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html" class="external-link" rel="nofollow">java.util.regex.Matcher</a> for the first occurrence of <em>regexp</em> in the given file.</li></ul><ul><li>setBuildNumber(number) - sets the build with the given number as current build. The current build is the target of all methods that add or remove badges and summaries or change the build result.</li></ul><ul><li>createSummary(icon) - creates an entry in the build summary page and returns a <em>summary</em> object corresponding to this entry. The icon must be one of the <a href="https://github.com/jenkinsci/jenkins/tree/master/war/src/main/webapp/images/48x48" class="external-link" rel="nofollow">48x48 icons</a> offered by Jenkins. You can append text to the <em>summary</em> object by calling its <em>appendText</em> methods. Be careful appending HTML-unescaped texts as they can be harmful.<ul><li>appendText(text, escapeHtml)</li><li>appendText(text, escapeHtml, bold, italic, color)</li></ul></li><li>removeSummaries() - removes all summaries from the current build.</li><li>removeSummary(index) - removes the summary with the given index.</li></ul><h3 id="GroovyPostbuildPlugin-Restinterfaces">Rest interfaces</h3><p>It is also possible to delete badges and summaries by using the following links:</p><ul><li>remove all badges:<ul><li><code>http</code><code>://</code><span style="color: navy;"><code><em>your-jenkins</em></code></span><code>/job/</code><span style="color: navy;"><code><em>your-job</em></code></span><code>/</code><span style="color: navy;"><code><em>build-number</em></code></span><code>/parent/parent/plugin/groovy-postbuild/removeBadges</code></li></ul></li></ul><ul><li>remove all summaries:<ul><li><code>http</code><code>://</code><span style="color: navy;"><code><em>your-jenkins</em></code></span><code>/job/</code><span style="color: navy;"><code><em>your-job</em></code></span><code>/</code><span style="color: navy;"><code><em>build-number</em></code></span><code>/parent/parent/plugin/groovy-postbuild/removeSummaries</code></li></ul></li></ul><ul><li>remove the badge with the given index:<ul><li><code>http</code><code>://</code><span style="color: navy;"><code><em>your-jenkins</em></code></span><code>/job/</code><span style="color: navy;"><code><em>your-job</em></code></span><code>/</code><span style="color: navy;"><code><em>build-number</em></code></span><code>/parent/parent/plugin/groovy-postbuild/removeBadge?index=</code><span style="color: navy;"><code><em>idx</em></code></span></li></ul></li></ul><ul><li>remove the summary with the given index:<ul><li><code>http</code><code>://</code><span style="color: navy;"><code><em>your-jenkins</em></code></span><code>/job/</code><span style="color: navy;"><code><em>your-job</em></code></span><code>/</code><span style="color: navy;"><code><em>build-number</em></code></span><code>/parent/parent/plugin/groovy-postbuild/removeSummary?index=</code><span style="color: navy;"><code><em>idx</em></code></span></li></ul></li></ul><h3 id="GroovyPostbuildPlugin-Exampleusages">Example usages</h3><h4 id="GroovyPostbuildPlugin-Example1">Example 1</h4><p>The script below puts a warning badge and mark the build as unstable if it detects that deprecated methods were used.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">if(manager.logContains(&quot;.*uses or overrides a deprecated API.*&quot;)) {
    manager.addWarningBadge(&quot;Thou shalt not use deprecated methods.&quot;)
    manager.createSummary(&quot;warning.gif&quot;).appendText(&quot;&lt;h1&gt;You have been warned!&lt;/h1&gt;&quot;, false, false, false, &quot;red&quot;)
    manager.buildUnstable()
}

</pre>
</div></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631334.gif" data-image-src="attachments/42469250/42631334.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631334" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example1.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p></div></th><th class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631354.gif" data-image-src="attachments/42469250/42631354.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631354" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example1s.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p></div></th></tr></tbody></table></div><h4 id="GroovyPostbuildPlugin-Example2">Example 2</h4><p>Suppose we have a parameterized build, which uses the boolean parameter <em>storeToDB</em> in order to instruct the build to store some artifacts into the database. The script below puts a badge next to the builds for which this parameter is set.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">if(&quot;true&quot;.equals(manager.build.buildVariables.get(&quot;storeToDB&quot;))) {
    manager.addBadge(&quot;db_in.gif&quot;, &quot;Stored to DB&quot;)
}</pre>
</div></div><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631335.gif" data-image-src="attachments/42469250/42631335.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631335" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example2.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h4 id="GroovyPostbuildPlugin-Example3">Example 3</h4><p>Suppose we have a parameterized build, which uses the string parameter <em>version</em>. The script below puts a short text indicating the value of this parameter next to successful and unstable builds.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">if(manager.build.result.isBetterOrEqualTo(hudson.model.Result.UNSTABLE)) {
    manager.addShortText(&quot;v${manager.build.buildVariables.get(&#39;version&#39;)}&quot;)
}</pre>
</div></div><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631336.gif" data-image-src="attachments/42469250/42631336.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631336" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="example3.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h4 id="GroovyPostbuildPlugin-Example4">Example 4</h4><p>The script below determines how long it took to build the project and displays the corresponding value as a short text next to each build.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">def matcher = manager.getLogMatcher(&quot;.*Total time: (.*)\$&quot;)
if(matcher?.matches()) {
    manager.addShortText(matcher.group(1), &quot;grey&quot;, &quot;white&quot;, &quot;0px&quot;, &quot;white&quot;)
}</pre>
</div></div><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631337.gif" data-image-src="attachments/42469250/42631337.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631337" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example4.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h4 id="GroovyPostbuildPlugin-Example5">Example 5</h4><p>For badges, you can choose from the <a href="https://github.com/jenkinsci/jenkins/tree/master/war/src/main/webapp/images/16x16" class="external-link" rel="nofollow">16x16 icons</a> provided by Jenkins or from the icons provided by this plugin. Some of the names of groovy-postbuild icons conflict with the names of Jenkins icons (e.g. yellow.gif). For these icons, you have to provide the complete path (e.g. /images/16x16/yellow.gif), in case you want a badge with the Jenkins icon. You can also use icons provided by other plugins (e.g. <a href="http://wiki.jenkins-ci.org/display/JENKINS/Green+Balls" class="external-link" rel="nofollow">Green Balls</a>), by specifying the complete path to the icon.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">manager.addBadge(&quot;star-gold.gif&quot;, &quot;icon from Jenkins&quot;)
manager.addBadge(&quot;yellow.gif&quot;, &quot;icon from groovy-postbuild plugin&quot;)
manager.addBadge(&quot;/images/16x16/yellow.gif&quot;, &quot;icon from Jenkins&quot;)
manager.addBadge(&quot;/plugin/greenballs/16x16/green.gif&quot;, &quot;icon from greenballs plugin&quot;)</pre>
</div></div><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631355.gif" data-image-src="attachments/42469250/42631355.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631355" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example5.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h4 id="GroovyPostbuildPlugin-Example6">Example 6</h4><p>The script below displays on the build summary page all classes that use Sun proprietary API.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">pattern = ~/.*src\/main\/java\/(.*)\.java:[^ ]* (.*) is Sun proprietary API and may be removed in a future release.*/
def map = [:]
manager.build.logFile.eachLine { line -&gt;
    matcher = pattern.matcher(line)
    if(matcher.matches()) {
        ownClass = matcher.group(1).replaceAll(&quot;/&quot;, &quot;.&quot;)
        sunClass = matcher.group(2)
        map[ownClass] = sunClass
    }
}
if(map.size() &gt; 0) {
    def summary = manager.createSummary(&quot;warning.gif&quot;)
    summary.appendText(&quot;Classes using Sun proprietary API:&lt;ul&gt;&quot;, false)
    map.each {
        summary.appendText(&quot;&lt;li&gt;&lt;b&gt;$it.key&lt;/b&gt; - uses $it.value&lt;/li&gt;&quot;, false)
    }
    summary.appendText(&quot;&lt;/ul&gt;&quot;, false)
}</pre>
</div></div><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/42631356.gif" data-image-src="attachments/42469250/42631356.gif" data-unresolved-comment-count="0" data-linked-resource-id="42631356" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example6.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h4 id="GroovyPostbuildPlugin-Example7">Example 7</h4><p>The script below removes all badges and summaries from previous builds.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">currentBuildNumber = manager.build.number
for(i=1; i&lt;currentBuildNumber; i++) {
    if(manager.setBuildNumber(i)) {
        manager.removeBadges()
        manager.removeSummaries()
    }
}</pre>
</div></div><h4 id="GroovyPostbuildPlugin-Example8">Example 8</h4><p>The script below marks the running build as deployed and the previous build as undeployed.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">manager.addShortText(&quot;deployed&quot;)
manager.createSummary(&quot;gear2.gif&quot;).appendText(&quot;&lt;h2&gt;Successfully deployed&lt;/h2&gt;&quot;, false)

currentBuildNumber = manager.build.number
if(manager.setBuildNumber(currentBuildNumber - 1)) {
   actions = manager.build.actions
    actions.each { action -&gt;
        if (action.metaClass.hasProperty(action, &quot;text&quot;) &amp;&amp; action.text.contains(&quot;deployed&quot;)) {
            actions.remove(action)
        }
    }
    currDate = new Date().dateTimeString
    manager.addShortText(&quot;undeployed: $currDate&quot;, &quot;grey&quot;, &quot;white&quot;, &quot;0px&quot;, &quot;white&quot;)
    manager.createSummary(&quot;gear2.gif&quot;).appendText(&quot;&lt;h2&gt;Undeployed: $currDate&lt;/h2&gt;&quot;, false, false, false, &quot;grey&quot;)
}</pre>
</div></div><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/42469250/43843602.gif" data-image-src="attachments/42469250/43843602.gif" data-unresolved-comment-count="0" data-linked-resource-id="43843602" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="example8.GIF" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="42469250" data-linked-resource-container-version="53"></span></p><h4 id="GroovyPostbuildPlugin-Example9(thankstoKenBertelson)">Example 9 (thanks to Ken Bertelson)</h4><p>The script below changes the description of the first failed test.</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">def tr = manager.build.testResultAction.result
def cr = tr.failedTests.get(0)
cr.description = &quot;My CaseResult desc&quot;
</pre>
</div></div><h4 id="GroovyPostbuildPlugin-Example10(thankstoFrankMerrow)">Example 10 (thanks to Frank Merrow)</h4><p>Trivial, but hard to find the first time: Write a line to the job's Console Output:</p><div class="code panel pdl" style="border-style: solid;border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">manager.listener.logger.println(&quot;I want to see this line in my job&#39;s output&quot;);</pre>
</div></div><h2 id="GroovyPostbuildPlugin-Issues">Issues</h2><p>To report a bug or request an enhancement to this plugin please create a ticket in JIRA (you need to login or to sign up for an account). Also have a look on <a href="How-to-report-an-issue.html">How to report an issue</a></p><ul><li><a href="https://issues.jenkins-ci.org/issues/?jql=project%20%3D%20JENKINS%20AND%20status%20in%20(Open%2C%20%22In%20Progress%22%2C%20Reopened%2C%20%22In%20Review%22%2C%20Verified)%20AND%20component%20%3D%20%27groovy-postbuild-plugin%27%20" class="external-link" rel="nofollow">Open Issues</a></li><li><a href="https://issues.jenkins-ci.org/secure/CreateIssueDetails!init.jspa?pid=10172&amp;issuetype=1&amp;components=15685&amp;priority=4&amp;assignee=ikedam" class="external-link" rel="nofollow">Bug report</a></li><li><a href="https://issues.jenkins-ci.org/secure/CreateIssueDetails!init.jspa?pid=10172&amp;issuetype=4&amp;components=15685&amp;priority=4" class="external-link" rel="nofollow">Request or propose an improvement of existing feature</a></li><li><a href="https://issues.jenkins-ci.org/secure/CreateIssueDetails!init.jspa?pid=10172&amp;issuetype=2&amp;components=15685&amp;priority=4" class="external-link" rel="nofollow">Request or propose a new feature</a></li></ul><p><br/></p><h2 id="GroovyPostbuildPlugin-Changelog">Changelog</h2><h4 id="GroovyPostbuildPlugin-Version2.5(Jun24,2019)">Version 2.5 (Jun 24, 2019)</h4><ul><li>Requires Jenkins-<span class="blob-code-inner">2.<span class="x x-first x-last">121.1</span></span> and later.</li><li><p>New feature: <code>addHtmlBadge</code>  is available 
<span class="jira-issue resolved" data-jira-key="JENKINS-57917" >
                    <a href="https://issues.jenkins.io/browse/JENKINS-57917?src=confmacro" class="jira-issue-key"><img class="icon"
                                                                                      src="https://issues.jenkins.io/secure/viewavatar?size=xsmall&amp;avatarId=14681&amp;avatarType=issuetype"/>JENKINS-57917</a>
                            -
            <span class="summary">addHtmlBadge for groovy-postbuild</span>
                                                <span class="aui-lozenge aui-lozenge-subtle             aui-lozenge-success
     jira-macro-single-issue-export-pdf">Closed</span>
                </span>
</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">manager.addHtmlBadge(&#39;&lt;i&gt;Italic text&lt;/i&gt;&#39;);</pre>
</div></div></li><li>groovy-postbuild no longer requires Overall/Administer permission: 
<span class="jira-issue resolved" data-jira-key="JENKINS-54262" >
                    <a href="https://issues.jenkins.io/browse/JENKINS-54262?src=confmacro" class="jira-issue-key"><img class="icon"
                                                                                      src="https://issues.jenkins.io/secure/viewavatar?size=xsmall&amp;avatarId=14673&amp;avatarType=issuetype"/>JENKINS-54262</a>
                            -
            <span class="summary">Groovy Postbuild requires Overall/Administer permission</span>
                                                <span class="aui-lozenge aui-lozenge-subtle             aui-lozenge-success
     jira-macro-single-issue-export-pdf">Resolved</span>
                </span>
<ul><li>It caused problems when used with <a href="Authorize-Project-plugin.html">Authorize Project plugin</a></li></ul></li><li>Suppress &quot;WARNING: Avoid calling getLogFile on ...&quot; when used in pipeline jobs.<ul><li>It gets warned since <a href="Pipeline-Job-Plugin.html">Pipeline Job Plugin</a> 2.26.</li></ul></li></ul><h4 id="GroovyPostbuildPlugin-Version2.4.3(Nov18,2018)">Version 2.4.3 (Nov 18, 2018)</h4><ul><li class="confluence-link">FIX: removeSummary / removeSummaries doesn't work (throw UnsupportedOperationException) (<a href="http://54184@issue" class="external-link" rel="nofollow">JENKINS-54184</a>)</li></ul><h4 id="GroovyPostbuildPlugin-Version2.4.2(Aug8,2018)">Version 2.4.2 (Aug 8, 2018)</h4><ul><li>FIX: removeBadge / removeBadges doesn't work (throw UnsupportedOperationException) (<a href="https://issues.jenkins-ci.org/browse/JENKINS-52043">JENKINS-52043</a>)</li></ul><h4 id="GroovyPostbuildPlugin-Version2.4.1(May4,2018)">Version 2.4.1 (May 4, 2018)</h4><ul><li>Have <a href="Build-Monitor-Plugin.html">Build Monitor Plugin</a> not to cause errors. (<a href="https://issues.jenkins-ci.org/browse/JENKINS-50420" class="external-link" rel="nofollow">JENKINS-50420</a>)<ul><li>Introduced fake <code>GroovyPostbuildAction</code>.</li><li>The feature of build-monitor to cooperate with groovy-postbuild doesn't work yet. It requires the upcoming version of build-monitor plugin to have it work again.</li></ul></li></ul><h4 id="GroovyPostbuildPlugin-Version2.4(Mar25,2018)">Version 2.4 (Mar 25, 2018)</h4><ul><li><strong>Now built for Jenkins-2.60.3 and later</strong></li><li>Extract badge and summary features to <a href="https://plugins.jenkins.io/badge" class="external-link" rel="nofollow"><span class="confluence-link">Badge plugin</span></a> (<a href="https://issues.jenkins-ci.org/browse/JENKINS-43992" class="external-link" rel="nofollow">JENKINS-43992</a>).<br/><ul><li>You can use badge and summary features in pipeline only with badge-plugin. See <a href="Badge-Plugin.html">Badge Plugin</a> for more details.</li></ul></li><li>Sanitize HTML in the badges.<ul><li>You no longer be able to use HTML expressions in badge contents.</li></ul></li><li><span style="color: rgb(255,0,0);"><strong>Don't upgrade to this version if you use <a href="Build-Monitor-Plugin.html"><span style="color: rgb(255,0,0);">Build Monitor Plugin</span></a>.</strong></span><ul><li>Groovy-postbuild-2.4 breaks build-moitor-1.12 or earlier. Sorry.</li><li>Please postpone upgrading groovy-postbuild till fixing this issue: <a href="https://issues.jenkins-ci.org/browse/JENKINS-50420">JENKINS-50420</a></li><li>No new features in groovy-postbuild-2.4, and you can use groovy-postbuild-2.3.1.<ul><li>You can downgrade your groovy-postbuild in the Jenkins Plugin Management page.</li><li>You can download earlier versions of groovy-postbuild from &quot;Archives&quot; link in <a href="https://plugins.jenkins.io/groovy-postbuild" class="external-link" rel="nofollow">https://plugins.jenkins.io/groovy-postbuild</a></li></ul></li></ul></li><li><p>Some classes are migrated to badge-plugin. Please change classes in your codes if you access those classes:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Old Class</th><th class="confluenceTh">New Class</th></tr><tr><td class="confluenceTd">org.jvnet.hudson.plugins.groovypostbuild.GroovyPostbuildAction</td><td class="confluenceTd">com.jenkinsci.plugins.badge.action.BadgeAction</td></tr><tr><td colspan="1" class="confluenceTd">org.jvnet.hudson.plugins.groovypostbuild.GroovyPostbuildSummaryAction</td><td colspan="1" class="confluenceTd">com.jenkinsci.plugins.badge.action.BadgeSummaryAction</td></tr></tbody></table></div></li></ul><h4 id="GroovyPostbuildPlugin-Version2.3.1(Feb7,2016)">Version 2.3.1 (Feb 7, 2016)</h4><ul><li>Dependency to pipeline (aka. workflow) is optional (<a href="https://issues.jenkins-ci.org/browse/JENKINS-32589">JENKINS-32589</a>).</li></ul><h4 id="GroovyPostbuildPlugin-Version2.3(Dec27,2015)">Version 2.3 (Dec 27, 2015)</h4><ul><li><strong>Now built for Jenkins-1.609 and later</strong></li><li>Supports workflow (<a href="https://issues.jenkins-ci.org/browse/JENKINS-26918">JENKINS-26918</a>)<ul><li>You can use <code>manager</code> in workflow scripts.</li></ul></li></ul><h4 id="GroovyPostbuildPlugin-Version2.2.2(Oct17,2015)">Version 2.2.2 (Oct 17, 2015)</h4><ul><li>Added MIT License (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21270">JENKINS-21270</a>)</li></ul><h4 id="GroovyPostbuildPlugin-Version2.2.1(Aug18,2015)">Version 2.2.1 (Aug 18, 2015)</h4><ul><li>Improved the behavior with <a href="Template-Project-Plugin.html">Template Project Plugin</a> (<a href="https://issues.jenkins-ci.org/browse/JENKINS-21276">JENKINS-21276</a>)<ul><li>Prior versions disturbed the execution of <a href="Template-Project-Plugin.html">Template Project Plugin</a> when the build was failed (even if the groovy script succeeded).</li></ul></li></ul><h4 id="GroovyPostbuildPlugin-Version2.2(Dec19,2014)">Version 2.2 (Dec 19, 2014)</h4><ul><li>added getResult() as a whitelisted method (<a href="https://issues.jenkins-ci.org/browse/JENKINS-25738">JENKINS-25738</a>)</li></ul><h4 id="GroovyPostbuildPlugin-Version2.1(Oct25,2014)">Version 2.1 (Oct 25, 2014)</h4><ul><li>You can access other plugins in groovy scripts (<a href="https://issues.jenkins-ci.org/browse/JENKINS-14154">JENKINS-14154</a>)</li></ul><h4 id="GroovyPostbuildPlugin-Version2.0(Sep21,2014)">Version 2.0 (Sep 21, 2014)</h4><ul><li>Changed target Jenkins core from 1.466 to 1.509.4.</li><li>Introduced <a href="Script-Security-Plugin.html">Script Security Plugin</a>. (<a href="https://issues.jenkins-ci.org/browse/JENKINS-15212">JENKINS-15212</a>)<ul><li>You need reconfigure your projects or approve scripts. Have a look at <a href="#GroovyPostbuildPlugin-Migrationfrom1.X">#Migration from 1.X</a></li></ul></li><li>Added <code>manager.buildIsA(klcass)</code>. (<a href="https://issues.jenkins-ci.org/browse/JENKINS-24694">JENKINS-24694</a>)</li></ul><h4 id="GroovyPostbuildPlugin-Version1.10(July26,2014)">Version 1.10 (July 26, 2014)</h4><ul><li>added <code>envVars</code> and <code>getEnvVariable(key)</code></li></ul><h4 id="GroovyPostbuildPlugin-Version1.9(April29,2014)">Version 1.9 (April 29, 2014)</h4><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-21924">JENKINS-21924</a> Support run for matrix parent</li><li>change log level for each search from info to fine</li></ul><h4 id="GroovyPostbuildPlugin-Version1.8(August22,2012)">Version 1.8 (August 22, 2012)</h4><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-13024">JENKINS-13024</a> Error in log indicating a missing descriptor</li><li>added clickable badge</li><li>Changed required Jenkins version to 1.466</li></ul><h4 id="GroovyPostbuildPlugin-Version1.7(May2,2012)">Version 1.7 (May 2, 2012)</h4><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-13024">JENKINS-13024</a> Error in log indicating a missing descriptor</li></ul><h4 id="GroovyPostbuildPlugin-Version1.6">Version 1.6</h4><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-9383">JENKINS-9383</a> security - restrict access to internal objects</li></ul><p>Can use now additional classpath for groovy postbuild scripts to have them in a central location. Scriptler Plugin?</p><h4 id="GroovyPostbuildPlugin-Version1.5(November5,2011)">Version 1.5 (November 5, 2011)</h4><ul><li>Remove a html tag from the config page which causes an error on IE 7 (<a href="https://issues.jenkins-ci.org/browse/JENKINS-10079">JENKINS-10079</a>)</li></ul><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631320.gif">completed.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631321.gif">db_in.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631322.gif">db_out.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631323.gif">delete.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631324.gif">error.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631325.gif">folder.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631326.gif">green.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631327.gif">info.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631328.gif">red.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631329.gif">save.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631330.gif">success.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631331.gif">text.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631332.gif">warning.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631333.gif">yellow.gif</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631334.gif">example1.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631335.gif">example2.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631338.gif">example3.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631337.gif">example4.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631336.gif">example3.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631354.gif">example1s.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631355.gif">example5.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/42631356.gif">example6.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/43843601.gif">example7.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/43843602.gif">example8.GIF</a> (image/gif)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/74285063.png">scriptsecurity-enablesandbox.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/74285064.png">scriptsecurity-approvescript.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/42469250/74285065.png">scriptsecurity-approvejar.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:26</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
