<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Pipeline API Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Pipeline API Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (jglick)</span>, last modified by <span class='editor'> Unknown User (dnusbaum)</span> on Aug 29, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Pipeline: API <a href="https://plugins.jenkins.io/workflow-api" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
Plugin that defines Pipeline API.<p>A component of <a href="Pipeline-Plugin.html">Pipeline Plugin</a>.</p><h2 id="PipelineAPIPlugin-Changelog">Changelog</h2><h3 id="PipelineAPIPlugin-2.37(2019Aug29)">2.37 (2019 Aug 29)</h3><ul><li>Fix: Proxy exceptions when the exception class is implemented in a Pipeline script to avoid leaking the class loader for the Pipeline script through <code>ErrorAction</code>. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/102" class="external-link" rel="nofollow">PR 102</a>)</li><li>Fix: Avoid leaking <code>ThreadLocal</code> variables used in buffering-related logic for Pipeline logs. (<a href="https://issues.jenkins-ci.org/browse/JENKINS-58899" class="external-link" rel="nofollow">JENKINS-58899</a>)</li><li>Internal: Update tests to fix PCT failures. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/99" class="external-link" rel="nofollow">PR 99</a>)</li></ul><h3 id="PipelineAPIPlugin-2.36(2019Aug01)">2.36 (2019 Aug 01)</h3><ul><li>Developer: <code>TaskListenerDecorator</code> API is now stable instead of a beta API. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/97" class="external-link" rel="nofollow">PR 97</a>)</li><li>Developer: Introduce new <code>StepListener</code> API to allow interception of step execution. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/96" class="external-link" rel="nofollow">PR 96</a>)</li><li>Developer: Introduce new <code>FlowExecutionListener.onCreated</code> method. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/92" class="external-link" rel="nofollow">PR 92</a>)</li></ul><h3 id="PipelineAPIPlugin-2.35(2019Jun07)">2.35 (2019 Jun 07)</h3><ul><li>Fix: Prevent <code>StandardGraphLookupView.bruteForceScanForEnclosingBlocks</code> from throwing <code>IndexOutOfBoundsException</code> in some scenarios. (<a href="https://issues.jenkins-ci.org/browse/JENKINS-57805" class="external-link" rel="nofollow">JENKINS-57805</a>)</li><li>Fix: Catch additional types of exceptions when iterating through <code>FlowExecutionList</code>. Fixes some cases where Jenkins might fail to start because of a problem with a single build. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/93" class="external-link" rel="nofollow">PR 93</a>)</li></ul><h3 id="PipelineAPIPlugin-2.34(2019May10)">2.34 (2019 May 10)</h3><ul><li>Improvement: Add the name of the stash to the exception thrown when trying to create an empty stash. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/86" class="external-link" rel="nofollow">PR 86</a>)</li><li>Fix: Use the correct parameter to set <code>nodeAfter</code> in the 4-parameter <code>MemoryFlowChunk</code> constructor. (<a href="https://github.com/jenkinsci/workflow-api-plugin/pull/89" class="external-link" rel="nofollow">PR 89</a>)</li><li>Developer: Add a new API called <code>WarningAction</code> that can be added to a <code>FlowNode</code> to indicate that some non-fatal event occurred during execution of a step even though the step completed normally. (<a href="https://issues.jenkins-ci.org/browse/JENKINS-43995" class="external-link" rel="nofollow">JENKINS-43995</a>, <a href="https://issues.jenkins-ci.org/browse/JENKINS-39203" class="external-link" rel="nofollow">JENKINS-39203</a>)</li></ul><h3 id="PipelineAPIPlugin-2.33(2018Nov19)">2.33 (2018 Nov 19)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-54566" class="external-link" rel="nofollow">JENKINS-54566</a>: Prevent the error &quot;Failed to execute command Pipe.Flush(-1)&quot; from occurring by flushing streams before they have been garbage collected.</li></ul><h3 id="PipelineAPIPlugin-2.32(2018Nov09)">2.32 (2018 Nov 09)</h3><ul><li>Developer: Add an SPI for <code>LogStorage</code> implementations to satisfy <code>WorkflowRun#getLogFile</code>. (Part of <a href="https://issues.jenkins-ci.org/browse/JENKINS-54128" class="external-link" rel="nofollow">JENKINS-54128</a>, but version 2.29 of Pipeline Job Plugin contains the actual fix)</li></ul><h3 id="PipelineAPIPlugin-2.31(2018Oct26)">2.31 (2018 Oct 26)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-54073" class="external-link" rel="nofollow">JENKINS-54073</a>: Buffer remote log output to fix logging-related performance issues.</li></ul><h3 id="PipelineAPIPlugin-2.30(2018Oct12)">2.30 (2018 Oct 12)</h3><ul><li><a href="https://jenkins.io/jep/210" class="external-link" rel="nofollow">JEP-210</a>: redesigned log storage system for Pipeline builds. Should have no effect unless <a href="Pipeline-Job-Plugin.html">Pipeline Job Plugin</a> is also updated.</li><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-45693">JENKINS-45693</a>: <code>TaskListenerDecorator</code> API.</p></li><li>Improvement: Mark interrupted steps using a gray ball instead of a red ball in the Pipeline steps view to distinguish them from failures.</li></ul><h3 id="PipelineAPIPlugin-2.30-beta-1(2018Oct04)">2.30-beta-1 (2018 Oct 04)</h3><ul><li><a href="https://jenkins.io/jep/210" class="external-link" rel="nofollow">JEP-210</a>: redesigned log storage system for Pipeline builds. Should have no effect unless <a href="Pipeline-Job-Plugin.html">Pipeline Job Plugin</a> is also updated.</li><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-45693">JENKINS-45693</a>: <code>TaskListenerDecorator</code> API.</p></li><li>Improvement: Mark interrupted steps using a gray ball instead of a red ball in the Pipeline steps view to distinguish them from failures.</li></ul><h3 id="PipelineAPIPlugin-2.29(2018Jul24)-Bleeding-EdgeRelease">2.29 (2018 Jul 24) - Bleeding-Edge Release</h3><ul><li>No user-visible changes - test utilities for ArtifactManager</li></ul><h3 id="PipelineAPIPlugin-2.27.1(Unreleased)StableRelease">2.27.1 (Unreleased) Stable Release</h3><ul><li>Support for Incremental releases</li><li>Minor fix to displayed message format</li><li>Improvement: Mark interrupted steps using a gray ball instead of a red ball in the Pipeline steps view to distinguish them from failures.</li></ul><h3 id="PipelineAPIPlugin-2.28(June15,2018)-Bleeding-EdgeRelease">2.28 (June 15, 2018) - Bleeding-Edge Release</h3><ul><li><strong>Now requires Jenkins core <span style="color: rgb(36,41,46);">2.121</span></strong></li><li>Support for Incremental releases</li><li><strong>Beta</strong>: Support for VirtualFile use with stash &amp; artifacts (<a href="https://issues.jenkins-ci.org/browse/JENKINS-49635">JENKINS-49635</a>)</li><li>Minor fix to displayed message format</li></ul><h3 id="PipelineAPIPlugin-2.27(Apr12,2018)">2.27 (Apr 12, 2018)</h3><ul><li>Add ability to insert a placeholder for Step Arguments that cannot be serialized (API to support <a href="https://issues.jenkins-ci.org/browse/JENKINS-50752">JENKINS-50752</a> fix)</li><li>Improvement/Bugfix: Catch all errors thrown when saving the FlowNode in an error-safe way, to allow processes to complete normally </li></ul><h3 id="PipelineAPIPlugin-2.26(Feb23,2018)">2.26 (Feb 23, 2018)</h3><ul><li>Bugfix: Deal with additional unserializable Throwable types (<a href="https://issues.jenkins-ci.org/browse/JENKINS-49025">JENKINS-49025</a>)</li></ul><h3 id="PipelineAPIPlugin-2.25(Jan22,2018)">2.25 (Jan 22, 2018)</h3><ul><li><strong>Now Requires Java 8</strong> (core 2.60.3+)</li><li>Major new feature: Durability Settings &amp; Ability To Disable Pipeline Resume<br/><ul><li>Object and APIs to pass Durability Settings into an Execution - <a href="https://issues.jenkins-ci.org/browse/JENKINS-47300">JENKINS-47300</a></li><li>API for disabling resume for a Pipeline <a href="https://issues.jenkins-ci.org/browse/JENKINS-33761">JENKINS-33761</a></li><li>UI for setting a global default Durability setting to apply to pipelines</li></ul></li><li>Small micro-optimization to reduce garbage generated when displaying arguments for step</li></ul><h3 id="PipelineAPIPlugin-2.24(Dec4,2017)">2.24 (Dec 4, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-47725">JENKINS-47725</a> - Fix a WeakHashMap synchronization issue</li><li>Minor POM changes &amp; making an API slightly more restrictive in Generics it returns</li></ul><h3 id="PipelineAPIPlugin-2.23.1(Oct24,2017)">2.23.1 (Oct 24, 2017)</h3><ul><li>Revert <a href="https://issues.jenkins-ci.org/browse/JENKINS-40912" class="external-link" rel="nofollow">JENKINS-40912</a> -  the change caused stash steps to hang in specific cases.  Will be amended and re-released with fixes.</li></ul><h3 id="PipelineAPIPlugin-2.23(Oct24,2017)">2.23 (Oct 24, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40912" class="external-link" rel="nofollow">JENKINS-40912</a> - return list of files for stashing and unstashing</li></ul><h3 id="PipelineAPIPlugin-2.22(Sep26,2017)">2.22 (Sep 26, 2017)</h3><ul><li>New APIs to provide fast access to information about the structure of the pipeline graph<ul><li>Provides enclosing block information for nodes (<a href="https://issues.jenkins-ci.org/browse/JENKINS-27395">JENKINS-27395</a> and partial implementation of <a href="https://issues.jenkins-ci.org/browse/JENKINS-37573">JENKINS-37573</a>)</li><li>Lets us run parallels with numerous branches far more quickly by adding an isActive API &amp; making it performant (<a href="https://issues.jenkins-ci.org/browse/JENKINS-45553">JENKINS-45553</a></li><li>Provides a more correct isActive API rather than isRunning to determine if a step or block is complete or not (<a href="https://issues.jenkins-ci.org/browse/JENKINS-38223">JENKINS-38223</a>)</li></ul></li></ul><h3 id="PipelineAPIPlugin-2.20(Aug1,2017)">2.20 (Aug 1, 2017)</h3><ul><li>Make the PersistentAction API public to help with optimizing frequent action lookups in other pipeline plugins</li></ul><h3 id="PipelineAPIPlugin-2.19(Jul24,2017)">2.19 (Jul 24, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-44636" class="external-link" rel="nofollow">JENKINS-44636</a> New <code>QueueItemAction</code> for tracking node block queue status.</li></ul><h3 id="PipelineAPIPlugin-2.18(Jun29,2017)">2.18 (Jun 29, 2017)</h3><ul><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-31582">JENKINS-31582</a> Addition to <code>ArgumentsAction</code>.</p></li></ul><h3 id="PipelineAPIPlugin-2.17(Jun5,2017)">2.17 (Jun 5, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-43055">JENKINS-</a><a href="https://issues.jenkins-ci.org/browse/JENKINS-38536" class="external-link" rel="nofollow">38536</a> Fix finding the last FlowNode for an in-progress parallel with a long-running step</li></ul><h3 id="PipelineAPIPlugin-2.16(May30,2017)">2.16 (May 30, 2017)</h3><ul><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-43055">JENKINS-43055</a> Made <code>GraphListener</code> into an extension point.</p></li><li><p><a href="https://issues.jenkins-ci.org/browse/JENKINS-37327">JENKINS-37327</a> API allowing empty stashes.</p></li></ul><h3 id="PipelineAPIPlugin-2.15(May22,2017)">2.15 (May 22, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37324" class="external-link" rel="nofollow">JENKINS-37324</a> - Retain and display arguments to pipeline steps</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-43055" class="external-link" rel="nofollow">JENKINS-43055</a> - Add a FlowExecutionListener extension point</li></ul><h3 id="PipelineAPIPlugin-2.13(Apr13,2017)">2.13 (Apr 13, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-42895" class="external-link" rel="nofollow">JENKINS-42895</a> Fix sanity checks failing when running a pipeline with a parallel containing 0 branches</li></ul><h3 id="PipelineAPIPlugin-2.12(Mar6,2017)">2.12 (Mar 6, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-39839">JENKINS-39839</a> GraphAnalysis visitor fix: missing parallel events in specific nested/incomplete parallel cases</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-39841">JENKINS-39841</a> GraphAnalysis visitor fix: null StartNode for certain parallel events</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-41685">JENKINS-41685</a> GraphAnalysis visitor fix: duplicate events with certain parallel structures</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38536">JENKINS-38536</a> GraphAnalysis visitor fix: part of fix to timing computation for incomplete parallels - apply ordering to ensure the parallelEnd event triggers on the last parallel branch with activity.</li><li>Variety of small new GraphAnalysis features, such as sorting Comparators for FlowNodes and a one-step method to get all FlowNodes</li><li>Harden the GraphAnalysis visitor API guarantees and better documentation of the APIs and their assumptions + guarantees</li></ul><h3 id="PipelineAPIPlugin-2.11(Feb14,2017)">2.11 (Feb 14, 2017)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40771">JENKINS-40771</a> Race condition when scheduling &gt;1 Pipeline build simultaneously could cause builds to not be recorded in the list of running builds, and thus fail to resume after a restart.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-39346">JENKINS-39346</a> Certain kinds of nested exceptions could cause a messy build failure (extends fix made in 2.5).</li><li><code>FlowCopier</code> extensions.</li></ul><h3 id="PipelineAPIPlugin-2.10(Feb7,2017)">2.10 (Feb 7, 2017)</h3><ul><li>Add StepNode so plugins can obtain StepDescriptor information for a FlowNode without requiring a workflow-cps plugin dependency</li></ul><h3 id="PipelineAPIPlugin-2.8(Dec1,2016)">2.8 (Dec 1, 2016)</h3><ul><li>Fix: <a href="https://issues.jenkins-ci.org/browse/JENKINS-38536">JENKINS-38536</a> Resolve case where SimpleBlockVisitor does not find the correct <strong>last</strong> branch out of a set of parallels</li></ul><h3 id="PipelineAPIPlugin-2.7(Nov29,2016)">2.7 (Nov 29, 2016)</h3><ul><li>Fix: <a href="https://issues.jenkins-ci.org/browse/JENKINS-38089">JENKINS-38089</a> Fix a case where special parallel pipelines would break the graph analysis APIs</li><li>Feature: Add a new TagsAction class to allow attaching metadata (as key-value pairs) to steps as a precursor to <a href="https://issues.jenkins-ci.org/browse/JENKINS-39522">JENKINS-39522</a></li></ul><h3 id="PipelineAPIPlugin-2.6(Nov07,2016)">2.6 (Nov 07, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-39456">JENKINS-39456</a> Reduce memory usage of execution graph.</li><li>Clarifying Javadoc of <code>LinearScanner</code> about passing multiple heads.</li></ul><h3 id="PipelineAPIPlugin-2.5(Oct19,2016)">2.5 (Oct 19, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38867">JENKINS-38867</a> Improved performance of basic step graph calculations, for example as used by the stage view.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-34488">JENKINS-34488</a> Various errors when trying to run <code>assert</code> statements, and under certain other conditions as well.</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38640">JENKINS-38640</a> Improved performance of <code>stash</code> on large artifacts.</li></ul><h3 id="PipelineAPIPlugin-2.4(Sep23,2016)">2.4 (Sep 23, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38458">JENKINS-38458</a> - Make DepthFirstScanner obey the same ordering rules as FlowGraphWalker, strictly</li><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-38309">JENKINS-38309</a> - Make ForkScanner return parallel branches in last-&gt;first order for consistency with its general iteration</li></ul><h3 id="PipelineAPIPlugin-2.3(Sep07,2016)">2.3 (Sep 07, 2016)</h3><ul><li><a href="https://issues.jenkins-ci.org/browse/JENKINS-31155">JENKINS-31155</a> infrastructure.</li></ul><h3 id="PipelineAPIPlugin-2.2(Aug25,2016)">2.2 (Aug 25, 2016)</h3><ul><li>Major Feature: new suite of APIs for analyzing the graph of FlowNodes from an execution  (<a href="https://github.com/jenkinsci/workflow-api-plugin/tree/master/src/main/java/org/jenkinsci/plugins/workflow/graphanalysis" class="external-link" rel="nofollow">see package contents</a>)<ul><li>New FlowScanner classes, that provide utilities to iterate through, visit, or search FlowNodes in a specific order<ul><li>See <a href="https://github.com/jenkinsci/workflow-api-plugin/blob/master/src/main/java/org/jenkinsci/plugins/workflow/graphanalysis/AbstractFlowScanner.java" class="external-link" rel="nofollow">JavaDocs</a> for more info</li><li>LinearScanner (walks through nodes, ignoring all but 1 branch of a parallel: very fast)</li><li>LinearBlockHoppingScanner - like LinearScanner but jumps over blocks (only sees preceding or inclusing nodes)</li><li>DepthFirstScanner - visits all nodes, walking to start before visiting side branches (fairly fast).</li><li>ForkScanner - visits all nodes, providing a linear order of block iteration (all branches in a parallel are visited before continuing)<ul><li>Provides the more complex APIs below.</li></ul></li></ul></li><li>SAX-like API to slice the graph into blocks or runs of nodes (&quot;Chunks&quot;) and return information about them.<ul><li>ForkScanner.visitSimpleChunks does this execution</li><li>SimpleChunkVisitor interface: defines the basic callbacks used, implement this when collecting information.</li><li>ChunkFinder: defines the boundary conditions for starting &amp; ending a chunk<ul><li>A couple implementations included.</li></ul></li><li>Container classes/APIs for collections of FlowNodes (Classes named *FlowChunk)<ul><li>Classes *MemoryFlowChunk offer concrete representations that store FlowNodes in memory</li></ul></li><li>StandardChunkVisitor: minimum ChunkVisitor implementation (assumes chunks come one after another, no nesting)<ul><li>Extend me to store lists of chunks. </li></ul></li></ul></li></ul></li><li>Fix a NullPointerException with the FlowExecutionList</li><li>Dev-only: Javadocs &amp; .gitignore changes</li></ul><h3 id="PipelineAPIPlugin-2.1(Jun16,2016)">2.1 (Jun 16, 2016)</h3><ul><li>API for <a href="https://issues.jenkins-ci.org/browse/JENKINS-26130">JENKINS-26130</a>.</li><li>Diagnostics related to <a href="https://issues.jenkins-ci.org/browse/JENKINS-34281">JENKINS-34281</a>.</li></ul><h3 id="PipelineAPIPlugin-2.0(Apr05,2016)">2.0 (Apr 05, 2016)</h3><ul><li>First release under per-plugin versioning scheme. See <a href="https://github.com/jenkinsci/workflow-plugin/blob/82e7defa37c05c5f004f1ba01c93df61ea7868a5/CHANGES.md" class="external-link" rel="nofollow">1.x changelog</a> for earlier releases.</li><li>Introduced <code>FilePathUtils</code>.</li></ul>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:38</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
