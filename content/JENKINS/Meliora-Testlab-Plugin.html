<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Meliora Testlab Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Meliora Testlab Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (meliora)</span>, last modified on Oct 04, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View meliora-testlab <a href="https://plugins.jenkins.io/meliora-testlab" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2018-07-30/#SECURITY-847" class="external-link" rel="nofollow">API Key stored in plain text</a></li>
</ul>

</div></div>
Publishes results of automated tests to <a href="https://www.melioratestlab.com" class="external-link" rel="nofollow">Meliora Testlab</a>.<p>This plugin publishes the unit test results of a build to Meliora Testlab ALM/QA Tool. The plugin pushes the results to Testlab by creating a test run with Jenkins run unit tests mapped to Testlab's test cases. The plugin allows you to automatically open up issues in Testlab if tests in your Jenkins build should fail. Issues can also be automatically assigned to a user in your Testlab project. The plugin can be used as a post-build step in a traditional styled Jenkins job or as a step in a pipeline script. As pipelines are supported, the plugin should also work with the Blue Ocean UI.</p><p>In addition, this plugin optionally injects the needed CORS (Origin) headers for the Testlab's Jenkins Jobs widget to be able to communicate with your Jenkins. </p><p><br/></p><p><em><u>To use the latest version (1.17 or newer) of this plugin, you must be running Meliora Testlab - Automaton release. If for some reason, you are running an unsupported version such as Meliora Testlab - Lost Cosmonaut (or earlier), you must use the v1.16 of this plugin.</u></em></p><h2 id="MelioraTestlabPlugin-PushingresultsfromJenkinsToTestlab"><em>Pushing results from Jenkins To Testlab</em></h2><h3 id="MelioraTestlabPlugin-Howitworks">How it works</h3><ol><li>A job in Jenkins is run. The job has some unit tests (JUnit or TestNG tests), Robot Framework tests or TAP tests and is configured to publish the test results.</li><li>The job is also configured to publish the test results to some project in Testlab. The plugin parses the test results from step 1. and<ol><li>checks if an existing automated test run is found in Testlab (by matching test run's title, milestone, version, environment and automation source) and<ol><li>if so, the found test run is updated with test results,</li><li>if not, a new test run is added to the Testlab project.</li></ol></li><li>The results are mapped to test cases by applying the rules from the specified ruleset in your project. The rules map the test identifiers (typically class + method name such as <em>com.some.package.TestClass.failingTest) to test cases and</em><br/><ol><li>optionally create the needed test case stubs to the Testlab project if a test case is missing (&quot;Add and map&quot; rules) and</li><li>adds new items with the result found to the test run created or found above.</li></ol></li><li>If the ruleset (or plugin) is configured to add issues for failed unit tests the plugin<ol><li>adds new issues or re-opens existing issues for failed tests by honoring the issue adding strategy set and</li><li>assigns the issues to a user in Testlab if preferred.</li></ol></li></ol></li></ol><h4 id="MelioraTestlabPlugin-MappingTestlab&#39;stestcasestoJenkinsruntests">Mapping Testlab's test cases to Jenkins run tests</h4><p>When pushing results from Jenkins to Testlab the identifiers of automated tests sent by Jenkins are mapped to Testlab's test cases. The logic of which tests are mapped to which test cases are defined by the rules in a ruleset defined in your Testlab project. Automated test cases in Testlab hold an &quot;Automation rule value&quot; which can be used to map the test cases against test identifiers.</p><p>Test cases can be mapped to exact unit test identifiers or to a unit test class/method hierarchy. By using rules of rulesets, you can make complex logic on how your automation rules should be mapped to your Testlab project's test cases. A simple, quite typical, example follows where a simple &quot;startsWith&quot; typed map rule is in place:</p><ul><li>Test case: &quot;User login&quot;, Automation rule value: &quot;com.example.ui.login&quot;</li><li>Test case: &quot;Validate user password&quot;, Automation rule value: &quot;com.example.ui.login.Form.validatePassword&quot;</li><li>Test case: &quot;Validate user e-mail&quot;, Automation rule value: &quot;com.example.ui.login.Form.validateEmail&quot;</li></ul><p>.. would, for example, fail both &quot;User login&quot; and &quot;Validate user password&quot; test cases in your Testlab project if unit test &quot;com.example.ui.login.Form.validatePassword&quot; reports as failed by Jenkins.</p><p>For a parent level mapped Test case to report as passed all unit tests under it must pass. In the example above, if either &quot;com.example.ui.login.Form.validatePassword&quot; or &quot;com.example.ui.login.Form.validateEmail&quot; reports as failed the &quot;User login&quot; test case will be set as failed in Testlab. </p><p><strong><em>You can find rulesets on &quot;Test automation&quot; view in Testlab and read more about the logic of rulesets in Testlab's help manual. Also note: Versions before Testlab - Automaton used a custom field for holding the automation rule value. This is not needed anymore for Testlab - Automaton. &quot;Automation rule value&quot; field is inbuilt for automated typed test cases.</em></strong></p><h5 id="MelioraTestlabPlugin-Whatisatestidentifier?">What is a test identifier?</h5><p>The test identifier for which the linking of Testlab's test cases is made against is the classname + name pair of your xUnit results. Under the hood, if your build generates a results XML file as</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&lt;testsuite ...&gt;

    ...

    &lt;testcase classname=&quot;com.example.MyTests&quot; name=&quot;testThis&quot; ...&gt;&lt;/testcase&gt;

    &lt;testcase classname=&quot;com.example.AnotherTests&quot; name=&quot;testThat&quot; ...&gt;&lt;/testcase&gt;

&lt;/testsuite&gt;
</pre>
</div></div><p>.. the test case mapping field values are matched against values</p><ul><li>com.example.MyTests.testThis</li><li>com.example.AnotherTests.testThat</li></ul><p><em>For Robot Framework tests, the same logic applies. The identifier is constructed from the test suite name and the names of tests in the test tree hierarchy.</em></p><h5 id="MelioraTestlabPlugin-TestidentifiersforTAPtests">Test identifiers for TAP tests</h5><p>In addition to the xUnit compatible testing results, this plugin can be used to push the results of TAP tests (see &quot;Pushing TAP results&quot; below). The mapping identifiers for TAP results are constructed as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&lt;optional Mapping identifier prefix&gt;&lt;name of the results file with . replaced with _&gt;.&lt;title of the step with number of the step optionally included&gt;
</pre>
</div></div><p>For example, if the TAP results file <em>mytaptests.tap</em> includes</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">1..2
ok 1 Furry test
not ok 2 Cat test
</pre>
</div></div><p>.. and the plugin is configured as</p><ul><li>Include TAP file name in mapping identifier ?: Yes</li><li>Include test number in mapping identifier ?: No</li><li>Mapping identifier prefix: tap</li></ul><p>.. the identifiers for the tests in the file are constructed as</p><ul><li>tap-mytaptests_tap.Furry test</li><li>tap-mytaptests_tap.Cat test</li></ul><h3 id="MelioraTestlabPlugin-Settingupandconfiguringtheplugin">Setting up and configuring the plugin</h3><h4 id="MelioraTestlabPlugin-Testlabconfiguration">Testlab configuration</h4><p><strong>API key</strong></p><p>As the plugin calls your Testlab via Testlab's REST API an API key must be configured for security. Go to <em>Company management &gt; API keys</em> in Testlab and configure an API key to be used for authentication. Please see the Testlab’s inbuilt Help manual for more information on the configuration of API keys.</p><p><strong>Ruleset</strong></p><p>The ruleset and rules in it is needed to map the incoming results to test cases in your Testlab project. All projects have a &quot;default&quot; ruleset in place which follows the logic of earlier Testlab versions. If you wish to make alterations on rules, you can do them in the mapping workbench found in &quot;Test automation&quot; view in Testlab.</p><h4 id="MelioraTestlabPlugin-Configuringtheplugin">Configuring the plugin</h4><p>A typical configuration for this plugin in a free-style project job is seen in the picture below:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="900" src="attachments/69763477/182486471.png" data-image-src="attachments/69763477/182486471.png" data-unresolved-comment-count="0" data-linked-resource-id="182486471" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="plugin-automaton.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="69763477" data-linked-resource-container-version="39"></span></p><ul><li>The job has some unit tests and is configured to publish the results - JUnit tests in this example.</li><li>The plugin is configured to<ul><li>publish the test results to project PRJX in Testlab,</li><li>use ruleset &quot;jenkinsrules&quot; to map the tests to test cases,</li><li>assign the name of the Jenkins job as the automation source of these results,</li><li>create or update an automated test run titled 'Automated tests' with<ul><li>milestone as 'M1',</li><li>version as 'version 1.0',</li><li>environment as 'integration-env',</li></ul></li><li>to add issues <ul><li>per set strategy (a single issue with all failures merged) and</li><li>by trying to re-open issues in Testlab by looking up existing issues by matching the issue title and </li><li>assigning issues to Testlab's user &quot;agentsmith&quot;,</li></ul></li><li>tag test run with tags 'jenkins' and 'nightly',</li><li>to catenate steps of Robot Framework steps as a flat list,</li><li>set test run description according to the provided template,</li><li>pass values from environmental variables BROWSER and USERNAME to Testlab to be set as values to test case parameters,</li><li>to publish Robot Framework tests from output.xml found in the build workspace,</li><li>to push TAP results parsed by the TAP plugin<ul><li>by mapping each TAP step to a test case in Testlab and</li><li>by including the file name of the TAP results file to the mapping identifier and</li><li>by dropping the number of the TAP step from the mapping identifier and</li><li>by prefixing the mapping identifier for TAP results with &quot;tap-&quot;.</li></ul></li></ul></li><li>The plugin is set to push the results to Testlab<ul><li>at testcompany.melioratestlab.com with</li><li>Testlab's API key set as something.</li></ul></li></ul><p>For a more detailed description of each setting, please see the inbuilt help of the plugin by clicking the question mark icons in the plugin's configuration panel.</p><h5 id="MelioraTestlabPlugin-Maven2/3styledjobs">Maven2/3 styled jobs</h5><p>When configuring the plugin to be used with &quot;maven2/3 project&quot; styles jobs, using a post-build action to publish the result report should not be needed. Maven jobs make their aggregated Surefire reports available to the Testlab Plugin automatically. So, if your Maven job produces testing results (for example JUnit test results) configuring the &quot;Publish test results to Testlab&quot; post-build action is enough. </p><h5 id="MelioraTestlabPlugin-ConnectingtohostedTestlab">Connecting to hosted Testlab</h5><p>If you are using hosted Testlab (Testlab as a service from .melioratestlab.com) you should</p><ul><li>set your <em>Company ID</em> to match your ID in hosted service. This most likely matches your virtual host meaning, that if you are using Testlab from mycompany.melioratestlab.com your Company ID is <em>mycompany</em>.</li><li>Leave <em>I'm using Testlab On-premise</em> unchecked and when doing so, leave <em>Testlab URL</em> field blank.</li><li>Set other fields such as <em>Testlab API key</em> in accordance with the instructions.</li></ul><h5 id="MelioraTestlabPlugin-ConnectingtoTestlabon-premise">Connecting to Testlab on-premise</h5><p>If you are using Testlab from your own premises, you should</p><ul><li>leave <em>Company ID</em> field blank.</li><li>Check <em>I'm using Testlab On-premise</em>.</li><li>Enter a full URL address (including scheme, host name &amp; domain, and optional port, for example <a href="https://testlab.mycompany.com" class="external-link" rel="nofollow">https://testlab.mycompany.com</a>) of your Testlab server to the <em>Testlab URL</em> field.</li><li>Set other fields such as <em>Testlab API key</em> in accordance with the instructions.</li></ul><h5 id="MelioraTestlabPlugin-PushingTAPresults">Pushing TAP results</h5><p>The plugin supports publishing the results from TAP (<a href="https://testanything.org/tap-specification.html" class="external-link" rel="nofollow">Test Anything Protocol</a>) files found in the build. If not checked, the possible TAP results produced by the job are ignored.</p><p><strong>Important</strong>: For the results to be available for publishing, your Jenkins must be installed with <a href="TAP-Plugin.html">TAP Plugin</a> and the job must be configured with &quot;Publish TAP Results&quot; post-build action for the .tap files you wish to publish the results from.</p><h5 id="MelioraTestlabPlugin-PublishingRobotFrameworkresults">Publishing Robot Framework results</h5><p>With the plugin, you can upload your Robot Framework generated results in a detailed format. Check the appropriate option in your plugin settings and provide a resource pattern for your output.xml file. Please note that you must be running the Lilliput Sight (or later) build of Testlab for the server to have support for this feature.</p><h4 id="MelioraTestlabPlugin-Commonpluginconfiguration">Common plugin configuration</h4><p>You can set default values for Company ID, Testlab URL and Testlab's API key via Jenkins' global configuration. This way the 'Advanced settings' part of the plugin configuration seen above can be left unset and all jobs will use the values from global configuration. </p><h4 id="MelioraTestlabPlugin-Usingenvironmentalvariablesintheconfiguration">Using environmental variables in the configuration</h4><p>Most configuration fields of the plugin can be decorated with common <a href="https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables" class="external-link" rel="nofollow">Jenkins set environmental variables</a>. These tags are replaced with values of matching environmental variables. Please see the above picture of the plugin configuration for the format of the actual tags.  </p><p>In addition to the default variables set, plugin sets some easy to use common variables for your use:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh"><p>Variable</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>BUILD_FULL_DISPLAY_NAME</p></td><td class="confluenceTd"><p>Combined full display name of the build with job name and build number. For example 'my jenkins job #133'.</p></td></tr><tr><td class="confluenceTd"><p>BUILD_RESULT</p></td><td class="confluenceTd"><p>The result of the build. For example 'SUCCESS' or 'UNSTABLE'.</p></td></tr><tr><td class="confluenceTd"><p>BUILD_STATUS</p></td><td class="confluenceTd"><p>Summary of the overall build. For example 'broken for a long time'.</p></td></tr></tbody></table></div><p>Keep in mind that in addition, many Jenkins plugins set variables of their own which you may use. For example version control plugins often expose the changeset or revision number via an environmental variable.</p><h5 id="MelioraTestlabPlugin-Commonusesofvariabletags">Common uses of variable tags</h5><p>Using tags makes it possible for you to make your publishing dynamic. For example, let's say you make your product releases with a Jenkins job. You would like to preserve all test results of these release in your Testlab project. Using a static configuration will always overwrite the latest test run in Testlab (as the &quot;Test run title&quot; stays always the same). To remedy this, you could add a BUILD_NUMBER tag to your Test run title field. This way every time the release job is built in your Jenkins, this plugin would push the results of the job to a different test run in your Testlab project.</p><h5 id="MelioraTestlabPlugin-Testcaseparameters">Test case parameters</h5><p>In Testlab, you can design test cases as templates which include parameters. These parameters are given values when the test case is executed.</p><p>If the test cases you map your automated tests include test case parameters, you can pass values to these parameters from Jenkins' environmental variables. For example, if your test cases should contain a parameter BROWSER indicating the web browser the automated test was run with, you can set an environmental variable BROWSER and configure the plugin to pass this parameter to Testlab. Setting environmental variables in Jenkins is easy with the <a href="https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin" class="external-link" rel="nofollow">appropriate plugin</a>.</p><h4 id="MelioraTestlabPlugin-UsingtheplugininaPipelinescript">Using the plugin in a Pipeline script</h4><p>Previously, the plugin could be used in a Pipeline script by wrapping the plugin action to a job which was to be triggered by the actual script. From 1.16 version forward, the plugin officially supports Pipelines and can be used in a script with a &quot;melioraTestlab&quot; keyword.</p><h5 id="MelioraTestlabPlugin-Minimalstepconfiguration">Minimal step configuration</h5><p>As an example, the below publishes and sends all (junit compatible) results generated by the pipeline script to a SaaS hosted Testlab mapped with default ruleset:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: groovy; gutter: false; theme: Confluence" data-theme="Confluence">pipeline {
    agent any
    stages {
    	...
    }
    post {
        always {
            junit &#39;**/build/test-results/**/*.xml&#39;
            melioraTestlab(
                projectKey: &#39;PRJX&#39;,
                advancedSettings: [
                    companyId: &#39;mycompanyid&#39;,
                    apiKey: hudson.util.Secret.fromString(&#39;verysecretapikey&#39;),
                    testCaseMappingField: &#39;Test class&#39;
                ]
            )
        }
    }
} </pre>
</div></div><h5 id="MelioraTestlabPlugin-Stepconfigurationexamplewithallsettings"><br/>Step configuration example with all settings</h5><p>The below example includes all possible configuration values for the step. To know which configuration key is which, you can compare the values in example below to the screenshot in the chapter '<em>Configuring the plugin</em>' above.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: groovy; gutter: false; theme: Confluence" data-theme="Confluence">pipeline {
    agent any
    stages {
    	...
    }
    post {
        always {
            junit &#39;**/build/test-results/**/*.xml&#39;
            melioraTestlab(
                projectKey: &#39;PRJX&#39;,
                ruleset: &#39;rulesettouseformapping&#39;,
                automationSource: &#39;identifying source for the results&#39;
                rulesetSettings: [
                    testRunTitle: &#39;Automated tests&#39;,
                    milestone: &#39;M1&#39;,
                    testTargetTitle: &#39;Version 1.0&#39;,
                    testEnvironmentTitle: &#39;integration-env&#39;,
                    tags: &#39;jenkins nightly&#39;,
                    addIssueStrategy: &#39;DONOTADD&#39; or &#39;ADDPERTESTRUN&#39; or &#39;ADDPERTESTCASE&#39; or &#39;ADDPERRESULT&#39;,
                    reopenExisting: true,
                    assignToUser: &#39;agentsmith&#39;,
                    robotCatenateParentKeywords: true
                ]
                description: &#39;Jenkins build: ${BUILD_FULL_DISPLAY_NAME} ${BUILD_RESULT}, ${BUILD_URL}&#39;,
                parameters: &#39;BROWSER, USERNAME&#39;,
                publishTap: [
                    tapTestsAsSteps: true,
                    tapFileNameInIdentifier: true,
                    tapTestNumberInIdentifier: false,
                    tapMappingPrefix: &#39;tap-&#39;
                ],
                publishRobot: [
                    robotOutput: &#39;**/output.xml&#39;
                ],
                advancedSettings: [
                    companyId: &#39;mycompanyid&#39;,						// your companyId in SaaS/hosted service
                    apiKey: hudson.util.Secret.fromString(&#39;verysecretapikey&#39;),
                    usingonpremise: [
                        onpremiseurl: &#39;http://testlab.mycompany.com/&#39;	// optional, use only for on-premise installations
                    ]
                ]
            )
        }
    }
}            </pre>
</div></div><h2 id="MelioraTestlabPlugin-UsingTestlab&#39;sJenkinsJobsdashboardwidget"><em>Using Testlab's Jenkins Jobs dashboard widget</em></h2><h3 id="MelioraTestlabPlugin-EnablingtheuseofTestlab&#39;sJenkinsJobswidget">Enabling the use of Testlab's Jenkins Jobs widget</h3><p>Testlab offers a dashboard widget called <em>Jenkins Jobs</em> which enables you to control your Jenkins jobs from Testlab's dashboard. To make it possible for Testlab to communicate with your Jenkins server you must enable the needed options in the plugin configuration.</p><p>To enable remote calls from Testlab to your Jenkins server:</p><ul><li>Check <em>Allow remote calls from Testlab</em> option in the plugin configuration.</li><li>Enter the full URL address of your Testlab server to the <em>Origins</em> field. If you are using Testlab hosted, you should enter a value in format _<a href="https://mycompany.melioratestlab.com_" class="external-link" rel="nofollow">https://mycompany.melioratestlab.com_</a>. If you are using Testlab on-premise, make sure to enter the full URL address of your Testlab server. If for some reason you have to enter multiple allowed origins, you can enter multiple values by separating the values with a comma.</li></ul><p>What this does is that it adds the needed CORS-headers (Access-Control-Allow-Origin, Access-Control-Allow-Methods, Access-Control-Allow-Headers, Access-Control-Allow-Credentials) to your Jenkins server responses. <em>If your Jenkins is behind a reverse proxy you must set up your proxy to pass these headers through.</em></p><p>A typical global configuration for the plugin is seen in the picture below. Please note, that the screenshot is for a configured On-premise installation: <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/69763477/73596952.png" data-image-src="attachments/69763477/73596952.png" data-unresolved-comment-count="0" data-linked-resource-id="73596952" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jenkins_global_onpremise.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="69763477" data-linked-resource-container-version="39"></span></p><h4 id="MelioraTestlabPlugin-MyJenkinsissecuredandusesauthentication">My Jenkins is secured and uses authentication</h4><p>When using Jenkins Jobs widget, there are some security considerations if and when your Jenkins server is configured for security.</p><p>If and when your Jenkins server is configured for security and requires authentication,</p><ul><li>Jenkins Jobs widget on your Testlab dashboard must be configured with<ul><li><em>User name</em>, which should match to the user name of your Jenkins server account,</li><li><em>API token</em>, which is your personal API token found in your user account view and</li><li><em>Cross-Site Request Forgery prevention enabled in Jenkins</em> must be checked if your Jenkins server is configured for CSRF-protection.</li></ul></li></ul><p>If you are using a Jenkins server without authentication the above is not needed. The <em>Origins</em> value of &quot;*&quot; will allow requests from any domain, but it is not recommended for production use - <em>always set a valid Origins value to protect your Jenkins server</em>).</p><h4 id="MelioraTestlabPlugin-MyJenkinsJobswidgetcannotconnecttomyJenkinsserver">My Jenkins Jobs widget cannot connect to my Jenkins server</h4><p>If you have problems getting the Jenkins Jobs widget on your Testlab dashboard to connect to your Jenkins server, a good place to get some information why is your browsers logging console. Usually, browsers log out messages on cross-origin requests indicating the reason why the connection fails.</p><p>Some common errors you might encounter include:</p><ul><li>XMLHttpRequest cannot load <a href="https://myjenkins.server/job/somejob/api/json" class="external-link" rel="nofollow">https://myjenkins.server/job/somejob/api/json</a>. The 'Access-Control-Allow-Origin' header contains the invalid value '*.somedomain.com'. Origin 'https://mytestlab.server' is therefore not allowed access.</li></ul><p>Your <em>Origins</em> value in plugin configuration is invalid. The value must be a full URL of your Testlab server (&quot;https://mytestlab.server&quot; in the example above) or &quot;*&quot; wildcard for any domain.</p><ul><li>GET <a href="https://myjenkins.server/crumbIssuer/api/json" class="external-link" rel="nofollow">https://myjenkins.server/crumbIssuer/api/json</a> 404 (Not Found)</li></ul><p>Your Jenkins Jobs widget on your dashboard has &quot;Cross-Site Request Forgery prevention enabled in Jenkins&quot; checked and your Jenkins server <em>is not</em> configured for CSRF protection. You should uncheck this option on your dashboard widget and try again.</p><ul><li>Mixed Content: The page at 'https://mycompany.melioratestlab.com/testlab/#view1' was loaded over HTTPS, but requested an insecure XMLHttpRequest endpoint 'http://myjenkins.server/crumbIssuer/api/json'. This request has been blocked; the content must be served over HTTPS.</li></ul><p>Modern browsers block all traffic from secured host pages (pages served over HTTPS) to insecure addresses (HTTP). In this case, please <a href="https://wiki.jenkins-ci.org/display/JENKINS/Starting+and+Accessing+Jenkins" class="external-link" rel="nofollow">set up your Jenkins to use HTTPS/SSL</a> and use a secured Jenkins URL instead. There might be browser specific switches or configuration to go around the problem, but going around the security restriction on your own browser is not really a solution. </p><h2 id="MelioraTestlabPlugin-Commonpitfallsandfrequentlyaskedquestions">Common pitfalls and frequently asked questions</h2><h4 id="MelioraTestlabPlugin-Publishfailswith&#39;org.codegist.crest.io.RequestException:InternalServerError&#39;orsomeothernon-descriptiveexception"><em>Publish fails with 'org.codegist.crest.io.RequestException: Internal Server Error' or some other non-descriptive exception</em></h4><p>Make sure you</p><ol><li>target your project correctly in your plugin configuration. Enter the <strong>key</strong> of your project to &quot;Project key&quot; field instead of the name of the project and</li><li>enter the company ID correctly.</li></ol><h4 id="MelioraTestlabPlugin-HowdoIenableloggingforthisplugin?"><em>How do I enable logging for this plugin?</em></h4><p>To enable verbose logging of this plugin,</p><ol><li>go to Manage Jenkins &gt; System Log and click &quot;Add new log recorder&quot;.</li><li>Enter Name: testlab and add a new &quot;ALL&quot; level logger for package &quot;fi.meliora.testlab.ext&quot;, Save the changes.</li></ol><p>Run a job with the plugin configured and inspect the log for any activity by the plugin.</p><h4 id="MelioraTestlabPlugin-Publishfailswith&#39;Couldnotfindatestcasemappingfield&lt;field&gt;fortheproject.&#39;error"><em>Publish fails with 'Could not find a test case mapping field &lt;field&gt; for the project.' error</em></h4><p>You have configured the plugin to use a field named &lt;field&gt; for the mapping of tests to your Testlab test cases. The project you are pushing the results to does not have a custom field with a matching title. Please read through the chapter '<em>Mapping Testlab's test cases to Jenkins run tests</em>' above and make sure to configure an appropriate custom field to your project.</p><p><em>Please note, if this error is received, you most likely are using a non-supported old version of the plugin. You should highly consider upgrading the plugin and your Testlab to the latest Automaton version.</em></p><p><em style="color: rgb(210,73,57);font-weight: 600;letter-spacing: 0.0px;">I'm still having problems - what do I do?</em></p><p>Please, submit a support ticket via your Testlab and provide us</p><ol><li>a relevant fragment from your Jenkins' log file (see above), if any, and</li><li>a screenshot or other description of your plugin configuration.</li></ol><p>We are happy to help!</p><h3 id="MelioraTestlabPlugin-Changelog">Changelog</h3><h5 id="MelioraTestlabPlugin-Version1.17(2019-10-04):">Version 1.17 (2019-10-04):</h5><ul class="alternate"><li><a href="https://www.melioratestlab.com/testlab-automaton-release/" class="external-link" rel="nofollow">Meliora Testlab - Automaton</a> related changes<ul><li>Add support for rulesets,</li><li>automation sources and</li><li>issue adding strategies.</li></ul></li></ul><h5 id="MelioraTestlabPlugin-Version1.16(2019-01-30):">Version 1.16 (2019-01-30):</h5><ul class="alternate"><li>Add official support for Jenkins' Pipelines (bump required Jenkins core version to 2.7.3)</li><li>Clean up logging for CORSFilter</li></ul><h5 id="MelioraTestlabPlugin-Version1.15(2018-07-06):">Version 1.15 (2018-07-06):</h5><ul class="alternate"><li>Updated to comply with Testlab REST API changes</li><li>Try to remove unneeded class level dependency to TAP plugin when the feature is not really used</li><li><a href="https://jenkins.io/security/advisory/2018-07-30/#SECURITY-847" class="external-link" rel="nofollow">Fix security issue</a></li></ul><h5 id="MelioraTestlabPlugin-Version1.14(2017-04-24):">Version 1.14 (2017-04-24):</h5><ul class="alternate"><li>Fix: Added compatibility with TAP Plugin 2.1</li></ul><h5 id="MelioraTestlabPlugin-Version1.13(2017-04-24):">Version 1.13 (2017-04-24):</h5><ul class="alternate"><li>Native support for Robot Framework output</li><li>Fix: CORSFilter with correct crumb parameter</li><li>Upgrade Jenkins plugin parent POM</li></ul><h5 id="MelioraTestlabPlugin-Version1.10-1.12(-)">Version 1.10 - 1.12 (-)</h5><h5 id="MelioraTestlabPlugin-Version1.9(2016-04-22):">Version 1.9 (2016-04-22):</h5><ul class="alternate"><li>Better error reporting on Testlab API calls</li><li>Fix: Added missing junit plugin dependency</li></ul><h5 id="MelioraTestlabPlugin-Version1.8(-)">Version 1.8 (-)</h5><h5 id="MelioraTestlabPlugin-Version1.7(2015-10-23):">Version 1.7 (2015-10-23):</h5><ul class="alternate"><li>Support for TAP (Test Anything Protocol) results</li><li>Support for automatically creating test cases which cannot be mapped</li></ul><h5 id="MelioraTestlabPlugin-Version1.6(2015-07-10):">Version 1.6 (2015-07-10):</h5><ul class="alternate"><li>Support for passing environmental variables as test case parameters</li></ul><h5 id="MelioraTestlabPlugin-Version1.5(2015-04-24):">Version 1.5 (2015-04-24):</h5><ul class="alternate"><li>Support for settings tags for pushed test runs</li><li>Support for environmental variables in the configuration</li><li>Test run comment can now be set via a template</li></ul><h5 id="MelioraTestlabPlugin-Version1.4(-)">Version 1.4 (-)</h5><h5 id="MelioraTestlabPlugin-Version1.3(2015-03-26):">Version 1.3 (2015-03-26):</h5><ul class="alternate"><li>Fix: support aggregated reports in maven styled jobs</li></ul><h5 id="MelioraTestlabPlugin-Version1.2(2014-10-24):">Version 1.2 (2014-10-24):</h5><ul class="alternate"><li>Support for Testlab's milestones</li></ul><h5 id="MelioraTestlabPlugin-Version1.1(2014-07-07):">Version 1.1 (2014-07-07):</h5><ul class="alternate"><li>Support for Testlab's Jenkins Jobs dashboard widget added (CORS)</li><li>Support for Testlab on-premise</li><li>Better error handling</li></ul><h5 id="MelioraTestlabPlugin-Version1.0(2013-09-26):">Version 1.0 (2013-09-26):</h5><ul class="alternate"><li>Initial release.</li></ul><h3 id="MelioraTestlabPlugin-Knownissues">Known issues</h3><ul><li>-</li></ul><p><br/></p><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/74711129.png">melioratestlabplugin.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/73596952.png">jenkins_global_onpremise.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/69959710.png">melioratestlabplugin.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/74711130.png">melioratestlabplugin2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/78938163.png">melioratestlabplugin3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/80871486.png">melioratestlabplugin4.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/83558413.png">jenkins-plugin-girus.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/83558412.png">jenkins-plugin-girus.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/69763477/182486471.png">plugin-automaton.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:33</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
