<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Snyk Security Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Snyk Security Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (assaf)</span>, last modified by <span class='editor'> Unknown User (adrukh)</span> on Mar 25, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="SnykSecurityPlugin-V2"><span style="color: rgb(210,73,57);">V2</span></h1><p>Snyk Security Scanner is a Jenkins plugin that enables Jenkins users to test their applications against the <a href="https://snyk.io/vuln" class="external-link" rel="nofollow">Snyk vulnerability database</a>.</p><h1 id="SnykSecurityPlugin-GlobalConfiguration">Global Configuration</h1><p>Configure your Jenkins settings to install the Snyk Security Scanner plugin:</p><ol><li>Go to <strong>Manage Jenkins &gt; Manage Plugins &gt; Available</strong> and search for <strong>Snyk Security</strong>. Install the plugin.</li><li>Go to <strong>Manage Jenkins &gt; Global Tool Configuration</strong> and add a <strong>Snyk Installation</strong> to have the Snyk CLI available during Jenkins builds. We recommend using the <strong>latest</strong> version to keep up to date with new releases of the Snyk CLI.</li><li>Go to <strong>Manage Jenkins &gt; Credentials &gt; System </strong>and add a Snyk API Token to allow the Snyk Security Scanner to identify with Snyk. Specify a meaningful credential ID value in the <strong>ID</strong> field (i.e. `my-org-snyk-api-token`).</li></ol><p>Note: in order to install a pre-released version of the plugin, change the <strong>Update Site</strong> to <a href="http://updates.jenkins-ci.org/experimental/update-center.json" class="external-link" rel="nofollow">http://updates.jenkins-ci.org/experimental/update-center.json</a> in the <strong>Advanced</strong> settings. See <a href="https://jenkins.io/zh/blog/2013/09/23/experimental-plugins-update-center/" class="external-link" rel="nofollow">this post</a> for more details.</p><h1 id="SnykSecurityPlugin-ProjectConfiguration"><span style="color: rgb(210,73,57);">Project Configuration</span></h1><h3 id="SnykSecurityPlugin-FreestyleJobs">Freestyle Jobs</h3><p>Enable the Snyk Security Scanner in the project configuration page. To add Snyk Security Scanner to the project's build, select <strong>Build &gt; Add build step &gt; Invoke Snyk Security Task</strong>.</p><h4 id="SnykSecurityPlugin-BasicConfiguration">Basic Configuration</h4><ul><li><strong>When issues are found</strong> - This specifies if builds should be failed or continued based on issues found by Snyk.</li><li><strong>Monitor project on build</strong> - Take a current application dependencies snapshot for continuous monitoring by Snyk.</li><li><strong>Snyk token</strong> - The ID for the API token from the Credentials plugin to be used to authenticate with Snyk (credential type must be &quot;Snyk API token&quot;).</li><li><strong>Target file</strong> - The path to the application manifest file to be scanned by Snyk Security Scanner.</li><li><strong>Organisation</strong> - The Snyk organisation in which this project should be tested and monitored.</li><li><strong>Project name</strong> - A custom name for the Snyk project created for this Jenkins project on every build.</li></ul><h4 id="SnykSecurityPlugin-AdvancedConfiguration">Advanced Configuration</h4><p>To see the advanced configuration for the plugin, click the <strong>Advanced</strong> button. This section allows you to specify Snyk installation as well as additional runtime arguments for the Snyk Security Scanner.</p><ul><li><strong>Snyk installation</strong> - The Snyk installation as configured in the <strong>Global Tool Configuration</strong>.</li><li><strong>Additional arguments</strong> - Refer to the <a href="https://snyk.io/docs/using-snyk/" class="external-link" rel="nofollow">Snyk CLI help page</a> for information on additional arguments.</li></ul><h3 id="SnykSecurityPlugin-PipelineJobs">Pipeline Jobs</h3><p>The Snyk Security Scanner pipeline integration exposes the <strong>snykSecurity</strong> function to scan your dependencies as part of your pipeline script. We recommend to use the &quot;Snippet Generator&quot; to generate the needed step statement to copy into your Jenkinsfile.</p><p>The <strong>snykSecurity</strong> function accepts the following parameters:</p><ul><li><strong>snykInstallation</strong> - Snyk installation configured in the <strong>Global Tool Configuration</strong>.</li><li><strong>snykTokenId</strong> - The ID for the API token from the Credentials plugin to be used to authenticate to Snyk.</li><li><strong>additionalArguments</strong> (optional, default none) - Refer to the <a href="https://snyk.io/docs/using-snyk/" class="external-link" rel="nofollow">Snyk CLI help page</a> for information on additional arguments.</li><li><strong>failOnIssues</strong> (optional, default <strong>true</strong>) - This specifies if builds should be failed or continued based on issues found by Snyk.</li><li><strong>organisation</strong> (optional, default none) - The Snyk organisation in which this project should be tested and monitored.</li><li><strong>projectName</strong> (optional, default none) - A custom name for the Snyk project created for this Jenkins project on every build.</li><li><strong>severity</strong> (optional, default <strong>low</strong>)- Only report vulnerabilities of provided level or higher (low/medium/high).</li><li><strong style="letter-spacing: 0.0px;">targetFile</strong><span style="letter-spacing: 0.0px;"> (optional, default none) - The path to the manifest file to be used by Snyk.</span></li></ul><h2 id="SnykSecurityPlugin-Migrationfromv1"><span style="color: rgb(210,73,57);">Migration from v1</span></h2><p><strong style="letter-spacing: 0.0px;">Note</strong>: the new v2 of the plugin contains incompatible changes to v1 and will require you to adapt your Jenkins jobs. You have to perform global configuration steps as described [here|#global-configuration].</p><ul><li>The plugin does not requires Docker installation on master or worker nodes. Add a Snyk installer in the <strong>Global Tool Configuration</strong> section.</li><li>You don't need to pass Snyk API token as {{SNYK_TOKEN}} environment variable to the job. Add a credential of type Snyk API token.</li><li>Parameters 'Runtime Arguments', 'Docker Image', 'HTTP Proxy', 'HTTPS Proxy' are obsolete.</li><li>Pipeline syntax was changed, see 'Pipeline jobs' section for documentation.</li></ul><p><span style="letter-spacing: 0.0px;"><br/></span></p><div id="expander-966583262" class="expand-container"><div id="expander-control-966583262" class="expand-control"><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down"></span><span class="expand-control-text">V1 documentation</span></div><div id="expander-content-966583262" class="expand-content"><h1 id="SnykSecurityPlugin-GettingStarted"><span>Getting Started</span></h1><ul><li><p><span style="color: rgb(0,51,102);">This plugin adds Snyk Security Scanning to your project or pipeline, allowing you to test and monitor your projects for security and license issues.</span></p></li><li><p><span style="color: rgb(0,51,102);">This plugin requires Docker installation on the Jenkins worker in order to scan your dependencies.</span></p></li><li>Check <a href="https://hub.docker.com/r/snyk/snyk-cli/tags/" class="external-link" rel="nofollow">https://hub.docker.com/r/snyk/snyk-cli/tags/</a> for a full list of runtimes and package managers supported by the Snyk CLI Docker image.</li><li><p><span style="color: rgb(0,51,102);">Pull the relevant Snyk CLI docker image by running the following command:  <strong>docker pull snyk/snyk-cli:[tag]</strong>.</span></p></li><li><p>Add Jenkins user to the docker group: <strong>sudo usermod -aG docker &lt;jenkins-user&gt; </strong>and verify that the Jenkins user can run docker command without a sudo.</p></li></ul><h1 id="SnykSecurityPlugin-JobSetupandconfiguration">Job Setup and configuration</h1><ul><li>The Snyk plugin expects to have an environment variable called <strong>SNYK_TOKEN</strong> that contains Snyk's API key. We recommend adding the <strong>SNYK_TOKEN</strong> using Jenkins Credentials plugin.<ul><li>You can obtain your Snyk's API Key here - <a href="https://snyk.io/account" class="external-link" rel="nofollow">https://snyk.io/account</a> </li></ul></li><li>The Snyk plugin expects to run after the installation of the project's dependencies. (i.e 'npm install' or 'mvn install')</li><li>For Maven projects, the Snyk plugin expects to have an environment variable called <strong>MAVEN_REPO_PATH </strong>that contains the path to your maven repository (e.g <strong>/home/user/.m2</strong>)</li></ul><h1 id="SnykSecurityPlugin-HowtouseSnykPluginwithJenkinsfile:">How to use Snyk Plugin with Jenkinsfile:</h1><p style="margin-left: 30.0px;">Snyk pipeline integration expose <strong>snykSecurity</strong> function to scan your dependencies as part of your pipeline script. </p><p style="margin-left: 30.0px;">Usage example: <span style="color: rgb(255,0,0);"><strong>snykSecurity</strong>(tokenCredentialId: 'SNYK_TOKEN', failOnBuild: true, monitor: true) </span></p><p style="margin-left: 30.0px;"><span style="color: rgb(0,0,0);">This example call Snyk security with the credential Id we created using the Jenkins Credentials plugin, we choose to fail the build in case we find vulnerabilities and to take snapshot of the project current dependencies.</span></p><p style="margin-left: 30.0px;"><span style="color: rgb(0,0,0);">This function accepts the following parameters:</span></p><ul><li style="list-style-type: none;background-image: none;"><ul><li><em><strong>tokenCredentialId</strong> (Type: String) : </em>Snyk credential token id that contains Snyk's API token</li><li><strong>failOnBuild</strong> (<em>Type: Boolean</em>): Set to <strong>true</strong> to have the Jenkins build <strong>FAIL</strong> if Snyk detects issues in the project.</li><li><strong>monitor</strong> (<em>Type: Boolean</em>):  Set to <strong>true</strong> to monitor the project on every build by taking a snapshot of its current dependencies on <a href="http://snyk.io/" class="external-link" rel="nofollow">Snyk.io</a>. Selecting this option will keep you notified about newly disclosed vulnerabilities and remediation options in the project.</li><li><strong>organization</strong> (<em>Type: String</em>): <em>OPTIONAL -</em> set to the Snyk organisation in which this project should be tested and monitored. Leave empty to use your default organisation.</li><li><strong>packageName</strong> (<em>Type: String</em>): <em>OPTIONAL -</em>  set a custom name for the Snyk project created for this Jenkins project on every build. Leave empty for the project's name to be detected in the manifest file.</li><li><strong>targetFile</strong> (<em>Type: String</em>):  <em>OPTIONAL -</em> set to the relative path of the manifest file in the project. Leave empty for Snyk to auto-detect the manifest file in the project's root folder.</li><li><strong>envVars</strong> (<em>Type: String</em>):  <em>OPTIONAL -</em> set to the runtime agruments for the build tool invoked by Snyk. This is useful when you want to test a specific profile (in Maven) or configuration (in Gradle), or define system properties, such as <strong><strong>-Dpkg_version=1.4 -Pprod -s ./settings.xml</strong> </strong>for Maven or <strong>--configuration runtime -Pmyprop=myvalue</strong> for Gradle.</li><li><strong>dockerImage</strong> (<em>Type: String)</em>: <em>OPTIONAL - </em>set to the Docker image to be used by the plugin. Leave empty to use 'snyk/snyk-cli'. Inspect the different tags at <a href="https://hub.docker.com/r/snyk/snyk-cli/tags/" class="external-link" rel="nofollow">https://hub.docker.com/r/snyk/snyk-cli/tags</a> to choose the right runtime for your project.</li><li><strong>httpProxy</strong> (<em>Type: String</em>): OPTIONAL - set to the HTTP Proxy URL to be used in the Snyk plugin Docker container. Leave empty for no proxy.</li><li><strong>httpsProxy</strong> (<em>Type: String</em>): OPTIONAL - set to the HTTPS Proxy URL to be used in the Snyk plugin Docker container. Leave empty for no proxy.</li></ul></li></ul></div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/133958637/170920997.log">snyk-security-fail.log</a> (text/plain)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/133958637/170921006.log">snyk-security-fail2.log</a> (text/plain)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/133958637/173703621.log">snyk-slave-error.log</a> (text/plain)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:47</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
