<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Upload Pgyer Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Upload Pgyer Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (myroid)</span>, last modified on Oct 09, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h3 id="UploadPgyerPlugin-Asimpleintroduction">A simple introduction</h3><p><a href="https://github.com/jenkinsci/upload-pgyer-plugin/blob/master/README_cn.md" class="external-link" rel="nofollow">中文文档</a></p><p>Pgyer's official website is <a rel="nofollow" href="https://www.pgyer.com/" class="external-link">https://www.pgyer.com/</a></p><p>Pgyer can upload the application to the site, generate installation link and qr code user to open the installation link, or scan code qr code, can start installation.</p><p>So this plugin can be uploaded to the pgyer platform！<span>And it can put the fields returned by pgyer into an environment variable, which you can use in other build steps</span>, You can select <code>upload to pgyer</code> by adding build steps or adding post-build steps.</p><h3 id="UploadPgyerPlugin-Screenshot"><a class="external-link" href="https://github.com/jenkinsci/upload-pgyer-plugin#screenshot" rel="nofollow">Screenshot</a></h3><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="250" src="https://blog-1251473749.cos.ap-beijing.myqcloud.com/jenkins_upload_pgyer/upload-pgyer-1.png" data-image-src="https://blog-1251473749.cos.ap-beijing.myqcloud.com/jenkins_upload_pgyer/upload-pgyer-1.png"></span></p><h3 id="UploadPgyerPlugin-Introductiontoparameters"><a class="external-link" href="https://github.com/jenkinsci/upload-pgyer-plugin#introduction-to-parameters" rel="nofollow">Introduction to parameters</a></h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh">field</th><th class="confluenceTh">explanation</th></tr></thead><tbody><tr><td class="confluenceTd">pgyer uKey</td><td class="confluenceTd"><code>(APIV1 Required, APIV2 NO)</code> User Key, used to identify the current user's identity, <br/>for the same pgyer registered users, the value of the fixed!<br/><a rel="nofollow" href="https://www.pgyer.com/account/api" class="external-link">Click to get pgyer uKey</a></td></tr><tr><td class="confluenceTd">pgyer api_key</td><td class="confluenceTd"><code>(Required)</code> API Key, used to identify the identity of the API caller, <br/>if not specified, each interface needs to contain this parameter.<br/>For the same pgyer registered users, this value is fixed.<br/><a rel="nofollow" href="https://www.pgyer.com/account/api" class="external-link">Click to get pgyer api_key</a></td></tr><tr><td class="confluenceTd">scandir</td><td class="confluenceTd"><code>(Required)</code> need to upload ipa or apk file base dir path!<br/>The default is ${WORKSPACE}, It means the path of the current project!<br/>It is using ant's DirectoryScanner class, <a href="https://ant.apache.org/manual/api/org/apache/tools/ant/DirectoryScanner.html" rel="nofollow" class="external-link">click to see DirectoryScanner class</a><br/><span>It is equivalent to the parameters of the basedir method in the DirectoryScanner class!</span> <a rel="nofollow" href="https://ant.apache.org/manual/api/org/apache/tools/ant/DirectoryScanner.html#basedir" class="external-link">click to see basedir method</a></td></tr><tr><td class="confluenceTd">file wildcard</td><td class="confluenceTd"><code>(Required)</code> need to upload ipa or apk file name, Support wildcards,<br/>like this: **/Test?/*.apk<br/>It is using ant's DirectoryScanner class, <a href="https://ant.apache.org/manual/api/org/apache/tools/ant/DirectoryScanner.html" rel="nofollow" class="external-link">click to see DirectoryScanner class</a><br/><span>It is equivalent to the parameters of the includes method in the DirectoryScanner class!</span> <a href="https://ant.apache.org/manual/api/org/apache/tools/ant/DirectoryScanner.html#includes" rel="nofollow" class="external-link">click to see includes method</a></td></tr><tr><td class="confluenceTd">installType</td><td class="confluenceTd"><code>(Optional)</code> application installation, the value is (1,2,3).<br/>1: public, <br/>2: password installed, <br/>3: invitation to install.<br/>The default is 1 public!</td></tr><tr><td class="confluenceTd">password</td><td class="confluenceTd">(Optional) set the App installation password, if you do not want to set the password, please pass empty string, or not pass.</td></tr><tr><td class="confluenceTd">updateDescription</td><td class="confluenceTd"><code>(Optional)</code> version update description, please pass empty string, or not pass.</td></tr><tr><td class="confluenceTd">qrcodePath</td><td class="confluenceTd"><code>(Optional)</code> If you need to download the qrcode, please enter the save path of the qrcode!otherwise, not download!</td></tr><tr><td class="confluenceTd">envVarsPath</td><td class="confluenceTd"><code>(Optional)</code> if you need to save info, please enter save file path! otherwise, not save!</td></tr></tbody></table></div><h3 id="UploadPgyerPlugin-Runninglog"><a class="external-link" href="https://github.com/jenkinsci/upload-pgyer-plugin#running-log" rel="nofollow">Running log</a></h3><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://blog-1251473749.cos.ap-beijing.myqcloud.com/jenkins_upload_pgyer/jenkins_log.png" data-image-src="https://blog-1251473749.cos.ap-beijing.myqcloud.com/jenkins_upload_pgyer/jenkins_log.png"></span></p><p>When it runs successfully, you can use the environment variables that are used! for example:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://blog-1251473749.cos.ap-beijing.myqcloud.com/jenkins_upload_pgyer/upload-pgyer-3.png" data-image-src="https://blog-1251473749.cos.ap-beijing.myqcloud.com/jenkins_upload_pgyer/upload-pgyer-3.png"></span></p><h3 id="UploadPgyerPlugin-PgyerapiV1returnsadescriptionofthefield"><a href="https://github.com/jenkinsci/upload-pgyer-plugin#pgyer-apiv1-returns-a-description-of-the-field" class="external-link" rel="nofollow">Pgyer apiV1 returns a description of the field</a></h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh">environment variables</th><th class="confluenceTh">explanation</th></tr></thead><tbody><tr><td class="confluenceTd">appKey</td><td class="confluenceTd">App Key</td></tr><tr><td class="confluenceTd">appType</td><td class="confluenceTd">Application type (1:iOS; 2: Android)</td></tr><tr><td class="confluenceTd">appIsLastest</td><td class="confluenceTd">Is it the latest version (1: yes; 2: no)</td></tr><tr><td class="confluenceTd">appFileSize</td><td class="confluenceTd">App file size</td></tr><tr><td class="confluenceTd">appName</td><td class="confluenceTd">App Name</td></tr><tr><td class="confluenceTd">appVersion</td><td class="confluenceTd">App Version</td></tr><tr><td class="confluenceTd">appVersionNo</td><td class="confluenceTd">For Android version Numbers, iOS is always 0</td></tr><tr><td class="confluenceTd">appBuildVersion</td><td class="confluenceTd">pgyer builds build Numbers that distinguish historical versions</td></tr><tr><td class="confluenceTd">appIdentifier</td><td class="confluenceTd">Application package name, iOS for BundleId, Android for package name</td></tr><tr><td class="confluenceTd">appIcon</td><td class="confluenceTd">Application the icon of the key, get the address <a href="http://o1wh05aeh.qnssl.com/image/view/app_icons/%5BappIcon%5D" rel="nofollow" class="external-link">http://o1wh05aeh.qnssl.com/image/view/app_icons/[appIcon]</a></td></tr><tr><td class="confluenceTd">appDescription</td><td class="confluenceTd">Introduction to the Application</td></tr><tr><td class="confluenceTd">appUpdateDescription</td><td class="confluenceTd">Application update description</td></tr><tr><td class="confluenceTd">appScreenshots</td><td class="confluenceTd">Application the screenshot of the key, get the address <a rel="nofollow" href="http://o1whyeemo.qnssl.com/image/view/app_screenshots/%5BappScreenshots%5D" class="external-link">http://o1whyeemo.qnssl.com/image/view/app_screenshots/[appScreenshots]</a></td></tr><tr><td class="confluenceTd">appShortcutUrl</td><td class="confluenceTd">Application short links</td></tr><tr><td class="confluenceTd">appCreated</td><td class="confluenceTd">Application upload time</td></tr><tr><td class="confluenceTd">appUpdated</td><td class="confluenceTd">Application update time</td></tr><tr><td class="confluenceTd">appQRCodeURL</td><td class="confluenceTd">Application the qr code address</td></tr><tr><td class="confluenceTd">appPgyerURL</td><td class="confluenceTd">Application pgyer url</td></tr><tr><td class="confluenceTd">appBuildURL</td><td class="confluenceTd">Application build pgyer url</td></tr></tbody></table></div><h3 id="UploadPgyerPlugin-PgyerapiV2returnsadescriptionofthefield"><a class="external-link" href="https://github.com/jenkinsci/upload-pgyer-plugin#pgyer-apiv2-returns-a-description-of-the-field" rel="nofollow">Pgyer apiV2 returns a description of the field</a></h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh">environment variables</th><th class="confluenceTh">explanation</th></tr></thead><tbody><tr><td class="confluenceTd">buildKey</td><td class="confluenceTd">Build Key is the only index ID that identifies the application</td></tr><tr><td class="confluenceTd">buildType</td><td class="confluenceTd">Application Type（1:iOS; 2:Android）</td></tr><tr><td class="confluenceTd">buildIsFirst</td><td class="confluenceTd">Is it the first App? (1: Yes; 2: No;)</td></tr><tr><td class="confluenceTd">buildIsLastest</td><td class="confluenceTd">Is it the newest? (1: Yes; 2: No;)</td></tr><tr><td class="confluenceTd">buildFileSize</td><td class="confluenceTd">The size of App</td></tr><tr><td class="confluenceTd">buildName</td><td class="confluenceTd">App Name</td></tr><tr><td class="confluenceTd">buildVersion</td><td class="confluenceTd">The default is 1.0 (is the logo that to advertise the application, for example: 1.1, 8.2.1, etc.).</td></tr><tr><td class="confluenceTd">buildVersionNo</td><td class="confluenceTd">The version number of the uploaded package, the default is 1 (that is, the compiled version number, in general, the compiler will change once the version number. For iOS, is a string type; for Android it is an integer. For example: 1001 , 28 etc.)</td></tr><tr><td class="confluenceTd">buildBuildVersion</td><td class="confluenceTd">pgyer builds build Numbers that distinguish historical versions</td></tr><tr><td class="confluenceTd">buildIdentifier</td><td class="confluenceTd">Application package name, iOS for BundleId, Android for package name</td></tr><tr><td class="confluenceTd">buildIcon</td><td class="confluenceTd">Icon Key of application, URL is <a rel="nofollow" href="https://www.pgyer.com/image/view/app_icons/%5BIcon" class="external-link">https://www.pgyer.com/image/view/app_icons/[Icon</a> Key of application]</td></tr><tr><td class="confluenceTd">buildDescription</td><td class="confluenceTd">Application Description</td></tr><tr><td class="confluenceTd">buildUpdateDescription</td><td class="confluenceTd">Application Update Description</td></tr><tr><td class="confluenceTd">buildScreenShots</td><td class="confluenceTd">Application screenshots key, the address is <a href="https://www.pgyer.com/image/view/app_screenshots/%5BApplication" rel="nofollow" class="external-link">https://www.pgyer.com/image/view/app_screenshots/[Application</a> screenshots key]</td></tr><tr><td class="confluenceTd">buildShortcutUrl</td><td class="confluenceTd">App Download Url</td></tr><tr><td class="confluenceTd">buildCreated</td><td class="confluenceTd">App Upload time</td></tr><tr><td class="confluenceTd">buildUpdated</td><td class="confluenceTd">App Update time</td></tr><tr><td class="confluenceTd">buildQRCodeURL</td><td class="confluenceTd">App QR code Url</td></tr><tr><td class="confluenceTd">appPgyerURL</td><td class="confluenceTd">Application pgyer url</td></tr><tr><td class="confluenceTd">appBuildURL</td><td class="confluenceTd">Application build pgyer url</td></tr></tbody></table></div><h3 id="UploadPgyerPlugin-ChangeLog"><a class="external-link" href="https://github.com/jenkinsci/upload-pgyer-plugin#change-log" rel="nofollow">Change Log</a></h3><p style="">Version 1.33(2019-09-07)</p><ul style=""><li>Fixed<span> </span><a rel="nofollow" href="https://issues.jenkins-ci.org/browse/SECURITY-1044" style="text-decoration: none;" class="external-link">SECURITY-1044</a></li><li>Upgrade gson 2.8.5</li></ul><p>Version 1.31(2018-05-07)</p><ul><li>Upgrade gson 2.8.4</li><li>Optimize upload log</li><li>Change the document image address.</li></ul><p>Version 1.30(2018-04-16）</p><ul><li>Remove jsoup, and import okhttp that be used network</li><li>Add upload file progress</li><li>Add <a href="https://www.pgyer.com/doc/view/api#uploadApp" rel="nofollow" class="external-link">pgyer api v2</a></li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/135464391/135464388.png">upload-pgyer.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/135464391/135464389.png">upload-pgyer-2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/135464391/135464390.png">upload-pgyer-3.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:55</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
