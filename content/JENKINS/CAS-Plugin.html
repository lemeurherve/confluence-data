<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : CAS Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : CAS Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (fcrespel)</span>, last modified on Jan 21, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View CAS <a href="https://plugins.jenkins.io/cas-plugin" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://www.jenkins.io/security/advisory/2021-06-30/#SECURITY-2387" class="external-link" rel="nofollow">Open redirect vulnerability</a></li>
	<li><a href="https://jenkins.io/security/advisory/2018-06-04/#SECURITY-809" class="external-link" rel="nofollow">Server-side request forgery</a></li>
	<li><a href="https://jenkins.io/security/advisory/2017-04-10/" class="external-link" rel="nofollow">Arbitrary code execution vulnerability</a></li>
</ul>

</div></div>
This plugin enables use of <a href="https://www.apereo.org/projects/cas" class="external-link" rel="nofollow">CAS</a> (Central Authentication Service) as an authentication source for Jenkins, with single sign-on and single sign-out support.<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This plugin is meant to replace the <a href="CAS1-Plugin.html">CAS1 Plugin</a> by providing new features along existing ones, while adding support for more protocols (e.g. CAS 2.0/3.0 and SAML 1.1)</p></div></div><h1 id="CASPlugin-Setup">Setup</h1><h2 id="CASPlugin-BasicSetup">Basic Setup</h2><ol><li>Install the plugin from <strong>Manage Jenkins</strong> &gt; <strong>Manage Plugins</strong> &gt; <strong>Available</strong> &gt; <strong>CAS Plugin</strong>.</li><li>Go to <strong>Manage Jenkins</strong> &gt; <strong>Configure Global Security</strong>, check <strong>Enable Security</strong> and select <strong>CAS (Central Authentication Service)</strong> as the Security Realm.</li><li>Next to <strong>CAS Server URL</strong>, enter the base URL to your CAS server, e.g. <code><a href="https://cas.example.com/cas" class="external-link" rel="nofollow">https://cas.example.com/cas</a></code></li><li>Next to <strong>CAS Protocol</strong>, select the protocol to use to communicate with CAS, e.g. <strong>SAML 1.1</strong> if you are using Apereo CAS Server 3.x or higher, or <strong>CAS 3.0</strong> if you are using Apereo CAS Server 4.x or higher.</li><li>If there are no warnings, click the <strong>Save</strong> button at the bottom and attempt logging in.</li></ol><h2 id="CASPlugin-AdvancedSetup">Advanced Setup</h2><p>Additional configuration options are available under the <strong>Security Realm</strong> section:</p><ul><li><strong>Force Renewal:</strong> when checked, single sign-on is disabled: even if a CAS session is already open, the user will have to provide credentials again to confirm his identity.</li><li><strong>Enable REST API:</strong> when checked, the <a href="https://apereo.github.io/cas/4.2.x/protocol/REST-Protocol.html" class="external-link" rel="nofollow">CAS REST API</a> will be used to authenticate Jenkins API requests (in addition to Jenkins API keys).</li><li><strong>Enable Single Sign-Out:</strong> when checked, single sign-out is enabled: whenever the user logs out of CAS (e.g. when logging out of another CAS-enabled application), the corresponding Jenkins session will be destroyed and the local user logged out as well. Note that for this to work, the CAS server must be able to communicate with Jenkins using the service URL that was passed to it during login.</li></ul><p>Several protocols implemented by CAS are available in the <strong>CAS Protocol</strong> dropdown (click the <strong>Advanced...</strong> button to reveal more options):</p><ul><li><strong>CAS 1.0:</strong> a text-based legacy protocol. Custom extensions may provide support for roles, which can be parsed with a Groovy script specified in <strong>Roles Validation Script</strong>.</li><li><strong>CAS 2.0:</strong> a XML-based protocol. It supports <strong>Proxy Tickets</strong>, allowing external applications already secured with CAS to authenticate in Jenkins without requiring user input or password. Custom extensions may provide support for attributes.</li><li><strong>CAS 3.0:</strong> a XML-based protocol. It supports <strong>Proxy Tickets</strong>, allowing external applications already secured with CAS to authenticate in Jenkins without requiring user input or password. It fully supports attributes out-of-the-box, without requiring custom extensions. <strong>This is a recommended protocol for Apereo CAS Server 4.x and higher.</strong></li><li><strong>SAML 1.1:</strong> a XML-based protocol. It fully supports attributes out-of-the-box, without requiring custom extensions. <strong>This is a recommended protocol for Apereo CAS Server 3.x and higher.</strong></li></ul><p><a href="https://apereo.github.io/cas/4.2.x/integration/Attribute-Release.html" class="external-link" rel="nofollow">Attributes</a> are an easy (and recommended) way to add full name and email address information to an authenticated user, as well as roles/groups membership. CAS 1.0 response parsing with a custom Groovy script is made available as a legacy option for backward compatibility with the <a href="CAS1-Plugin.html">CAS1 Plugin</a>.</p><h1 id="CASPlugin-Usage">Usage</h1><h2 id="CASPlugin-Accessfromexternal/scriptedclients">Access from external/scripted clients</h2><p>By default, when using the CAS plugin for authentication, you <strong>cannot use a regular username/password</strong> for remote authentication into Jenkins. This is by design, as the CAS protocol does not allow &quot;direct&quot; authentication and works with secure redirections, which are not compatible with remote calls such as SVN or GitHub hooks.</p><p>You have two options:</p><ul><li>Use the user's <strong>API token</strong> as the password; you can find it by going to the <strong>Configuration</strong> page of the <strong>Jenkins user</strong> you intend to use for external access. This API token does not expire and you may regenerate it as you need.</li><li>Enable the <strong>REST API</strong> option in the plugin configuration, to use the <a href="https://apereo.github.io/cas/4.2.x/protocol/REST-Protocol.html" class="external-link" rel="nofollow">CAS REST API</a> to process the real username/password. The CAS REST protocol must be enabled server-side for this option to work.</li></ul><p>See the following page for more information: <a href="Authenticating-scripted-clients.html">Authenticating scripted clients</a></p><h2 id="CASPlugin-JenkinsURLwhenusedbehindareverseproxy">Jenkins URL when used behind a reverse proxy</h2><p>When using Jenkins behind a reverse proxy, depending on configuration the URL users get redirected to after authentication may be wrong. If this is the case:</p><ol><li>Go to <strong>Manage Jenkins</strong> &gt; <strong>Configure System</strong>.</li><li>Under <strong>Jenkins Location</strong>, make sure the <strong>Jenkins URL</strong> is valid and can be reached by users. It will be used by CAS to redirect back to Jenkins after authentication.</li></ol><h1 id="CASPlugin-Troubleshooting">Troubleshooting</h1><h2 id="CASPlugin-SSLcertificateissues">SSL certificate issues</h2><p>Please see the <a href="https://wiki.jasig.org/display/casum/ssl+troubleshooting+and+reference+guide" class="external-link" rel="nofollow">SSL Troubleshooting and Reference Guide</a> from the CAS Project.</p><h2 id="CASPlugin-IssuevalidatingSAML1.1tickets">Issue validating SAML 1.1 tickets</h2><p>If Jenkins systematically fails to validate SAML 1.1 tickets, make sure to check whether the <strong>system clock</strong> of your Jenkins and CAS servers are <strong>synchronized</strong>.<br/> Indeed, the timestamp at which SAML 1.1 tickets were generated is checked when validating them, with a configurable tolerance (see &quot;Time Tolerance&quot; plugin option).<br/> Out-of-sync clocks may log errors such as &quot;skipping assertion that's not yet valid&quot; in Jenkins.</p><h2 id="CASPlugin-Failuretoauthenticateexternal/scriptedclients">Failure to authenticate external/scripted clients</h2><p>By default, using normal username/password is not possible from external/scripted clients when using CAS.<br/> You may use an <strong>API token</strong> instead and/or enable the <strong>REST API</strong> support. See &quot;Usage&quot; section above for more details.</p><h2 id="CASPlugin-Missinggroupmembershipswhenloggingwithexternal/scriptedclients">Missing group memberships when logging with external/scripted clients</h2><p>This issue (<a href="https://issues.jenkins-ci.org/browse/JENKINS-20064" class="external-link" rel="nofollow">JENKINS-20064</a>) is fixed in Jenkins 1.556 and higher, provided that the user logged in through the web interface at least once.<br/> This limitation does not apply when the REST API option is enabled along with the real username/password.</p><h2 id="CASPlugin-InvalidJenkinsURLafterlogginginthroughCAS">Invalid Jenkins URL after logging in through CAS</h2><p>If Jenkins is behind a reverse proxy, it may not be able to detect its own URL by itself. In this case, you need to manually configure the Jenkins URL.<br/> See &quot;Usage&quot; section above for a solution.</p><h1 id="CASPlugin-Changelog">Changelog</h1><h2 id="CASPlugin-Version1.4.3(2019-01-21)">Version 1.4.3 (2019-01-21)</h2><ul><li>Fixed login redirect loop caused by changes in Jenkins 2.160 and 2.150.2 LTS (SECURITY-901, see <a href="https://jenkins.io/security/advisory/2019-01-16/#SECURITY-901" class="external-link" rel="nofollow">2019-01-16 security advisory</a>)</li></ul><h2 id="CASPlugin-Version1.4.2(2018-06-04)">Version 1.4.2 (2018-06-04)</h2><ul><li>Fixed security issue (SECURITY-809, see <a href="https://jenkins.io/security/advisory/2018-06-04/" class="external-link" rel="nofollow">2018-06-04 security advisory</a>)</li></ul><h2 id="CASPlugin-Version1.4.1(2017-10-01)">Version 1.4.1 (2017-10-01)</h2><ul><li>Fixed NullPointerException in SessionUrlAuthenticationSuccessHandler, that could occur when coming back from CAS on some servlet containers (JENKINS-46993).</li><li>Fixed NullPointerException in Cas10Protocol, when using an empty Groovy role parsing script (JENKINS-45441).</li></ul><h2 id="CASPlugin-Version1.4.0(2017-05-09)">Version 1.4.0 (2017-05-09)</h2><ul><li>Fixed security issues related to Groovy script execution in CAS Protocol 1.0 configuration (SECURITY-488, see <a href="https://jenkins.io/security/advisory/2017-04-10/#cas-plugin" class="external-link" rel="nofollow">2017-04-10 security advisory</a>).</li></ul><h2 id="CASPlugin-Version1.3.0(2016-10-19)">Version 1.3.0 (2016-10-19)</h2><ul><li>Updated CAS client version to 3.4.1 with less dependencies and support for CAS Protocol 3.0.</li><li>Added CAS REST API support to authenticate Jenkins API calls with real username/password (thanks to Sebastian Sdorra).</li><li>Bumped minimum Jenkins version to 1.625.3 (and require Java 7).</li><li>Restored compatibility with Jenkins version 2.19.1 when using SAML 1.1 (missing dependency no longer required).</li></ul><h2 id="CASPlugin-Version1.2.0(2015-09-13)">Version 1.2.0 (2015-09-13)</h2><ul><li>Updated spring-security and CAS client versions with improved robustness and compatibility (thanks to Waldemar Biller).</li><li>Improved detection of Jenkins root URL.</li><li>Fixed usage of forceRenewal parameter in the ticket validator.</li></ul><h2 id="CASPlugin-Version1.1.2(2014-06-02)">Version 1.1.2 (2014-06-02)</h2><ul><li>Better handling of multi-valued attributes during Jenkins user creation/update (thanks to Maxime Besson).</li><li>Changed 'Try again' link in failed login page to be relative instead of absolute (fixes issue when Jenkins is run from sub-uri).</li></ul><h2 id="CASPlugin-Version1.1.1(2012-11-10)">Version 1.1.1 (2012-11-10)</h2><ul><li>Redirect to origin URL after authentication (instead of always showing Jenkins home page).</li><li>Show custom error page with proper &quot;Try again&quot; link in case of login failure (e.g. due to an invalid ticket).</li><li>Removed unused AspectJ JARs, reducing the overall plugin size (thanks to Jozef Kotlar).</li></ul><h2 id="CASPlugin-Version1.1.0(2012-09-07)">Version 1.1.0 (2012-09-07)</h2><ul><li>Support for CAS 2.0 Proxy Tickets, allowing external applications already secured with CAS to authenticate in Jenkins without requiring user input or password.</li></ul><h2 id="CASPlugin-Version1.0.0(2012-09-05)">Version 1.0.0 (2012-09-05)</h2><ul><li>Initial release of the new <strong>CAS Plugin</strong></li><li>Multiple protocols support: CAS 1.0, CAS 2.0, SAML 1.1</li><li>Custom CAS 1.0 response parsing support</li><li>CAS 2.0 and SAML 1.1 attributes support</li><li>Single Sign-Out support</li><li>Jenkins API Token support (no conflict)</li></ul>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:15</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
