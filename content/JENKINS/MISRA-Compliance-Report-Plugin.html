<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : MISRA Compliance Report Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : MISRA Compliance Report Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (oyvindlr)</span>, last modified on Apr 04, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View MISRA Compliance Report <a href="https://plugins.jenkins.io/misra-compliance-report-generator" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>
<br/></p><p>The MISRA Compliance Report Plugin generates a kind of report known as a &quot;Guideline Compliance Summary&quot; (GCS), which is mandatory as evidence of compliance according to <a href="https://www.misra.org.uk/LinkClick.aspx?fileticket=w_Syhpkf7xA%3D&amp;tabid=57" class="external-link" rel="nofollow">MISRA Compliance: 2016</a>. The report also contains your Guideline Re-categorization Plan (GRP), and provides links to your approved deviations.</p><p>The plugin requires two or three input files:</p><ol><li>A list of warnings/violations produced by a MISRA checking tool. At the moment, the supported tools are PC-Lint and Cppcheck. Please create an issue in the <a href="https://issues.jenkins-ci.org/secure/Dashboard.jspa" class="external-link" rel="nofollow">Jenkins issue tracker</a> referencing this plugin if you need support for other tools. You can also add support for your tool yourself, using the instructions in the  <a href="https://github.com/jenkinsci/misra-compliance-report-generator-plugin" class="external-link" rel="nofollow">readme in the github repo</a>.</li><li><a href="#MISRAComplianceReportPlugin-listofsourcefiles">A list of source files</a> (including header files). The plugin will scan through the files looking for &quot;suppression comments&quot; - comments that suppress the MISRA checking tool from giving warnings. You can add special tags to these comments to tell the plugin how to handle them.</li><li>Your Guideline Re-categorization Plan (GRP), if you have one, must be provided in <a href="#MISRAComplianceReportPlugin-grp">a simple text format</a>. </li></ol><p>Achieving MISRA compliance is about more than just following the coding guidelines, and it requires a lot of work even when using tools like this one. When you are using this tool, much of your work will be done during code review, where you review MISRA tool suppression comments. </p><h6 id="MISRAComplianceReportPlugin-Note">Note</h6><p>This software is not made by, endorsed by, or in any other way affiliated with the <a href="https://www.misra.org.uk/" rel="nofollow" class="external-link">Motor Industry Software Reliability Association (MISRA)</a>. &quot;MISRA&quot; and &quot;MISRA C&quot; and the triangle logo are registered trademarks owned by HORIBA MIRA Ltd, held on behalf of the MISRA Consortium.</p><h2 id="MISRAComplianceReportPlugin-Examplereport">Example report</h2><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/170918966/170920336.png" data-image-src="attachments/170918966/170920336.png" data-unresolved-comment-count="0" data-linked-resource-id="170920336" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="examplereport.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="170918966" data-linked-resource-container-version="15"></span></p><p><br/></p><h2 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-SupportedMISRAguidelines"><span>Supported MISRA guidelines</span></h2><p class="md-end-block"><span><span style="color: rgb(51,51,51);">The three MISRA C guideline versions 1998, 2004 and 2012 as well as the C++ guidelines from 2008 are supported. Some tools may not support all versions. </span><br/></span></p><h2 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Suppressioncomments"><span>Suppression comments</span></h2><p class="md-end-block"><span>Most static code analysis tools support some form of warning suppression using specially formatted comments in the code. For example, for PC-lint these comments use the format</span></p><p class="md-end-block"><span><code>/*lint -e333 Blah blah blah */</code></span></p><p class="md-end-block"><span>with some variations. The &quot;-e333&quot; part is the warning code used internally in PC-lint. The GCS plugin converts each such code to a set of MISRA guidelines. If no tags are added to this comment, the plugin will mark all guidelines which are suppressed by the comment as </span><span class="md-html-inline"><em>violations</em></span><span>.</span></p><h2 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Addingtagstosuppressioncomments"><span>Adding tags to suppression comments</span></h2><p class="md-end-block"><span>Tags consist of certain keywords written in all caps that are added anywhere within a suppression comment. The following tags are understood by the plugin:</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block"><span>GUIDELINE</span></p></li><li class="md-list-item"><p class="md-end-block"><span>NON-MISRA</span></p></li><li class="md-list-item"><p class="md-end-block"><span>FALSE POSITIVE</span></p></li><li class="md-list-item"><p class="md-end-block"><span>DEVIATION</span></p></li></ul><h3 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Non-MISRAtags"><span>Non-MISRA tags</span></h3><p class="md-end-block"><span>The warning tool you are using may be emitting warnings for possible problems that are not in violation of any MISRA guidelines. In such cases you can add the NON-MISRA tag to your suppression comment. The comment will be ignored by the plugin.</span></p><p class="md-end-block"><span>The same tag can be used if there are comments that fit the suppression pattern that aren't actually suppressing anything - such as other instructions to the checking tool.</span></p><p class="md-end-block"><span>Examples:</span></p><p class="md-end-block"><span><code>/*lint -e423 Tool complains about this and that, but it's fine and not a MISRA rule. NON-MISRA */</code></span></p><p class="md-end-block"><span><code>//lint -save NON-MISRA (not suppressing anything)</code></span></p><h3 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Falsepositivetags"><span>False positive tags</span></h3><p class="md-end-block"><span>Sometimes a tool will emit a warning for some piece of code that the developer can determine is not actually in violation of the guideline in question. This is called a false positive. When the tag FALSE POSITIVE (or FALSE-POSITIVE or FALSEPOSITIVE) is added to the suppression comment, the suppression is ignored by the plugin. However, unlike the NON-MISRA tag, the plugin will only accept a FALSE POSITIVE tag when it can actually find out which guideline(s) is suppressed by the comment.</span></p><p class="md-end-block"><span>A suppression comment may suppress warnings for some guidelines that are actually violated and some that are not. In this case, you can add an argument to the FALSE POSITIVE tag in the form FALSEPOSITIVE(Rule 3.1). This tells the tool that rule 3.1 is not violated, but other guidelines suppressed by this comment are still violated. You can add multiple such rule-specific tags to a single comment. </span></p><p class="md-end-block"><span>Examples:</span></p><p class="md-end-block"><span><code><span style="color: rgb(51,51,51);">/* cppcheck-suppress misra-c2012-5.1; FALSE POSITIVE not actually in breach of the guideline */</span>/</code></span></p><p class="md-end-block"><span><code>/*lint -esym(n, 944) PC-lint gives warnings for directive 1.1, rule 2.3 and rule 5.4, but actually only 5.4 is violated. FALSE POSITIVE(Directive 1.1) FALSE POSITIVE(Rule 2.3) */</code></span></p><h3 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Guidelinetags"><span>Guideline tags</span></h3><p class="md-end-block"><span>The plugin may not always be able to determine which guideline warnings are being suppressed for a specific comment. In such cases, you </span><span class="md-html-inline"><em>must</em></span><span> add one or more GUIDELINE(</span><span class="md-entity">&lt;</span><span>guideline name</span><span class="md-entity">&gt;</span><span>) tags to the comment. This tag tells the plugin which guideline is being suppressed. It can be combined with other tags.</span></p><p class="md-end-block"><span>Example:</span></p><p class="md-end-block"><span><code>/*lint -e455 Violation of rule 2.4. GUIDELINE(Rule 2.4) */</code></span></p><h3 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Deviationtags"><span>Deviation tags</span></h3><p class="md-end-block"><span>Deviations are violations that have been documented and formally approved. You can add a DEVIATION(...) tag to a suppression comment to show that this violation has been formally permitted. The tag takes one, two or three arguments: First is the deviation reference, such as the a document number or deviation number. Second (optional) is a web link to the deviation record - the link will be shown in the GCS report. Third is the guideline which is being deviated, if necessary.</span></p><p class="md-end-block"><span><strong>Note</strong></span><span>: </span><span><em>The protocol marker &quot;http://&quot; contains a double slash - but using double slashes within a comment is illegal according to some MISRA guidelines. You should omit the double slash and replace it by a single slash or nothing. The &quot;:&quot; by itself is sufficient to show that the part to the left is the protocol.</em></span></p><p class="md-end-block"><span>Examples:</span></p><p class="md-end-block"><span><code>/*lint -e543 We break the rules, but mgmnt says it's ok. DEVIATION(D22) */</code></span></p><p class="md-end-block"><span><code><span style="color: rgb(51,51,51);">/* cppcheck-suppress misra-c2012-7.11 This time we have a link too. DEVIATION(D23, https:<a href="http://tinyurl.com/2fcpre6" class="external-link" rel="nofollow">tinyurl.com/2fcpre6</a>) */</span><br/></code></span></p><p class="md-end-block"><span><code>/*lint -e32 This comment suppresses more than one violation, but there is a deviation only for one of them, so we need to mark it with the rule number. DEVIATION(D24,  https:<a href="http://tinyurl.com/2fcpre6" class="external-link" rel="nofollow">tinyurl.com/2fcpre6</a>, Rule 5.1) FALSEPOSITIVE(Rule 1.1) */</code></span></p><p class="md-end-block"><span><code>/*lint -e45 This time we specify the guideline, but we don't have a link, so just leave the second argument empty. DEVIATION(D33,, Rule 5.1) */</code></span></p><h2 id="MISRAComplianceReportPlugin-grpGuidelineRe-categorizationPlan(GRP)"><span class="confluence-anchor-link" id="MISRAComplianceReportPlugin-grp"></span><span style="color: rgb(210,73,57);">Guideline Re</span><span style="color: rgb(210,73,57);">-categorization Plan (GRP)</span></h2><p class="md-end-block"><span>Guidelines come in the three categories &quot;Advisory&quot;, &quot;Required&quot; and &quot;Mandatory&quot;, but may be re-categorized on a project-basis by a guideline re-categorization plan (GRP). The legal re-categorizations are</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block"><span>Required -&gt; Mandatory</span></p></li><li class="md-list-item"><p class="md-end-block"><span>Advisory -&gt; Mandatory</span></p></li><li class="md-list-item"><p class="md-end-block"><span>Advisory -&gt; Required</span></p></li><li class="md-list-item"><p class="md-end-block"><span>Advisory -&gt; Disapplied</span></p></li></ul><p class="md-end-block"><span>If a GRP exists, a pure text version of the GRP must be given as input to the plugin. Each line of the text file should contain the guideline name followed by the new category.</span></p><p class="md-end-block"><span>Example pure-text GRP file:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>Rule 1.1, Mandatory</span><br/><span>Rule 4.1, Required</span><br/><span>Rule 5.1, Disapplied</span></pre><h2 id="MISRAComplianceReportPlugin-listofsourcefilesListofsourcefiles"><span class="confluence-anchor-link" id="MISRAComplianceReportPlugin-listofsourcefiles"></span><span style="color: rgb(210,73,57);">List of source</span><span style="color: rgb(210,73,57);"> files</span></h2><p class="md-end-block"><span>One of the inputs to the plugin is a list of all source files to be scanned. The list is itself a text file where each line contains the path to a file, relative to the workspace root. The list should contain header files as well as source files. A natural approach is to generate this file using for example a shell script step before the GCS plugin runs.</span></p><h2 class="md-end-block" id="MISRAComplianceReportPlugin-Result"><span>Result</span></h2><p class="md-end-block"><span>The end result is either compliant or not compliant - the project is compliant as long as there are no violations of required or mandatory rules (or rules that have been re-categorized as required or mandatory). The report will be created even if the code is deemed not compliant. You can elect to have Jenkins mark the build as failed if the code is not compliant.</span></p><h2 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Toolsettings"><span>Tool settings</span></h2><p class="md-end-block"><span>For each checking tool, the plugin requires a specific output syntax in order to properly parse the output. The settings required in order to produce the correct output are given in this section</span></p><h5 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-PC-lint"><span>PC-lint</span></h5><p class="md-end-block"><span>PC-lint should be set to produce output of the same format used for the warnings plugin. Details can be found </span><span class=" md-link"><a href="https://wiki.jenkins.io/display/JENKINS/PcLint+options" rel="nofollow"><span>here</span></a></span><span>. These are the essential settings:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>+ffn // force full path names</span><br/><span>-width(0) // don't insert line breaks (unlimited output width).</span><br/><span>-hf1 // message height one</span><br/><span>-&quot;format=%f(%l): %t %n: %m&quot;</span></pre><h5 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Cppcheck"><span class="md-plain">Cppcheck</span></h5><p class="md-end-block md-p"><span class="md-plain">Cppcheck comes with </span><span class=" md-link"><a href="https://github.com/danmar/cppcheck/blob/master/addons/misra.py" class="external-link" rel="nofollow"><span class="md-plain">a python add-on specifically to check MISRA guidelines</span></a></span><span class="md-plain">. At the time of writing, only the C 2012 version of the guidelines is supported. Since suppressions in a separate file are not yet supported, you will need to use </span><span class=" md-link"><a href="http://cppcheck.sourceforge.net/manual.html#idm479" class="external-link" rel="nofollow"><span class="md-plain">inline suppressions</span></a></span><span class="md-plain">, so run cppcheck with the option </span><span>--inline-suppr</span><span class="md-plain"> . Suppressions for the python add-on are in the format </span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>/* cppcheck-suppress misra-c2012-4.1 ; your tags here e.g. DEVIATION(D3) */</span></pre><p class="md-end-block md-p"><span class="md-plain">Here 4.1 is the rule number to suppress. Note the semicolon between the rule identifier and your tags. You do not need a </span><span class=" md-link"><a href="http://cppcheck.sourceforge.net/manual.html#idm429" class="external-link" rel="nofollow"><span class="md-plain">&quot;MISRA Text file&quot;</span></a></span><span class="md-plain"> to use with cppcheck for this plugin to work, although it helps to clarify the warnings from the cppcheck addon.</span></p><h2 class="md-end-block md-heading" id="MISRAComplianceReportPlugin-Logofsuppressions"><span>Log of suppressions</span></h2><p class="md-end-block"><span>The plugin can generate a text file containing a log of suppressed violations with file names and line numbers of where they occur. The log is in the format of warnings from the clang-compiler, so that it can be parsed automatically by existing tools. Each suppression has a warning level, either </span><span><code>info</code></span><span>, </span><span><code>warning</code></span><span> or </span><span><code>error</code></span><span>. The </span><span><code>info</code></span><span> level is given to violations of advisory guidelines, non-MISRA tags, false positive tags and deviation tags. The info tag indicates that a code reviewer should verify the tag or violation. The </span><span><code>warning</code></span><span> level is given to suspicious non-MISRA tags. The </span><span><code>error</code></span><span> level is given to untagged violations of required and mandatory guidelines.</span></p><p class="md-end-block"><span>The log can be used to automatically generate useful info for code review using for example the </span><span><em>violation comments to bitbucket server</em></span><span> plugin using the CLANG format settings.</span></p><p class="md-end-block"><span>Example log:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>file1.c:20: info: Violation of Rule 1.2 (Advisory)</span><br/><span>file2.c:30: info: Deviation of Rule 2.1 (Advisory)</span><br/><span>file3.c:5: info: Suppression of Directive 1.1 (Mandatory) tagged as false positive</span><br/><span>file4.c:3: info: Tool suppression comment tagged as not MISRA relevant</span><br/><span>file5.c:22: warning: Tool suppression comment tagged as not MISRA relevant, but PC-Lint indicates that this comment suppresses Rule 1.1 and Rule 1.2</span><br/><span>file6.c:1: error: Violation of Directive 1.1 (Mandatory)</span><br/><span>file7.c:2: error: Violation of Rule 2.2 (Required)</span></pre><h2 id="MISRAComplianceReportPlugin-Pluginsettings"><span style="color: rgb(210,73,57);">Plugin settings</span></h2><p>Settings for the plugin in the Jenkins Pipeline Syntax Snippet Generator is shown below. If you are using a scripted pipeline, note that variables in groovy strings will be expanded only in strings with double quotes. So in the example below, you should replace '${swVersion}' by &quot;${swVersion}&quot; in the actual script.</p><p><br/></p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/170918966/170920344.png" data-image-src="attachments/170918966/170920344.png" data-unresolved-comment-count="0" data-linked-resource-id="170920344" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MisraPluginSettings.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="170918966" data-linked-resource-container-version="15"></span></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/170918966/170920339.png">examplereport.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/170918966/170920336.png">examplereport.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/170918966/170920344.png">MisraPluginSettings.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:34</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
