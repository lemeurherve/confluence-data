<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : AWS CodeBuild Plugin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : AWS CodeBuild Plugin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (subinataws)</span>, last modified by <span class='editor'> Unknown User (leobaran_aws)</span> on Oct 17, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <a href="https://aws.amazon.com/codebuild/" class="external-link" rel="nofollow">AWS CodeBuild</a> is a fully managed build service that compiles source code, runs tests, and produces software packages that are ready to deploy. With CodeBuild, you don’t need to provision, manage, and scale your own build servers. CodeBuild scales continuously and processes multiple builds concurrently, so your builds are not left waiting in a queue. You can get started quickly by using prepackaged build environments, or you can create custom build environments that use your own build tools. With CodeBuild, you are charged by the minute for the compute resources you use.</p><p>This is the official plugin for AWS CodeBuild that's managed by CodeBuild engineering team. You can reach out to us for submitting feedback or feature requests at codebuild-feedback@amazon.com.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" alt="PB_AWS_logo_RGB_WHT" src="https://d1.awsstatic.com/logos/aws/PB_AWS_logo_RGB_WHT.jpg" data-image-src="https://d1.awsstatic.com/logos/aws/PB_AWS_logo_RGB_WHT.jpg"></span><p><br/> The AWS CodeBuild plugin for Jenkins provides a build step for your Jenkins project.</p><p><a href="https://camo.githubusercontent.com/1478dbc9a6202d2157e8f370fe97b6f33acbf8cf/68747470733a2f2f636f64656275696c642e75732d776573742d322e616d617a6f6e6177732e636f6d2f6261646765733f757569643d65794a6c626d4e79655842305a57524559585268496a6f694b30684b5547564764466c4c53305a6d57545933546e70496169744663485a79646c673154486c734b3164594e474e346445747853485a50517a426e61304577576b777a59334a514d556447614746335448566b64334e53596d464b54324e6d4f4652614e6d4654616b394d6131565a6430787a50534973496d6c32554746795957316c644756795533426c59794936496c56765a30467063334e766447784c59303032556a49694c434a745958526c636d6c6862464e6c64464e6c636d6c68624349364d5830253344266272616e63683d6d6173746572" class="external-link" rel="nofollow"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" alt="Build Status" src="https://camo.githubusercontent.com/1478dbc9a6202d2157e8f370fe97b6f33acbf8cf/68747470733a2f2f636f64656275696c642e75732d776573742d322e616d617a6f6e6177732e636f6d2f6261646765733f757569643d65794a6c626d4e79655842305a57524559585268496a6f694b30684b5547564764466c4c53305a6d57545933546e70496169744663485a79646c673154486c734b3164594e474e346445747853485a50517a426e61304577576b777a59334a514d556447614746335448566b64334e53596d464b54324e6d4f4652614e6d4654616b394d6131565a6430787a50534973496d6c32554746795957316c644756795533426c59794936496c56765a30467063334e766447784c59303032556a49694c434a745958526c636d6c6862464e6c64464e6c636d6c68624349364d5830253344266272616e63683d6d6173746572" data-image-src="https://camo.githubusercontent.com/1478dbc9a6202d2157e8f370fe97b6f33acbf8cf/68747470733a2f2f636f64656275696c642e75732d776573742d322e616d617a6f6e6177732e636f6d2f6261646765733f757569643d65794a6c626d4e79655842305a57524559585268496a6f694b30684b5547564764466c4c53305a6d57545933546e70496169744663485a79646c673154486c734b3164594e474e346445747853485a50517a426e61304577576b777a59334a514d556447614746335448566b64334e53596d464b54324e6d4f4652614e6d4654616b394d6131565a6430787a50534973496d6c32554746795957316c644756795533426c59794936496c56765a30467063334e766447784c59303032556a49694c434a745958526c636d6c6862464e6c64464e6c636d6c68624349364d5830253344266272616e63683d6d6173746572"></span></a><span style="color: rgb(36,41,46);"> </span><a href="https://github.com/jenkinsci/aws-codebuild-plugin/blob/master/LICENSE" class="external-link" rel="nofollow"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" alt="license" src="https://camo.githubusercontent.com/a8f6a5ad1473478a810b13e0d66a8a052ad8dc6b/687474703a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865322e302d627269676874677265656e2e7376673f7374796c653d666c6174" data-image-src="https://camo.githubusercontent.com/a8f6a5ad1473478a810b13e0d66a8a052ad8dc6b/687474703a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865322e302d627269676874677265656e2e7376673f7374796c653d666c6174"></span></a><span style="color: rgb(36,41,46);"> </span><a href="https://ci.jenkins.io/job/Plugins/job/aws-codebuild-plugin/job/master/" rel="nofollow" class="external-link"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" alt="Build Status" src="https://camo.githubusercontent.com/f93ea9509451a1cc0bdf47a0afbb5547a9856a94/68747470733a2f2f63692e6a656e6b696e732e696f2f6275696c645374617475732f69636f6e3f6a6f623d506c7567696e732f6177732d636f64656275696c642d706c7567696e2f6d6173746572" data-image-src="https://camo.githubusercontent.com/f93ea9509451a1cc0bdf47a0afbb5547a9856a94/68747470733a2f2f63692e6a656e6b696e732e696f2f6275696c645374617475732f69636f6e3f6a6f623d506c7567696e732f6177732d636f64656275696c642d706c7567696e2f6d6173746572"></span></a></p><h2 id="AWSCodeBuildPlugin-SetupJenkins">Setup Jenkins</h2><p>We have written a blog post for setting up Jenkins with AWS CodeBuild plugin pre-installed. Learn more: <a href="https://aws.amazon.com/blogs/devops/simplify-your-jenkins-builds-with-aws-codebuild/" class="external-link" rel="nofollow">https://aws.amazon.com/blogs/devops/simplify-your-jenkins-builds-with-aws-codebuild/</a>.</p><h2 id="AWSCodeBuildPlugin-PluginInstallation(Optional)"><span class="anchor">Plugin Installation <em>(Optional)</em></span></h2><p>If you already have a Jenkins setup and would like to only install the AWS CodeBuild plugin, then the recommended approach would be to search for &quot;<code>AWS CodeBuild Plugin for Jenkins&quot;</code> in the Plugin Manager on your Jenkins instance.</p><h2 id="AWSCodeBuildPlugin-PluginUsage"><span class="anchor">Plugin Usage</span></h2><h3 id="AWSCodeBuildPlugin-UsingtheAWSCodeBuildpluginwiththeJenkinsPipelineplugin"><span class="anchor">Using the AWS CodeBuild plugin with the Jenkins Pipeline plugin</span></h3><p>Your CodeBuild project can be configured in a Jenkins Pipeline. as shown below. You can use the snippet generator (click &quot;Pipeline Syntax&quot; on your pipeline project page) to generate the pipeline script that adds CodeBuild as a step in your pipeline. It should generate something like:</p><p><code>awsCodeBuild
 projectName: 'project', credentialsType: 'keys', region: 
'us-west-2', sourceControlType: 'jenkins'
</code></p><p><br/></p><p>View without Jenkins Blue Ocean plugin:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/103809594/133956336.png" data-image-src="attachments/103809594/133956336.png" data-unresolved-comment-count="0" data-linked-resource-id="133956336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2017-7-14 22:17:9.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="103809594" data-linked-resource-container-version="24"></span></p><p><em><strong>(Recommended)</strong></em> View with Jenkins Blue Ocean plugin:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/103809594/133956337.png" data-image-src="attachments/103809594/133956337.png" data-unresolved-comment-count="0" data-linked-resource-id="133956337" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2017-7-14 22:32:37.png" data-base-url="https://wiki.jenkins.io" data-linked-resource-content-type="image/png" data-linked-resource-container-id="103809594" data-linked-resource-container-version="24"></span></p><p><br/></p><h3 id="AWSCodeBuildPlugin-UsingAWSCodeBuildwithJenkins"><span class="anchor">Using AWS CodeBuild with Jenkins</span></h3><ol><li><a href="http://docs.aws.amazon.com/console/codebuild/create-project" class="external-link" rel="nofollow">Create Project</a> on the AWS CodeBuild console.<ul><li>Switch to the region you would prefer to run the build in.</li><li>You can optionally set the Amazon VPC configuration to allow CodeBuild build container to access resources within your VPC.</li><li>Make sure to write down the project's name.</li><li>(Optional) If your source repository is not natively supported by CodeBuild, you can set the input source type for your project as S3 for the CodeBuild project.</li></ul></li><li>Create AWS IAM user to be used by the Jenkins plugin.<ul><li><a href="https://console.aws.amazon.com/iam/home?region=us-east-1#/policies$new" class="external-link" rel="nofollow">Create a policy</a> similar to the one following this section.</li><li>Go to the <a href="https://console.aws.amazon.com/iam/home?region=us-east-1#/users$new?step=details" class="external-link" rel="nofollow">IAM console</a>, and create a new user.<ul><li>Access type should be: Programmatic Access.</li><li>Attach policy to user that you created previously.</li></ul></li></ul></li><li>Create a freestyle project in Jenkins.<ul><li>On the Configure page, choose <span>Add build step</span> &gt; <span>Run build on AWS AWS CodeBuild</span>.</li><li>Configure your build step.<ul><li>Enter <span>Region</span>, <span>Credentials</span> from the user created previously, and <span>ProjectName</span>.</li><li>Select <span>Use Project source</span>.</li><li>Save the configuration and run a build from Jenkins.</li></ul></li></ul></li></ol><ul><li>For the <span>Source Code Management</span> make sure to select how you would like to retrieve your source. You may need to install the <a href="https://wiki.jenkins-ci.org/display/JENKINS/GitHub+Plugin" class="external-link" rel="nofollow">GitHub Plugin</a> (or the relevant source repository provider's Jenkins plugin) to your Jenkins server.</li><li>On the Configure page, choose <span>Add build step</span> &gt; <span>Run build on AWS CodeBuild</span>.</li><li>Configure the build step.<ul><li>Enter <span>Region</span>, <span>Credentials</span> from the user created previously, and <span>Project name</span>.</li><li>Select <span>Use Jenkins source</span>.</li><li>Save the configuration and run a build from Jenkins.</li></ul></li></ul><p>Policy sample for IAM user:</p><pre><code>{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [&quot;arn:aws:logs:{{region}}:{{awsAccountId}}:log-group:/aws/codebuild/{{projectName}}:*&quot;],
            &quot;Action&quot;: [&quot;logs:GetLogEvents&quot;]
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [&quot;arn:aws:s3:::{{inputBucket}}&quot;],
            &quot;Action&quot;: [&quot;s3:GetBucketVersioning&quot;]
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [&quot;arn:aws:s3:::{{inputBucket}}/{{inputObject}}&quot;],
            &quot;Action&quot;: [&quot;s3:PutObject&quot;]
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [&quot;arn:aws:s3:::{{outputBucket}}/*&quot;],
            &quot;Action&quot;: [&quot;s3:GetObject&quot;]
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [&quot;arn:aws:codebuild:{{region}}:{{awsAccountId}}:project/{{projectName}}&quot;],
            &quot;Action&quot;: [&quot;codebuild:StartBuild&quot;,
                       &quot;codebuild:BatchGetBuilds&quot;,
                       &quot;codebuild:BatchGetProjects&quot;]
        }
	]
} </code><span class="anchor"><br/></span></pre><h3 id="AWSCodeBuildPlugin-UsingtheAWSCodeBuildpluginwiththeJenkinsPipelineplugin.1">Using the AWS CodeBuild plugin with the Jenkins Pipeline plugin</h3><p>Use the snippet generator (click &quot;Pipeline Syntax&quot; on your pipeline project page) to generate the pipeline script that adds CodeBuild as a step in your pipeline. It should generate something like</p><pre><code>awsCodeBuild projectName: 'project', credentialsType: 'keys', region: 'us-west-2', sourceControlType: 'jenkins'
</code></pre><p>Additionally, this returns a result object which exposes the following methods which can be useful to later steps:</p><ul><li><code>getBuildId()</code>: returns the build ID of the build (similar to <code>codebuild-project-name:12346789-ffff-0000-aaaa-bbbbccccdddd</code>)</li><li><code>getArn()</code>: returns the ARN of the build (similar to <code>arn:aws:codebuild:AWS_REGION:AWS_ACCOUNT_ID:build/CODEBUILD_BUILD_ID</code>, where <code>CODEBUILD_BUILD_ID</code> is the same information returned in getBuildId)</li><li><code>getArtifactsLocation()</code>: returns the S3 ARN of the artifacts location (similar to <code>arn:aws:s3:::s3-bucket-name/path/to/my/artifacts</code>)</li></ul><h3 id="AWSCodeBuildPlugin-AWSCredentialsinJenkins"><a href="https://github.com/awslabs/aws-codebuild-jenkins-plugin#aws-credentials-in-jenkins" class="external-link" rel="nofollow">AWS Credentials in Jenkins</a></h3><p>It's recommended to use the Jenkins credentials store for your AWS credentials. Your Jenkins credentials must be of type <code>CodeBuild Credentials</code> to be compatible with the CodeBuild plugin. When creating new <code>CodeBuild Credentials</code>, the plugin will attempt to use the <a href="https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html" class="external-link" rel="nofollow">default credentials provider chain</a> if AWS access and secret keys are not defined.<br/><br/>You can also specify your AWS access and secret keys in the CodeBuild configuration when using <code>credentialsType: 'keys'</code>. If the access and secret keys are not specified, the plugin will attempt to use the default credentials provider chain. When running a Jenkins pipeline build, the plugin will attempt to use credentials from the <a href="https://plugins.jenkins.io/pipeline-aws" class="external-link" rel="nofollow">pipeline-aws</a> plugin before falling back to the default credentials provider chain. If you are running Jenkins on an EC2 instance, leave the access and secret key fields blank and specify <code>credentialsType: 'keys'</code> to use credentials from your EC2 instance profile, which is in the default credentials provider chain.</p><p><span class="anchor"><br/></span></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/103809594/133956335.png">image2017-7-14 22:9:42.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/103809594/133956336.png">image2017-7-14 22:17:9.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/103809594/133956337.png">image2017-7-14 22:32:37.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/103809594/133956338.png">image2017-7-14 22:34:45.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:12</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
