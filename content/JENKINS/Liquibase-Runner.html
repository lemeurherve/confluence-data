<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins : Liquibase Runner</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Plugins.html">Plugins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins : Liquibase Runner
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (prospero238)</span>, last modified on Feb 02, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Plugin Information </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> View Liquibase Runner <a href="https://plugins.jenkins.io/liquibase-runner" class="external-link" rel="nofollow">on the plugin site</a> for more information. </p></td>
</tr>
</tbody></table>

<div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Older versions of this plugin may not be safe to use. Please review the following warnings before using an older version:</p>

<ul>
	<li><a href="https://jenkins.io/security/advisory/2018-03-26/#SECURITY-519" class="external-link" rel="nofollow">Plugin allows users to load arbitrary Java code into Jenkins controller JVM</a></li>
	<li><a href="https://www.jenkins.io/security/advisory/2020-09-23/#SECURITY-2030" class="external-link" rel="nofollow">Missing permission check allows enumerating credentials IDs</a></li>
	<li><a href="https://www.jenkins.io/security/advisory/2020-09-23/#SECURITY-1887" class="external-link" rel="nofollow">XXE vulnerability</a></li>
	<li><a href="https://www.jenkins.io/security/advisory/2020-09-23/#SECURITY-1885" class="external-link" rel="nofollow">Stored XSS vulnerability</a></li>
</ul>

</div></div>

<p>Provides <a href="http://www.liquibase.org" class="external-link" rel="nofollow">Liquibase</a> build steps that evaluate liquibase changesets.</p>

<p><span style="color: rgb(255,0,0);"><strong>Important Upgrade Information</strong></span><br/>
Version 1.2.0 now uses the <a href="https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Plugin" class="external-link" rel="nofollow">Credentials Plugin</a> to manage usernames and passwords to connect to the database.  If you were using username &amp; password configuration in the previous version of this plugin, be aware that credentials will be automatically created upon plugin update.</p>


<h2 id="LiquibaseRunner-Features">Features</h2>

<p>Adds liquibase related operations (update, rollback, and dbdoc generation) as available build steps.  See Liquibase documentation at <a href="http://www.liquibase.org" class="external-link" rel="nofollow">http://www.liquibase.org</a>.<br/>
Evaluated changesets and their details appear on the build's summary page.  </p>

<p>Uses liquibase version 3.5.3.</p>


    
    
    

<div class="gallery">
        <table>

                        <tr>
                                    <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/96076123/103940110" width="300" height="149" data-image-src="/download/attachments/96076123/dbdoc.png?version=1&amp;modificationDate=1484253846000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="dbdoc.png" data-linked-resource-id="103940110" data-linked-resource-container-id="96076123">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/96076123/96305181" width="300" height="134" data-image-src="/download/attachments/96076123/changeset-detail.png?version=1&amp;modificationDate=1457472128000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="changeset-detail.png" data-linked-resource-id="96305181" data-linked-resource-container-id="96076123">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/96076123/96305180" width="300" height="138" data-image-src="/download/attachments/96076123/changeset-listing.png?version=1&amp;modificationDate=1457472124000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="changeset-listing.png" data-linked-resource-id="96305180" data-linked-resource-container-id="96076123">
                </td>
                                                <td class="gallery-image" style="width: 300px">
                    <img border="0" src="attachments/thumbnails/96076123/96305179" width="300" height="194" data-image-src="/download/attachments/96076123/changeset-summary.png?version=1&amp;modificationDate=1457472119000&amp;api=v2" class="confluence-embedded-image" data-linked-resource-default-alias="changeset-summary.png" data-linked-resource-id="96305179" data-linked-resource-container-id="96076123">
                </td>
                                </tr>
                    <tr>
                                    <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                                <td style="width: 300px">
                    <div class="gallery-caption"></div>
                </td>
                                </tr>
             </table>
</div>


<h2 id="LiquibaseRunner-KnownLimitations">Known Limitations</h2>

<ul>
	<li>Jenkins master will need to be able to connect to the target database.  If, due to network constraints, your Jenkins slave node can initiate this connection but your Jenkins master cannot, consider the workaround described in <a href="https://issues.jenkins-ci.org/browse/JENKINS-41002" class="external-link" rel="nofollow">JENKINS-41002</a>, which uses port forwarding to facilitate database connectivity.</li>
</ul>



<h2 id="LiquibaseRunner-Installation">Installation</h2>

<ul>
	<li>Install the liquibase-runner plugin using Jenkins' plugin manager. Depending on how you use and configure the plugin, you may need to install a database server, and potentially your target schema.</li>
	<li>Once installed, three build steps are made available: &quot;Evaluate liquibase changesets&quot;, &quot;Generate Liquibase dbDoc&quot;, and &quot;Rollback liquibase changes&quot;.</li>
</ul>



<h2 id="LiquibaseRunner-CommonConfigurationAmongstBuilders">Common Configuration Amongst Builders</h2>

<h3 id="LiquibaseRunner-Simplest">Simplest</h3>

<p>By default, the plugin will use an instance of an <a href="http://www.h2database.com" class="external-link" rel="nofollow">H2</a> in-memory database, so you need only define the location of your changeset file.   Note that changes won't be persisted across builds (though you may persist the H2 database to disk, see tips).</p>

<h3 id="LiquibaseRunner-Advanced">Advanced</h3>

<p>Those who would like more control over liquibase configuration may do so using options presented when using the &quot;advanced&quot; section of the builder configuration. Here you'll find most of liquibase's configuration exposed, including contexts and the JDBC URL used to access the database.</p>

<p>For convenience, the plugin includes a few database drivers for use. Alternatively, you may also define a classpath where a database driver may be loaded, and the driver classname.</p>

<p>Note that individual configuration values will override any found in a defined liquibase properties file.  This emulates how command-line usage of liquibase works.</p>

<h2 id="LiquibaseRunner-Evaluateliquibasechangesetsstep">Evaluate liquibase changesets step</h2>

<p>Creating a job with this build step will run liquibase's update on the target database.  Alternatively, by checking &quot;Test Rollbacks&quot;, liquibase's updateTestingRollbacks is executed.  Once a build has executed, details are provided about each changeset on the build summary.</p>

<h2 id="LiquibaseRunner-Rollbackliquibasechangesstep">Rollback liquibase changes step</h2>

<p>The rollback build step invokes liquibase's &quot;rollback&quot; operation on the target database.  There are a few rollback strategies to choose from that correspond to liquibase's rollback commands (by tag, by date, and by count).</p>

<p>This build step is intended for use when you're deploying to a real environment, and the need arises to undo a previous liquibase update.</p>


<h2 id="LiquibaseRunner-DbDocGeneration">DbDoc Generation</h2>

<p>This build step generates Liquibase's dbDoc based on the supplied changelog.  See <a href="http://www.liquibase.org/dbdoc/index.html" class="external-link" rel="nofollow">liquibase documentation</a>.</p>

<p>It is recommended to use this in conjunction with the <a href="https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin" class="external-link" rel="nofollow">HTMLPublisher plugin</a></p>


<h2 id="LiquibaseRunner-PipelineSupport">Pipeline Support</h2>

<p>All liquibase operations are available to pipeline scripts.  See <a href="https://github.com/jenkinsci/liquibase-runner-plugin/blob/develop/src/docs/pipeline.md" class="external-link" rel="nofollow">documentation</a> for information and examples.</p>

<h2 id="LiquibaseRunner-JobDSLIntegration">Job DSL Integration</h2>

<p>See <a href="https://github.com/jenkinsci/liquibase-runner-plugin/blob/develop/src/docs/jobdsl.md" class="external-link" rel="nofollow">documentation</a> regarding<br/>
how to use the JobDSL plugin to generate liquibase projects.</p>


<h2 id="LiquibaseRunner-UsageTips">Usage Tips</h2>

<ul>
	<li>If you'd like to have only new changesets evaluated, consider using an H2 JDBC url like<br/>
&quot;jdbc:h2:file:./data/sample&quot;.  This instructs H2 to persist the database to a file.  Note, however, if a different<br/>
build slave runs your project, that file will no longer be available, and all changesets will again be executed.</li>
</ul>


<h2 id="LiquibaseRunner-VersionHistory">Version History</h2>

<h4 id="LiquibaseRunner-Version1.3.0(Feb2,2017)">Version 1.3.0 (Feb 2, 2017)</h4>

<ul>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-41681" class="external-link" rel="nofollow">JENKINS-41681</a> Update plugin to use liquibase 3.5.3</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-41655" class="external-link" rel="nofollow">JENKINS-41655</a> liquibase runner causes 'schema_name()' error when used with jtds</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40963" class="external-link" rel="nofollow">JENKINS-40963</a> Allow Liquibase runner to integrate with Job DSL plugin</li>
</ul>


<h4 id="LiquibaseRunner-Version1.2.1(Jan9,2017)">Version 1.2.1 (Jan 9, 2017)</h4>

<ul>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40920" class="external-link" rel="nofollow">JENKINS-40920</a> Credentials migration fails if project has more than one liquibase builder</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40919" class="external-link" rel="nofollow">JENKINS-40919</a> Upgrading to 1.2.0 of the liquibase plugin may result in old-data warning</li>
</ul>


<h4 id="LiquibaseRunner-Version1.2.0(Jan7,2017)">Version 1.2.0 (Jan 7, 2017)</h4>

<ul>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-33401" class="external-link" rel="nofollow">JENKINS-33401</a> Credentials Integration</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40816" class="external-link" rel="nofollow">JENKINS-40816</a> Provide liquibase dbdoc generation build step</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-40707" class="external-link" rel="nofollow">JENKINS-40707</a> Pipeline Support</li>
</ul>



<h4 id="LiquibaseRunner-1.1.0(Aug30,2016)">1.1.0 (Aug 30, 2016)</h4>

<p>Thanks to David Siegal for suggestions, testing, and guidance for this release.</p>
<ul>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37591" class="external-link" rel="nofollow">JENKINS-37591</a> Upgraded to use Liquibase 3.5.1</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37700" class="external-link" rel="nofollow">JENKINS-37700</a> Allow base path to be set.</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37699" class="external-link" rel="nofollow">JENKINS-37699</a> Allow expressions in configuration fields</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37420" class="external-link" rel="nofollow">JENKINS-37420</a> Added roll back build step</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37592" class="external-link" rel="nofollow">JENKINS-37592</a> Tag on successful update.</li>
	<li><a href="https://issues.jenkins-ci.org/browse/JENKINS-37637" class="external-link" rel="nofollow">JENKINS-37637</a> Allow changesets to be loaded from classpath.</li>
</ul>


<h4 id="LiquibaseRunner-1.0.2(May4,2016)">1.0.2 (May 4, 2016)</h4>

<ul>
	<li>Initial Release</li>
</ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076123/96305179.png">changeset-summary.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076123/96305180.png">changeset-listing.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076123/96305181.png">changeset-detail.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/96076123/103940110.png">dbdoc.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Sep 07, 2021 13:32</p>
                    <div id="footer-logo"><a href="/display/">Wiki home</a></div>
                </section>
            </div>
        </div>     </body>
</html>
